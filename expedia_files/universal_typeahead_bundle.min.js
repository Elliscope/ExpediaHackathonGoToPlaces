define("typeahead/core/ConfigurableFeature",["require","exports","typeahead/core/plugins/ExecutionHelper"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(){}return e.getFeatureOverrides=function(e){var t={},n=e.data("feature-overrides");if(n){var o=n.split("|");if(o)for(var i=0,r=o;i<r.length;i++){var a=r[i],s=a.indexOf(":");if(s!==-1){var l=a.substring(0,s),u=a.substring(s+1,a.length);t[l]=u}}}return t},e.prototype.shouldOverride=function(e){var t=$.Deferred(),n=this.getOverrideValue(e);if(!n)return t.reject().promise();if(this.isOverrideToOn(n))return t.resolve(!0).promise();if(this.isOverrideToOff(n))return t.resolve(!1).promise();if(n.indexOf("=")!==-1){var o=n.split("=");if(2===o.length){var i=o[0],r=o[1];switch(i){case"@experiment":return this.checkExperiment(r,t)}}}return t.reject().promise()},e.prototype.isOverrideToOn=function(e){return"on"===e},e.prototype.isOverrideToOff=function(e){return"off"===e},e.prototype.checkExperiment=function(e,t){var o={id:0,name:e};return n.evaluateExperiment(o,t),t.promise()},e.prototype.getOverrideValue=function(e){return e&&e.featureOverrides&&this.featureName&&e.featureOverrides[this.featureName]},e}();t.ConfigurableFeature=o}),define("typeahead/core/EssDataProvider",["require","exports","jquery","underscore","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(e,t,n,o,i,r,a){"use strict";function s(e){n=e}t.__esModule=!0;var l;!function(e){e[e.GOOGLE_AUTOCOMPLETE=0]="GOOGLE_AUTOCOMPLETE",e[e.ADDRESS_AUTOCOMPLETE=1]="ADDRESS_AUTOCOMPLETE"}(l=t.GoogleRequestType||(t.GoogleRequestType={}));var u=function(){function e(){}return e.isReferralToGoogleMaps=function(e){return[l[l.ADDRESS_AUTOCOMPLETE],l[l.GOOGLE_AUTOCOMPLETE]].indexOf(e)>-1},e.prototype.fetchData=function(e){var t,o=e.requestGenerator,i=!!e.additionalDataSourceUrl,r=e.context,a=o.makeRequest(e.srchText,e,r);return e.overrideDataRequest&&"function"==typeof e.overrideDataRequest?e.overrideDataRequest(e.srchText).then(this.singleSourceResponseHandler):e.ignoreResults?a.then(n.noop):i?(t=o.makeRequest(e.srchText,n.extend(e,{isSecondary:!0}),r),n.when(t,a).then(this.dualSourceResponseHandler,this.dualSourceErrorResponseHandler)):a.then(this.singleSourceResponseHandler)},e.prototype.dualSourceResponseHandler=function(t,n){var i=[],r=t[0].q;t[0]&&t[0].sr&&(i=i.concat(t[0].sr)),n[0]&&n[0].sr?i=i.concat(n[0].sr):n[0]&&n[0].r&&(i=i.concat(n[0].r));var a=t[0].rc+"|"+n[0].rc,s=o.compact([t[0].activeABTests,n[0].activeABTests]).join("|");return{isReferralToGoogleMaps:e.isReferralToGoogleMaps(a),query:r,responseCode:a,activeABTests:s,results:i||[]}},e.prototype.dualSourceErrorResponseHandler=function(){a["default"].log(new Error("Dual HTTP request failure handler. Called with "+arguments.length+" inputs"),r.Severity.Excusable,i.ProblemOrigin.ExpediaSuggestService)},e.prototype.singleSourceResponseHandler=function(t){var n=t.sr?t.sr:t.r,o=t.q;return{activeABTests:t.activeABTests,isReferralToGoogleMaps:e.isReferralToGoogleMaps(t.rc),query:o,responseCode:t.rc,results:n||[]}},e}();t.EssDataProvider=u,t.overrideJQuery=s});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/EssSuggestion",["require","exports","typeahead/core/Suggestion","typeahead/core/util/Optional"],function(e,t,n,o){"use strict";t.__esModule=!0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getSourceName=function(){return o.Optional.ofNullable(this.getEssId().isPresent()?this.getEssId().get().sourceName:void 0)},t.prototype.getSourceId=function(){return o.Optional.ofNullable(this.getEssId().isPresent()?this.getEssId().get().sourceId:void 0)},t.prototype.getRegionId=function(){return o.Optional.ofNullable(this.data.gaiaId)},t.prototype.getTla=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.airport?this.data.hierarchyInfo.airport.airportCode:void 0)},t.prototype.getSuggestionHierarchyType=function(){return o.Optional.of(this.data.hierarchyInfo&&"true"===this.data.hierarchyInfo.isChild?"child":"parent")},t.prototype.getRelationInfo=function(){return o.Optional.of(this.data.hierarchyInfo&&this.data.hierarchyInfo.relation&&this.data.hierarchyInfo.relation.length>0?this.data.hierarchyInfo.relation[0]:"-")},t.prototype.getHotelId=function(){return o.Optional.ofNullable(this.getEssId().isPresent()&&"LCM"===this.getEssId().get().sourceName?this.getEssId().get().sourceId:void 0)},t.prototype.getTypeId=function(){return o.Optional.of(this.data.essId&&this.data.essId.sourceId?this.data.essId.sourceId:"-")},t.prototype.getCity=function(){return o.Optional.ofNullable(this.data.hotelAddress?this.data.hotelAddress.city:void 0)},t.prototype.getMultiCity=function(){return o.Optional.of(this.data.hierarchyInfo.airport?this.data.hierarchyInfo.airport.multicity:this.data.hierarchyInfo.multicity)},t.prototype.getSubType=function(){return o.Optional.ofNullable(this.data.subtype)},t.prototype.getStationCode=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.rails?this.data.hierarchyInfo.rails.stationCode:void 0)},t.prototype.getPointOfSupply=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.rails?this.data.hierarchyInfo.rails.pointOfSupply:void 0)},t.prototype.getCountryName=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.country?this.data.hierarchyInfo.country.name:void 0)},t.prototype.getCountryIsoCode2=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.country?this.data.hierarchyInfo.country.isoCode2:void 0)},t.prototype.getCountryIsoCode3=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.country?this.data.hierarchyInfo.country.isoCode3:void 0)},t.prototype.getIsHeds=function(){return this.getEssId().isPresent()&&"TREX"===this.getEssId().get().sourceName?o.Optional.ofNullable("true"):o.Optional.empty()},t.prototype.shouldTriggerDomElementChangeOnSelection=function(){return!0},t.prototype.getExtraSearchParams=function(){var e=[];return[].push.apply(e,this.data.extraSearchParams),this.getHotelFilterParams()&&e.push(this.getHotelFilterParams()),o.Optional.ofNullable(e.length?e:void 0)},t.prototype.getRedirectPath=function(){return o.Optional.ofNullable(this.data.regionMetadata?this.data.regionMetadata.redirect:void 0)},t.prototype.getConcepts=function(){return o.Optional.ofNullable(this.data.concepts?this.data.concepts:void 0)},t.prototype.getHotelFilterParams=function(){var e=this.data.hierarchyInfo&&this.data.hierarchyInfo.hotels?this.data.hierarchyInfo.hotels.hotelFilterId:void 0;if(e){var t=e.replace("AM","");if(t)return{field:"amenities",value:t}}},t.prototype.getEssId=function(){return o.Optional.ofNullable(this.data.essId)},t}(n.Suggestion);t.EssSuggestion=i});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/ExpediaSuggestServiceRequestGenerator",["require","exports","jquery","typeahead/core/RequestGenerator"],function(e,t,n,o){"use strict";function i(e,t){return[e.additionalDataSourceUrl,encodeURIComponent(t)].join("")}function r(e,t){var n={};return n.client=t.clientId,n.siteid=t.siteid,n.guid=t.guid,n.lob=t.lob,n.locale=t.locale,n.expuserid=t.expuserid,n.regiontype=e.mask,n.ab=e.ab,n.dest=e.dest,n.maxresults=e.maxresults,n.features=e.features.join("|"),n.rid=e.rid,n.sortcriteria=e.sortcriteria,n.categories=e.categories,n.personalize=e.personalize,n.pt=e.packageType,n.format="jsonp",n.device=e.device,n.browser=e.browser,n}function a(e){var t={};return t.mask=e.mask,t.ab=e.abtest,t.format=e.format,t.dest=e.dest,t.maxresults=e.maxresults,t.features=e.features||[],t.device=window.utag_data?window.utag_data.device_type:"Unavailable",t.browser=e.browser,t.rid=e.filter_region_id,t.personalize=e.personalize,t.packageType=e.packageType,t}function s(e,t,o,i){var r=n.Deferred();if(e.length>0){var a=e.map(function(e){return e.modifyParameters(o,t,i)});n.when.apply(n,a).done(function(){r.resolve(o)})}else r.resolve(o);return r.promise()}function l(e){n=e}t.__esModule=!0;var u=function(e){function t(t,n,o,i,r){return e.call(this,t,n,o,i,r)||this}return __extends(t,e),t.prototype.makeRequest=function(e,t,o){var l;l=t.isSecondary?i(t,e):this.constructEssUrl(e);var u=a(t),c=n.extend({},t);return s(this.requestParamModifiers,o,u,c).then(function(e){return n.getJSON(l,r(e,o))})},t}(o.RequestGenerator);t.ExpediaSuggestServiceRequestGenerator=u,t.overrideJQuery=l}),define("typeahead/core/IListItem",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n;!function(e){e[e.Label=0]="Label",e[e.Suggestion=1]="Suggestion"}(n=t.ListItemType||(t.ListItemType={}));var o=function(){function e(e){this.html=e,this.listItemType=n.Label}return e}();t.LabelTypeListItem=o}),define("typeahead/core/IMinQueryLengthOverrider",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.isMinQueryLengthOverrider=function(e){return _.isObject(e)&&_.isFunction(e.overrideMinQueryLength)}}),define("typeahead/core/IOverrideParams",["require","exports"],function(e,t){"use strict";t.__esModule=!0});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/OnFocusSuggester",["require","exports","typeahead/core/SuggestionsAggregator"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getEssOnFocusPersonalizedSuggesterConfig=function(){return{isEnabled:!0,rank:2}},t.prototype.getCurrentLocationSuggesterConfig=function(){return{isEnabled:!0,rank:1}},t.prototype.getId=function(){return n.SuggesterId.OnFocusSuggester},t}(n.SuggestionsAggregator);t.OnFocusSuggester=o}),define("typeahead/core/RequestGenerator",["require","exports","jquery","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,n,o){"use strict";function i(e){n=e}t.__esModule=!0;var r=function(){function e(e,t,n,i,r){this.requestParamModifiers=[],this.essAbacusIds=e,this.variantAssigner=t,this.suggestServiceUrlOptions=n,r&&(this.requestParamModifiers=r.get(o.DefaultPluginAssembly.requestParamModifierIdentifier))}return e.defaultVariantAssigner=function(e){void 0===e&&(e=void 0)},e.prototype.getVariantAssignment=function(e){if("function"==typeof this.variantAssigner){var t=this.variantAssigner(e);return void 0===t?void 0:"".concat(e,".",t)}},e.prototype.generateAbacusParameter=function(){function e(e){return"function"==typeof t.getVariantAssignment?t.getVariantAssignment(e):void 0}var t=this,o=[];return n(this.essAbacusIds).each(function(t,n){var i=e(n);i&&o.push(i)}),o.length>0?o.join("|"):""},e.prototype.constructEssUrl=function(e){var t=this.suggestServiceUrlOptions.suggestServiceUrl;return t=this.suggestServiceUrlOptions.overrideServiceUrl?[this.suggestServiceUrlOptions.overrideServiceUrl,encodeURIComponent(e)].join(""):[this.suggestServiceUrlOptions.serviceUrl,"/api/v4/typeahead/",encodeURIComponent(e),"?callback=?"].join("")},e.ESS_ABACUS_IDS=[],e}();t.RequestGenerator=r,t.overrideJQuery=i}),define("typeahead/core/SearchParametersUpdater",["require","exports","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(e,t,n,o,i){"use strict";function r(e,t,r){var a=$("#"+t),s="";if(a.length>0){if(e)if(_.isFunction(e[r])){var u=e[r]();u.isPresent()&&(s=u.get())}else i["default"].log(new Error(""+r+" is not a method of Suggestion"),o.Severity.MustFix,n.ProblemOrigin.UniversalTypeahead);a.val(s),l(e,a)}}function a(e,t,n,o){var i=$("#"+n);t&&t.getSearchName().isPresent()?(i.val(t.getSearchName().get()),c(i),u(o,n)):(u(n,o),i.val("")),l(t,i)}function s(e){var t=$("input[id$=search_name][data-gcw-storeable-name=gcw-destination]");if(1===t.length&&e!==t.attr("id")){var n=t.parent().find("input[data-provide=utypeahead]");a(void 0,void 0,t.attr("id"),n.attr("id"))}}function l(e,t){e&&!e.shouldTriggerDomElementChangeOnSelection()||t.trigger("change")}function u(e,t){var n=$("#"+e),o=$("#"+t);n.length&&o.length&&!o.attr("data-gcw-storeable-name")&&(o.attr("name",n.attr("name")),o.attr("data-gcw-storeable-name",n.attr("data-gcw-storeable-name")),o.data("gcw-storeable-name",n.data("gcw-storeable-name")),o.addClass("gcw-storeable"),c(n))}function c(e){e.removeAttr("name"),e.removeAttr("data-gcw-storeable-name"),e.removeData("gcw-storeable-name"),e.removeClass("gcw-storeable")}function p(e,t){e&&e.getExtraSearchParams().isPresent()?d(e.getExtraSearchParams().get(),t):g(t)}function d(e,t){e.forEach(function(e){var n=$("<input>",{type:"hidden","class":"uta-extra-search-param"});n.attr("name",e.field),n.attr("value",e.value),n.appendTo($("#"+t).parents("form:visible"))})}function g(e){$(".uta-extra-search-param").remove()}function h(e,t,n,o){for(var i in f)f.hasOwnProperty(i)&&r(t,n[i],f[i]);a(e,t,n.search_name_element,o),s(n.search_name_element),p(t,o)}t.__esModule=!0;var f={airport_code_element:"getTla",category_element:"getCategory",city_element:"getCity",country_code_element:"getCountryIsoCode2",heds_element:"getIsHeds",hotel_id_element:"getHotelId",lat_long_element:"getLatLong",point_of_supply_element:"getPointOfSupply",region_id_element:"getRegionId",region_type_element:"getType",station_code_element:"getStationCode",ta_element:"getSuggestionData"};t.updateForSuggestion=h}),define("typeahead/core/StripingConfiguration",["require","exports"],function(e,t){"use strict";function n(e){return e&&e.length?e.map(function(e){return e.experiment}).filter(function(e){return!!e}):[]}t.__esModule=!0,t.getExperiments=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/SuggestServiceParamModifier",["require","exports","typeahead/core/ConfigurableFeature","typeahead/core/plugins/ExecutionHelper"],function(e,t,n,o){"use strict";t.__esModule=!0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.modifyParameters=function(e,t,n){var i=this,r=$.Deferred();return this.shouldOverride(n).done(function(o){o&&i.modify(e,t,n),r.resolve(e)}).fail(function(){i.precondition(e,t,n)?o.shouldExecute(t,i.configuration).done(function(o){o&&i.modify(e,t,n),r.resolve(e)}):r.resolve(e)}),r.promise()},t.prototype.addFeatureFlag=function(e,t){e.features=e.features&&e.features.length&&e.features.push?e.features||[]:[],e.features.indexOf(t)<0&&e.features.push(t)},t.prototype.addRegionType=function(e,t){e.mask|=t},t.prototype.precondition=function(e,t,n){return"undefined"!=typeof e},t}(n.ConfigurableFeature);t.SuggestServiceParamModifier=i}),define("typeahead/core/Suggestion",["require","exports","typeahead/core/util/Optional"],function(e,t,n){"use strict";t.__esModule=!0;var o;!function(e){e[e.GEOLOCATION=0]="GEOLOCATION",e[e.USERHISTORY=1]="USERHISTORY",e[e.FLIGHTSBOOKING=2]="FLIGHTSBOOKING",e[e.GOOGLEMAPS=3]="GOOGLEMAPS"}(o=t.SuggestionCategory||(t.SuggestionCategory={}));var i=function(){function e(e,t){void 0===t&&(t=!1),this.data=e,this.hasChild=t}return e.prototype.getSourceName=function(){return n.Optional.ofNullable(void 0)},e.prototype.getSourceId=function(){return n.Optional.ofNullable(void 0)},e.prototype.getRegionId=function(){return n.Optional.ofNullable(void 0)},e.prototype.getTla=function(){return n.Optional.ofNullable(void 0)},e.prototype.getType=function(){return n.Optional.ofNullable(this.data.type)},e.prototype.getRegionNames=function(){return n.Optional.ofNullable(this.data.regionNames)},e.prototype.getFullName=function(){return n.Optional.ofNullable(this.getRegionNames().orElse({}).fullName)},e.prototype.getLastSearchName=function(){return n.Optional.ofNullable(this.getRegionNames().orElse({}).lastSearchName)},e.prototype.getDisplayText=function(){return this.getLastSearchName().orElse("")},e.prototype.getIndex=function(){return parseInt(this.data.index,10)},e.prototype.getPosition=function(){return this.getIndex()+1},e.prototype.getSuggestionHierarchyType=function(){return n.Optional.of("parent")},e.prototype.getHierarchyCode=function(){var e="";return e="child"===this.getSuggestionHierarchyType().get()?"C":"parent"===this.getSuggestionHierarchyType().get()&&this.hasChild?"P":"D",e+"L#"+(isNaN(this.getPosition())?"-":this.getPosition())},e.prototype.getRelationInfo=function(){return n.Optional.of("-")},e.prototype.getHotelId=function(){return n.Optional.ofNullable(void 0)},e.prototype.getLatLong=function(){return n.Optional.ofNullable(this.data.coordinates?this.data.coordinates.lat+","+this.data.coordinates["long"]:void 0)},e.prototype.getTypeId=function(){return n.Optional.of("-")},e.prototype.getCity=function(){return n.Optional.ofNullable(void 0)},e.prototype.getMultiCity=function(){return n.Optional.ofNullable(void 0)},e.prototype.getSubType=function(){return n.Optional.ofNullable(void 0)},e.prototype.getHasChild=function(){return n.Optional.of(this.hasChild)},e.prototype.getCategory=function(){return n.Optional.ofNullable(this.data.category)},e.prototype.getStationCode=function(){return n.Optional.ofNullable(void 0)},e.prototype.getPointOfSupply=function(){return n.Optional.ofNullable(void 0)},e.prototype.getCountryName=function(){return n.Optional.ofNullable(void 0)},e.prototype.getCountryIsoCode2=function(){return n.Optional.ofNullable(void 0)},e.prototype.getCountryIsoCode3=function(){return n.Optional.ofNullable(void 0)},e.prototype.getIsHeds=function(){return n.Optional.empty()},e.prototype.isAddrAutoComplete=function(){return!1},e.prototype.getExtraSearchParams=function(){return n.Optional.ofNullable(void 0)},e.prototype.getSearchName=function(){return"hotelfilter"===this.getRelationInfo().orElse("")?this.getFullName():n.Optional.ofNullable(void 0)},e.prototype.getRedirectPath=function(){return n.Optional.ofNullable(void 0)},e.prototype.getConcepts=function(){return n.Optional.ofNullable(void 0)},e.prototype.getSuggestionData=function(){return n.Optional.of(JSON.stringify({airportCode:this.getTla().orElse(void 0),category:this.getCategory().orElse(void 0),city:this.getCity().orElse(void 0),concepts:this.getConcepts().orElse(void 0),coordinates:this.data.coordinates,countryCode:this.getCountryIsoCode2().orElse(void 0),extraSearchParams:this.getExtraSearchParams().orElse(void 0),fullName:this.getFullName().orElse(void 0),heds:this.getIsHeds().orElse(void 0),hotelId:this.getHotelId().orElse(void 0),pointOfSupply:this.getPointOfSupply().orElse(void 0),redirectPath:this.getRedirectPath().orElse(void 0),regionId:this.getRegionId().orElse(void 0),regionType:this.getType().orElse(void 0),stationCode:this.getStationCode().orElse(void 0)}))},e}();t.Suggestion=i}),define("typeahead/core/SuggestionFactory",["require","exports","typeahead/core/EssSuggestion","typeahead/core/geolocation/GeolocationSuggestion","typeahead/core/google/GoogleMapsSuggestion","typeahead/core/Suggestion"],function(e,t,n,o,i,r){"use strict";function a(e,t){return void 0===t&&(t=!1),r.SuggestionCategory[r.SuggestionCategory.GEOLOCATION]===e.category?new o.GeolocationSuggestion(e):r.SuggestionCategory[r.SuggestionCategory.GOOGLEMAPS]===e.category?new i.GoogleMapsSuggestion(e):new n.EssSuggestion(e,t)}t.__esModule=!0,t.createSuggestion=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/SuggestionModifier",["require","exports","typeahead/core/ConfigurableFeature","typeahead/core/plugins/ExecutionHelper"],function(e,t,n,o){"use strict";t.__esModule=!0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.modifySuggestions=function(e,t,n){var i=this,r=$.Deferred();return this.shouldOverride(n).done(function(n){n&&i.modify(e,t),r.resolve(e)}).fail(function(){i.precondition(e,t)?o.shouldExecute(t,i.configuration).done(function(n){n&&i.modify(e,t),r.resolve(e)}):r.resolve(e)}),r.promise()},t.prototype.precondition=function(e,t){return e&&e.length>0},t}(n.ConfigurableFeature);t.SuggestionModifier=i}),define("typeahead/core/SuggestionsAggregator",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n;!function(e){e[e.CurrentLocationSuggester=0]="CurrentLocationSuggester",e[e.EssOnFocusPersonalizedSuggester=1]="EssOnFocusPersonalizedSuggester",e[e.OnFocusSuggester=2]="OnFocusSuggester"}(n=t.SuggesterId||(t.SuggesterId={}));var o=function(){function e(e){this.suggesters=e,this.suggesterConfig=(t={},t[n.CurrentLocationSuggester]=this.getCurrentLocationSuggesterConfig(),t[n.EssOnFocusPersonalizedSuggester]=this.getEssOnFocusPersonalizedSuggesterConfig(),t),this.emptySuggesterResponse={id:this.getId(),results:[]};var t}return e.prototype.suggest=function(e,t){var n=$.Deferred(),o=this,i=function(){var e=Array.prototype.slice.call(arguments);n.resolve(o.aggregate(e))};if(this.suggesters&&this.suggesters.length){var r=this.suggesters.map(function(n){return n.suggest(e,t)});$.when.apply($,r).done(i)}else n.resolve(this.emptySuggesterResponse);return n.promise()},e.prototype.getMaxResults=function(){return 10},e.prototype.getSuggesterConfig=function(t){return this.suggesterConfig[t.id]?this.suggesterConfig[t.id]:{rank:e.LOWEST_RANK,isEnabled:!1}},e.prototype.aggregate=function(e){return e&&(e=this.filter(e),this.sort(e)),{id:this.getId(),results:this.getAggregatedSuggestionResults(e)}},e.prototype.filter=function(e){var t=this;return e?e.filter(function(e){return t.getSuggesterConfig(e).isEnabled}):e},e.prototype.sort=function(e){var t=this;e&&e.sort(function(e,n){return t.getSuggesterConfig(e).rank-t.getSuggesterConfig(n).rank})},e.prototype.getAggregatedSuggestionResults=function(e){var t=[];if(e){e.forEach(function(e){Array.prototype.push.apply(t,e.results)}),t=t.slice(0,this.getMaxResults());for(var n=0;n<t.length;n++)t[n].index=n+""}return t},e.LOWEST_RANK=999,e}();t.SuggestionsAggregator=o});var __assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};define("typeahead/core/TypeaheadUtils",["require","exports","underscore","typeahead/core/loc","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(e,t,n,o,i,r,a){"use strict";t.__esModule=!0;var s;!function(e){e[e.OneWay=0]="OneWay",e[e.RoundTrip=1]="RoundTrip",e[e.MultiDestination=2]="MultiDestination",e[e.Unknown=3]="Unknown"}(s=t.FlightType||(t.FlightType={}));var l;!function(e){e[e.Flight=0]="Flight",e[e.Hotel=1]="Hotel",e[e.Package=2]="Package",e[e.Car=3]="Car",e[e.Cruise=4]="Cruise",e[e.Activity=5]="Activity",e[e.Rail=6]="Rail",e[e.VacationRental=7]="VacationRental",e[e.OpenSearch=8]="OpenSearch",e[e.Unknown=9]="Unknown"}(l=t.Lob||(t.Lob={}));var u;!function(e){e[e.FlightHotel=0]="FlightHotel",e[e.FlightHotelCar=1]="FlightHotelCar",e[e.FlightCar=2]="FlightCar",e[e.HotelCar=3]="HotelCar",e[e.Unknown=4]="Unknown"}(u=t.PackageType||(t.PackageType={}));var c;!function(e){e[e.OneWay=0]="OneWay",e[e.RoundTrip=1]="RoundTrip",e[e.Unknown=2]="Unknown"}(c=t.RailType||(t.RailType={}));var p;!function(e){e[e.eapid=0]="eapid",e[e.tpid=1]="tpid"}(p=t.SiteParam||(t.SiteParam={})),t.MercuryWizardLandingPagesPackageTypes=["packageFlightHotel","flightHotel","packageFlightHotelCar","flightHotelCar","carHotelFlight","packageFlightCar","flightCar","carFlight","packageHotelCar","hotelCar","carHotel"];var d=function(){function n(){}return n.getCookie=function(e){var t="; "+document.cookie,n=t.split("; "+e+"=");if(2===n.length){var o=n.pop().split(";").shift();return o}return""},n.getGuid=function(){var t=window.dctk&&window.dctk.logging?window.dctk.logging.guid:void 0;if(void 0===t&&(t=window.utag_data?window.utag_data.guid:void 0),void 0===t)try{e(["gc/pageModel"],function(e){e&&e.user&&(t=e.user.guid)})}catch(n){}if(void 0===t){var o=this.getCookie("MC1"),s=o&&o.split("=");t=$.isArray(s)&&2===s.length?s[1]:""}return void 0===t?a["default"].log(new Error("ERROR: Unable to get 'guid'"),r.Severity.MustFix,i.ProblemOrigin.ClientOfUniversalTypeahead):t=t.replace(/-/g,""),t},n.getSiteParamValue=function(t){var n=void 0,o={eapid:{cookieName:"iEAPID"},tpid:{cookieName:"tpid"}},s=p[t];if(window.utag_data&&window.utag_data.context&&window.utag_data.context.site&&void 0!==window.utag_data.context.site[s])n=window.utag_data.context.site[s];else try{e(["gc/pageModel"],function(e){e&&e.site&&void 0!==e.site[s]&&(n=e.site[s])})}catch(l){}if(void 0===n){var u=this.getCookie(o[s].cookieName);if(void 0!==u){var c=u.split(",");n=parseInt(c.length>1?c[1]:c[0],10)}}return("number"!=typeof n||isNaN(n))&&a["default"].log(new Error("Unable to get "+s+" from utag_data/cookies/gcPageModel"),r.Severity.Excusable,i.ProblemOrigin.ClientOfUniversalTypeahead),n},n.getPointOfSale=function(){return window.location.hostname},n.getLocale=function(){return window.locale},n.getSiteId=function(){return void 0===window.site_id&&void 0!==window.sitebrand?window.sitebrand.siteid:window.site_id},n.getPageId=function(){var e=$("#pageId").val();return e||(e=""),e},n.getDeviceType=function(){return n.deviceType||(n.deviceType=window.utag_data?window.utag_data.device_type:n.evaluateDeviceType()),n.deviceType},n.getBrowser=function(){var e=window.utag_data&&window.utag_data.context&&window.utag_data.context.clientInfo&&window.utag_data.context.clientInfo.deviceCharacteristics?window.utag_data.context.clientInfo.deviceCharacteristics.mobileBrowser:void 0;return e||(e=n.evaluateBrowserName()),e},n.getClientId=function(){var e=$("input[data-provide=utypeahead]").data("clientId");if(e||(e=$("meta[name=essClientId]").attr("content")),!e){var t=n.defaultPageIdGetter();t&&(e=n.clientIdByPageId[t])}return e||(e=n.clientIdByPath[window.location.pathname]),e||(a["default"].log(new Error("Could not determine client id"),r.Severity.Excusable,i.ProblemOrigin.UniversalTypeahead),e=n.TEST_CLIENT_ID),e?e:"Unknown"},n.setClientId=function(e){n.TEST_CLIENT_ID=e},n.isStorefrontClient=function(){var e=["Homepage","AWSHomepage","LXLandingPage","CarsLandingPage","FlightsLandingPage","HotelsLandingPage","PackageLandingPage","RailsLandingPage"];return e.indexOf(n.getClientId())>-1},n.getLob=function(){if("OpenSearchPage"===n.getClientId())return l.OpenSearch;var e=$("div.wizard-tabs").find("button.on").data("lob");if(e=e?e:$("input[data-provide=utypeahead]:visible").data("lob"),e=e?e:n.LOB_ATTRIBUTE.TEST,"string"==typeof e){if(e=e.toLowerCase(),e.indexOf("pack")>-1||t.MercuryWizardLandingPagesPackageTypes.map(function(e){return e.toLowerCase()}).indexOf(e)>-1)return l.Package;if(e.indexOf("flight")>-1)return l.Flight;if(e.indexOf("hotel")>-1)return l.Hotel;if(e.indexOf("vacationrental")>-1)return l.VacationRental;if(e.indexOf("car")>-1)return l.Car;if(e.indexOf("cru")>-1)return l.Cruise;if(e.indexOf("lx")>-1||e.indexOf("activit")>-1)return l.Activity;if(e.indexOf("train")>-1||e.indexOf("rail")>-1)return l.Rail;if(e.indexOf("open")>-1)return l.OpenSearch}return l.Unknown},n.setLob=function(e){n.LOB_ATTRIBUTE.TEST=e},n.getFlightType=function(e){if(e===l.Flight){var t=$("input[name=route-type], input[name=flight-type]").filter(":checked:visible").attr("id");if(t=t?t:n.TEST_FLIGHT_TYPE_ID){if(t=t.toLowerCase(),t.indexOf("one")>-1)return s.OneWay;if(t.indexOf("round")>-1)return s.RoundTrip;if(t.indexOf("multi")>-1)return s.MultiDestination;a["default"].log(new Error("Could not determine flight type with dom element id - "+t),r.Severity.Excusable,i.ProblemOrigin.ClientOfUniversalTypeahead)}}return s.Unknown},n.setFlightElementId=function(e){n.TEST_FLIGHT_TYPE_ID=e},n.getRailType=function(e){if(e===l.Rail){var t=$("input[name=journeyType]").filter(":checked").attr("id");if(t=t?t:n.TEST_RAIL_TYPE_ID){if(t=t.toLowerCase(),t.indexOf("one")>-1)return c.OneWay;if(t.indexOf("round")>-1)return c.RoundTrip;a["default"].log(new Error("Could not determine rail journey type with dom element id - "+t),r.Severity.MustFix,i.ProblemOrigin.ClientOfUniversalTypeahead)}a["default"].log(new Error("Unable to find journeyType dom element to determine rail journey type"),r.Severity.MustFix,i.ProblemOrigin.ClientOfUniversalTypeahead)}return c.Unknown},n.setRailTypeId=function(e){n.TEST_RAIL_TYPE_ID=e},n.getPackageType=function(){var e=$("input[name=package-lob], input[name=package-type]").filter(":visible:checked").attr("value");if(e=e||n.TEST_PACKAGE_TYPE_VALUE){if(e=e.toLowerCase(),e.indexOf("flight-hotel-car")>-1)return u.FlightHotelCar;if(e.indexOf("flight-hotel")>-1)return u.FlightHotel;if(e.indexOf("flight-car")>-1)return u.FlightCar;if(e.indexOf("hotel-car")>-1)return u.HotelCar}var t=$("div.wizard-tabs").find("button.on").data("lob");if(t)switch(t){case"packageFlightHotel":case"flightHotel":return u.FlightHotel;case"packageFlightHotelCar":case"flightHotelCar":case"carHotelFlight":return u.FlightHotelCar;case"packageFlightCar":case"flightCar":case"carFlight":return u.FlightCar;case"packageHotelCar":case"hotelCar":case"carHotel":return u.HotelCar;default:return u.Unknown}return u.Unknown},n.getShortPackageType=function(){var e=n.getPackageType();switch(e){case u.FlightCar:return"FC";case u.FlightHotel:return"FH";case u.FlightHotelCar:return"FHC";case u.HotelCar:return"HC";default:return}},n.setPackageTypeValue=function(e){n.TEST_PACKAGE_TYPE_VALUE=e},n.submitToOmniture=function(t,n){e(["dctk/dctk"],function(e){n&&e.addExperiments(n),e.trackEvent("o","wizard-submit",t,t.eventString)})},n.getClientSideExperimentVariants=function(){return n.clientSideExperimentVariants||e(["dctk/dctk"],function(e){n.clientSideExperimentVariants=e.omtr?e.omtr.list1:""}),n.clientSideExperimentVariants},n.isWithinMobileBreakpoint=function(){return uitk&&uitk.mediaquery&&uitk.mediaquery.getMediaQueries()&&uitk.mediaquery.getMediaQueries().mobile&&uitk.mediaquery.getMediaQueries().mobile.matches},n.isTouchDevice=function(){return Modernizr&&Modernizr.touch},n.getExpUserId=function(){var t=$("#scratchpad-badge-expuserid").attr("data-id");return t||e(["gc/pageModel"],function(e){t=e.user?e.user.expUserId:void 0}),t||"-1"},n.iconOverride=function(e,t){var n=__assign({},e);return n.icon=t,n},n.getOverrideIcon=function(e,t){return"string"==typeof t&&(e=e+"|"+t),n.categoryIconOverrides[e]},n.evaluateDeviceType=function(){return/iPad|Transformer|ME173X|KOOF|Nook|IMM76D|Nexus 10|Nexus 7|Tablet/i.test(navigator.userAgent)||/HP Slate|PG09410|PG41200|Mediapad|Kindle|Tab|Xoom|TegraNote|SCH-I800/i.test(navigator.userAgent)?"Tablet":/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop"},n.evaluateBrowserName=function(){
var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE"):"Chrome"===n[1]&&(e=t.match(/\bOPR\/(\d+)/),null!=e)?"Opera":(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],e=t.match(/version\/(\d+)/i),null!=e&&n.splice(1,1,e[1]),n[0])},n.defaultPageIdGetter=function(){if(window.xPageId)return window.xPageId;var e=$("#pageId"),t=1===e.size()?e.val():"";return!t&&window.pageName&&(t=n.clientIdByPageName[window.pageName]),t||(t=window.dctk&&window.dctk.logging?window.dctk.logging.pageName:""),t?t:""},n.responsiveTAClasses={autoCompleteClass:"autocomplete",centerClass:"pin-center",dropdownClass:"autocomplete-dropdown",hlClass:"highlight",leftClass:"pin-left",openClass:"autocomplete-open",rightClass:"pin-right"},n.bitMaskFlags={ADDRESS:32,AIRPORT:1,CITY:2,HOTEL:128,METROCODE:64,METROSTATION:1024,MULTICITY:4,MULTIREGION:256,NEIGHBORHOOD:8,POI:16,TRAINSTATION:512},n.defaultMask=n.bitMaskFlags.AIRPORT|n.bitMaskFlags.CITY|n.bitMaskFlags.MULTICITY|n.bitMaskFlags.NEIGHBORHOOD|n.bitMaskFlags.POI,n.LOB_ATTRIBUTE={ACTIVITIES:"ACTIVITIES",CARS:"CARS",FLIGHTS:"FLIGHTS",HOTELS:"HOTELS",PACKAGES:"PACKAGES",RAILS:"RAILS",TEST:"",VACATIONRENTALS:"VACATIONRENTALS"},n.CATEGORIES={ADDRESS:{icon:"location",id:4,name:o.taCategoryNameAddress},AIRPORT:{icon:"flights",id:2,name:o.taCategoryNameAirports},AMENITY:{icon:"tag",id:14,name:o.taCategoryNameAmenities},ATTRACTION:{icon:"location",id:1,name:o.taCategoryNameAttractions},BESTFILTER:{icon:"search",id:17},CITY:{icon:"location",id:0,name:o.taCategoryNameRegionCity},DEALS:{icon:"location",id:13,name:o.taCategoryNameDeals},GEOLOCATION:{icon:"geolocation",id:16,name:void 0},HOTEL:{icon:"hotels",id:3,name:o.taCategoryNameHotels},METROCODE:{icon:"flights",id:9,name:o.taCategoryNameAirports},METROSTATION:{icon:"train",id:6,name:o.taCategoryNameMetros},MULTICITY:{icon:"location",id:7,name:o.taCategoryNameRegionCity},NEIGHBORHOOD:{icon:"location",id:8,name:o.taCategoryNameRegionCity},POI:{icon:"location",id:11,name:o.taCategoryNameAttractions},RENTAL:{icon:"cars",id:12,name:o.taCategoryNameRentals},TRAINSTATION:{icon:"train",id:5,name:o.taCategoryNameTrains},USERHISTORY:{icon:"notime",id:15,name:o.taCategoryNameRecentSearch}},n.categoryIconOverrides={"ADDRESS|RENTALLOCATION":n.CATEGORIES.RENTAL.icon,"NEIGHBORHOOD|AIRNBH":"flights"},n.TEST_CLIENT_ID="Unknown",n.TEST_FLIGHT_TYPE_ID="Unknown",n.TEST_PACKAGE_TYPE_VALUE="Unknown",n.TEST_RAIL_TYPE_ID="Unknown",n.clientSideExperimentVariants="",n.clientIdByPageId={Homepage:"Homepage",aws_Homepage:"AWSHomepage","page.Activities":"LXLandingPage","page.Cars":"CarsLandingPage","page.Flight-Search-Oneway":"Flights.Search","page.Flight-Search-Roundtrip.Out":"Flights.Search","page.Flight-Search.MDest":"Flights.Search","page.Flights":"FlightsLandingPage","page.Hotel-Search":"Hotels.Search","page.Hotels":"HotelsLandingPage","page.Hotels.Search":"Hotels.Search","page.Packages":"PackageLandingPage","page.Rails":"RailsLandingPage","page.car.search.list.aws":"Cars.Search","page.open-search":"OpenSearchPage"},n.clientIdByPageName={activity:"LXLandingPage",aws_Homepage:"AWSHomepage",car:"CarsLandingPage",flight:"FlightsLandingPage",homepage:"Homepage",hotel:"HotelsLandingPage","package":"PackageLandingPage"},n.clientIdByPath={"/":"Homepage","/Activities":"LXLandingPage","/Cars":"CarsLandingPage","/Flights":"FlightsLandingPage","/Flights-Search":"Flights.Search","/Holidays":"PackageLandingPage","/Hotel-Search":"Hotels.Search","/Hotels":"HotelsLandingPage","/Vacation-Packages":"PackageLandingPage","/search-results":"OpenSearchPage","/trains":"RailsLandingPage"},n}();t.TypeaheadUtils=d}),define("typeahead/core/abTest",["require","exports","jquery","uitk","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/plugins/DefaultPluginAssembly","typeahead/core/TypeaheadUtils"],function(e,t,n,o,i,r,a,s,l){"use strict";function u(t){var o=n.Deferred();if(t){var i,r=!1;M[t]&&(i=M[t],r=!0),r?o.resolve(i):_.hasOwnProperty(t)&&"undefined"!=typeof _[t]?_[t].push(o):(_[t]=[o],e(["dctk/dctk"],function(e){e.evaluateExperiment(v(t,!1,function(e){e.error?(i=new O(t,(void 0),(void 0)),M[i.name]=i,T(new O(t),!m(e,t))):(e.id&&(i=new O(t,e.id,e.value),M[i.name]=i),T(i,!0))}))}))}else o.reject(new O("experiment name must be provided"));return o.promise()}function c(t){return t?(x.indexOf(t)<0&&(!M[t]||void 0!==M[t].value)&&(x.push(t),e(["dctk/dctk"],function(e){e.evaluateExperimentAndLog(v(t,!0,void 0))})),u(t)):(a["default"].log(new Error("Experiment name missing when calling 'getAndLog'"),r.Severity.MustFix,i.ProblemOrigin.UniversalTypeahead),n.Deferred().reject().promise())}function p(e){g(d(e.get(s.DefaultPluginAssembly.experimentIdentifier)))}function d(e){var t=[],n=function(e){t.indexOf(e.name)<0&&t.push(e.name)},o=function(e){var t=e.getExperiments();t&&t.length&&t.forEach(n)};return e&&e.length&&e.forEach(o),t}function g(e){e&&e.length&&n.ajax({contentType:"application/json; charset=UTF-8",data:JSON.stringify(S(e)),dataType:"json",type:"POST",url:"/api/bucketing/v1/evaluateExperiments"}).done(function(e){e&&e.evaluatedExperiments&&e.evaluatedExperiments.length&&e.evaluatedExperiments.forEach(function(e){M[e.name]=new O(e.name,e.id,e.message?void 0:e.value)})}).fail(function(){a["default"].log(new Error("Unable to call abacus api to evaluate experiments at page load"),r.Severity.Excusable,i.ProblemOrigin.UniversalTypeahead)})}function h(e,t){var n=[e,"0",t].join("|"),o=I.readItem("abov"),i=n;if(o){i=o;var r=e+"",a=i.indexOf(r+"|");if(a>=0){var s=new RegExp(r+"\\|[0-9]+\\|[0-9]+");i=i.replace(s,n)}else i+=":"+n}I.saveItem("abov",i)}function f(){return C?C:void 0}function y(e,t){M.hasOwnProperty(e)?M[e].value=t:M[e]={id:-1,name:e,value:t}}function m(e,t,n){var o=!0;if(e&&e.error){var i=void 0,s=w.filter(function(t){var n="string"==typeof e.error?e.error:e.error.toString();return n.indexOf(t.id)>-1});i=s&&s.length>0?s[0]:P,i.severity!==r.Severity.Negligible?a["default"].log(new Error("Error evaluating experiment ["+t+"]: "+e.error+(n?", addition: "+n:"")),i.severity,i.problemOrigin):o=!1}return o}function v(e,t,n){var o={callback:n,eapid:l.TypeaheadUtils.getSiteParamValue(l.SiteParam.eapid),guid:l.TypeaheadUtils.getGuid(),logToOmniture:t,name:e,overrides:f(),tpid:l.TypeaheadUtils.getSiteParamValue(l.SiteParam.tpid)};return o}function S(e){return{eapid:l.TypeaheadUtils.getSiteParamValue(l.SiteParam.eapid),guid:l.TypeaheadUtils.getGuid(),name:e,overrides:f(),tpid:l.TypeaheadUtils.getSiteParamValue(l.SiteParam.tpid),verbose:!0}}function T(e,t){var n=e?e.name||"":"";if(_.hasOwnProperty(n)&&"undefined"!=typeof _[n]){for(;_[n].length;){var o=_[n].shift();t?o.resolve(e):o.reject(e)}_[n]=void 0}}function b(){for(var e="",t=0;t<x.length;t++)M[x[t]]&&M[x[t]].id&&(e+=M[x[t]].id+"."+M[x[t]].value+"|");return e?e.slice(0,-1):e}function E(){M={},x=[],_={}}t.__esModule=!0;var I=o.createBrowserStorage?o.createBrowserStorage("persistentCookies"):void 0,C=l.TypeaheadUtils.getCookie("abov"),M={},x=[],_={};t.getAndLog=c,t.evaluateAllExperiments=p,t.override=h,t.getCookieValue=f,t._mockExperimentWithBucket=y;var O=function(){function e(e,t,n){this.name=e,this.id=t,this.value=n}return e}();t.UtaExperiment=O;var P={id:2e3,problemOrigin:i.ProblemOrigin.DataCaptureToolkit,severity:r.Severity.Excusable},w=[P,{id:5e4,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Excusable},{id:50001,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Excusable},{id:50002,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Excusable},{id:50003,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Negligible},{id:50004,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Excusable},{id:50100,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Excusable},{id:50101,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Excusable},{id:50102,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Excusable},{id:50103,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Excusable},{id:50104,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Excusable},{id:70001,problemOrigin:i.ProblemOrigin.DataCaptureToolkit,severity:r.Severity.Excusable},{id:70002,problemOrigin:i.ProblemOrigin.DataCaptureToolkit,severity:r.Severity.Excusable},{id:8e3,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Excusable},{id:4301,problemOrigin:i.ProblemOrigin.UniversalTypeahead,severity:r.Severity.Negligible}];t.getActiveClientTests=b,t.resetCache=E});var utaScriptLoadingStartedTimestamp=Date.now();if(require("universalTypeahead",function(e){window.utaModuleReadyTimeStamp=Date.now(),e.handlePageLoad();var t="[data-provide=utypeahead]";$("body").on("focus.typeahead input.typeahead change.typeahead",t,function(t,n){var o,i,r,a,s=$(this);s.attr("data-typeahead")||(o="#"+s.attr("id"),i=s.data("template"),r=s.data("jsTheme"),a=s.data(),_.isString(i)&&_.isString(r)||console&&console.trace&&console.trace("The data-template and data-js-theme attributes are required in combination with data-provide in order to attach a typeahead instance to an element. (according to UITK documentation) See: http://uitoolkit.sb.karmalab.net/uitoolkit-current/docs/components/interactive/type-ahead"),e.initTA(o,i,a),s.attr("data-typeahead","uTA-attached"))})}),require(["typeahead/core/presentation/SvgIcons"],function(e){e.SvgIcons.init()}),require(["typeahead/core/context","jquery"],function(e,t){t.getJSON(e.serviceUrl+"/api/v4/ping?callback=?")}),define&&define.amd)try{define("require",function(){return require})}catch(e){}define("typeahead/core/handlebarHelpers",["require","exports","handlebars","typeahead/core/geolocation/GeolocationIcon"],function(e,t,n,o){"use strict";t.__esModule=!0,n["default"].registerHelper("each_with_key",function(e,t){var n,o,i="",r=t.hash.key;for(o in e)e.hasOwnProperty(o)&&(n=e[o],r&&(n[r]=o),i+=t.fn(n));return i}),n["default"].registerHelper("createListItem",function(e){function t(){var t=e.regionNames.displayName,n=e,o=n.hierarchyInfo&&n.hierarchyInfo.nearby?n.hierarchyInfo.nearby.distInMI:void 0;return o&&(t=t+" ("+Math.round(o)+" miles away)"),t}function n(){var t;return t=e.showAsHierarchy?'<span data-tid="typeahead-icon'+parseInt(e.index,10)+'" class="icon" aria-hidden="true">\n                <svg class="uitk-icon-svg">\n                    <use xlink:href="#uitk-icon-return"/>\n                </svg></span>':"geolocation"===e.icon?'<span data-tid="typeahead-icon'+e.index+'" class="" aria-hidden="true"><img alt="" style="height:1em;width:1em;vertical-align:middle;margin-right:0.8em;" src=\''+o.locationIcon+"'/></span>":"none"===e.icon?'<span data-tid="typeahead-icon'+e.index+'" aria-hidden="true"/>':'<span data-tid="typeahead-icon'+e.index+'" class="icon" aria-hidden="true">\n                    <svg class="uitk-icon-svg">\n                        <use xlink:href="#uitk-icon-'+e.icon+'"/>\n                    </svg>\n                    </span>'}function i(e,t,n){var o="<div class='multiLineDisplay'>";return o+=e.trim(),t&&(o+=t.trim()),n&&(o+="<br>"+n.trim()),o+="</div>"}function r(e){var t,n,o="",r="",a="",s=e.indexOf("("),l=e.indexOf(")");if(s!==-1&&l!==-1){o=e.substring(0,s),r=e.substring(s+1,l);var u=r.indexOf("-");u!==-1?(t=r.substring(0,u).replace(/&nbsp;/i,"").trim(),n=r.substring(u+1,r.length)):(t=r,n=""),r="(<B>"+t+"</B>)"+n,l+1<e.length&&(a=e.substring(l+1,e.length))}else o=e;return i(o,a,r)}function a(e){var t=e.indexOf("-");if(t!==-1){var n=e.substring(0,t).replace(/&nbsp;/i,"").trim(),o=e.substring(t+1,e.length);return"(<B>"+n+"</B>)"+o}return e}function s(){return $("li.tab:visible").children("button.on").data("lob")}function l(t){return"flight"===s()?e.showAsHierarchy?a(t):r(t):t}var u=n(),c=e.regionNames.displayName;e.showAsHierarchy&&(c=t());var p=u+l(c);return e.showAsHierarchy?'<div class="child-suggestion" style="padding-left:'+("none"===e.icon?"12px":"1.88235em")+'; width: 100%;">'+p+"</div>":p})}),require(["jquery","uitk_i18n","handlebars"],function(e,t,n){var o=n["default"];return o.registerHelper("i18nJs",function(arguments){return arguments.length>1&&(t.locale=arguments[0]),""}),o.registerHelper("i18n",function(){for(var e=arguments[0],n={},o=arguments.length-1,i=arguments[o],r=1;r<o;r++)n["arg"+(r-1)]=arguments[r];return n.locale=i.hash.locale,t.t(e,n)}),o.registerHelper("compress",function(e){var t=e.fn(this);return t=t.replace(/>\s+</g,"><")}),o.registerHelper("compare",function(t,n,o){var i,r=e("#typeahead-categorized").attr("data-locale"),a="en_US";if("undefined"!=typeof r?a=r:(i=e("html").attr("data-language"),"undefined"!=typeof i&&(a=i)),"undefined"!=typeof a?n="en-US"!==a&&"en"!=a&&"EN"!=a&&"en-us"!=a&&"en_us"!=a&&"en_US"!=a&&t==n?"this will evaluate to false":t:(n="true",t="true"),arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");operator=o.hash.operator||"==";var s={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"typeof":function(e,t){return typeof e==t}};if(!s[operator])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+operator);var l=s[operator](t,n);return l?o.fn(this):o.inverse(this)}),o.registerHelper("category",function(n){var o,i,r=["Airports","Region/City","Attractions","Hotels","Address","Train Station","Metro Station"],a=["airport","city","attraction","hotel","address","trainstation","metrostation"],s="",l=e("#typeahead-categorized").attr("data-locale"),u="en_US";return"undefined"!=typeof l?u=l:(i=e("html").attr("data-language"),"undefined"!=typeof i&&(u=i)),o=e.inArray(n,r),s="undefined"!=typeof u&&"en-US"!=u&&"en"!=u&&"EN"!=u&&"en-us"!=u&&"en_us"!=u&&"en_US"!=u&&o!=-1?t.t(a[o]):n}),o}),function(e){e.prototype.indexOf||(e.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),i=o.length>>>0;if(0===i)return-1;var r=+t||0;if(Math.abs(r)===1/0&&(r=0),r>=i)return-1;for(n=Math.max(r>=0?r:i-Math.abs(r),0);n<i;){if(n in o&&o[n]===e)return n;n++}return-1})}(Array),define("universalTypeahead",["require","exports","jquery","handlebars","underscore","uitk","uitk_i18n","hammer","typeahead/core/loc","typeahead/core/context","typeahead/client/ClientHandlerRegistry","typeahead/core/ConfigurableFeature","typeahead/core/EssDataProvider","typeahead/core/ExpediaSuggestServiceRequestGenerator","typeahead/core/google/GoogleMapsDataProvider","typeahead/core/IMinQueryLengthOverrider","typeahead/core/logging/FlightOriginPopulationLogger","typeahead/core/logging/OmnitureLogger","typeahead/core/logging/PerformanceMetricsLogger","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/ScanabilityLogger","typeahead/core/logging/SelectionToSubmissionLogger","typeahead/core/logging/Severity","typeahead/core/logging/SuggestionEngagementLogger","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/InputClearedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionReadyMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage","typeahead/core/OnFocusSuggester","typeahead/core/plugins/CompositePageLoadHandler","typeahead/core/plugins/DefaultPluginAssembly","typeahead/core/plugins/SuggestionsProvider","typeahead/core/presentation/DisplayGroupHandler","typeahead/core/presentation/DropdownContentHandlersAssembly","typeahead/core/presentation/DropDownHideHandlersAssembly","typeahead/core/presentation/DropDownShowHandlersAssembly","typeahead/core/presentation/IInputElementFocusByHumanOrScriptHandler","typeahead/core/presentation/IInputElementFocusHandler","typeahead/core/SearchParametersUpdater","typeahead/core/SuggestionFactory","typeahead/core/TypeaheadUtils","typeahead/core/util/Functional","uitk_tooltip","uitk-ta-by-category.hbs","uitk-ta-default.hbs","typeahead/core/handlebarHelpers"],function(e,t,n,o,i,r,a,s,l,u,c,p,d,g,h,f,y,m,v,S,T,b,E,I,C,M,x,_,O,P,w,L,A,R,D,H,F,k,N,G,U,q,V,B,$,z,j){"use strict";function W(){Z.initOmnitureLogger(),setTimeout(function(){z.TypeaheadUtils.isStorefrontClient()?e(["gc/pageModel"],function(e){D.CompositePageLoadHandler.getInstance().handlePageLoad(Z.pluginAssembly)}):D.CompositePageLoadHandler.getInstance().handlePageLoad(Z.pluginAssembly)},0)}function Y(e,t,n){return new Z(e,t,n)}function Q(e){Z.pluginAssembly.registerPlugin(e)}t.__esModule=!0;var Z=function(){function e(t,a,c){var g=this;this.essDataProvider=new d.EssDataProvider,this.suggestionsProvider=new F.SuggestionsProvider(e.pluginAssembly),this.googleMapsDataProvider=new h.GoogleMapsDataProvider,this.defaultEssOptions={abtest:"",additionalDataSourceUrl:"",dest:!1,features:[],lob:z.TypeaheadUtils.LOB_ATTRIBUTE.FLIGHTS,locale:"en_US",mask:z.TypeaheadUtils.defaultMask,maxitems:20,maxresults:10,overrideDataRequest:null,overrideServiceUrl:"",serviceUrl:"//suggest.expedia.com",version:"v2"},this.defaultTAOptions={closetext:l.closetext,continuetext:l.continuetext,forceicon:!1,minchar:1,onInputBlur:null,onInputFocus:null,onItemSelected:null,onItemSelectionChanged:null,onPopupClosed:null,onPopupOpened:null,openDefaultTa:!1,playBackText:"",preRenderTransform:null,selectFirstElementByDefault:!0,tooltip:!0},this.defaultOptions=i.extend({},this.defaultTAOptions,this.defaultEssOptions),this.displayGroupHandler=new k.DisplayGroupHandler,this.dropdownContentHandlersAssembly=new N.DropdownContentHandlersAssembly(e.pluginAssembly),this.dropDownShowHandlersAssembly=new U.DropDownShowHandlersAssembly(e.pluginAssembly),this.dropDownHideHandlersAssembly=new G.DropDownHideHandlersAssembly(e.pluginAssembly),this.inputElementFocusByHumanOrScriptHandlers=e.pluginAssembly.get(q.isInputElementFocusByHumanOrScriptHandler),this.inputElementFocusHandlers=e.pluginAssembly.get(V.isInputElementFocusHandler),this.onFocusSuggester=new R.OnFocusSuggester(e.pluginAssembly.get(H.DefaultPluginAssembly.onFocusSuggestionsProviderIdentifier)),this.ESS_EXCEPTION_RESPONSE_CODES=["ZERO_RESULT_BY_EXCEPTION"],this.$input=n(t),this.$parent=this.$input.closest("."+z.TypeaheadUtils.responsiveTAClasses.autoCompleteClass),this.$label=this.$input.closest("label"),this.setPinClass(this.$parent),this.opts=n.extend(!0,{},this.defaultOptions,c,{browser:z.TypeaheadUtils.getBrowser(),device:z.TypeaheadUtils.getDeviceType(),guid:z.TypeaheadUtils.getGuid(),locale:u.locale,serviceUrl:u.serviceUrl,siteid:u.siteid}),this.requestGenerator=this.constructRequestGenerator(this.opts,e.pluginAssembly),this.opts.clientId||(this.opts.clientId=z.TypeaheadUtils.getClientId()),this.opts.packageType=z.TypeaheadUtils.getShortPackageType(),this.context=this.constructContext(this.opts),this.opts.featureOverrides=p.ConfigurableFeature.getFeatureOverrides(this.$input),this.ariaOwns=this.$input.attr("aria-owns")||"backwards",this.templateUsed=a,this.firstItemFlag=!0,this.lastItemFlag=!0,this.opts.rawHtml?this.template=o.compile(a):(this.template=this.getCompiledTemplate(a,null),this.template||(a=n(a).html(),this.template=o.compile(a))),this.searchType=null,this.cache={},this.ignoreNext=!1,this.isClickOn=!1,this.bodyClick=!1,this.$input.autocomplete="off",this.$input.on("focus",n.proxy(this.focus,this)).on("keydown",n.proxy(this.keyDown,this)).on("keyup",n.proxy(this.keyUp,this)).on("keypress",n.proxy(this.keyPress,this)).on("input",n.proxy(this.input,this)).on("blur",n.proxy(this.blur,this)),this.$popupContent=this.$input.closest("."+z.TypeaheadUtils.responsiveTAClasses.autoCompleteClass).children("."+z.TypeaheadUtils.responsiveTAClasses.dropdownClass),r.isTouchDevice&&new s(this.$popupContent[0]).on("tap",n.proxy(this.hammerTapHandler,this)),this.$input.data("typeahead",this),this.opts.openDefaultTa&&(this.shouldBeOpen=!0,this.dataRequest("defaultResponse",!1)),this.renderedData={query:"",results:[]},e.seLogger||(e.seLogger=new I.SuggestionEngagementLogger),e.scanabilityLogger||(e.scanabilityLogger=new T.ScanabilityLogger),e.selectionToSubmissionLogger||(e.selectionToSubmissionLogger=new b.SelectionToSubmissionLogger),e.oLogger||(e.oLogger=new m.OmnitureLogger),e.performanceMetricsLogger||(e.performanceMetricsLogger=new v.PerformanceMetricsLogger),L.TypeaheadMessage.subscribe(x.InputClearedMessage.getTopic(),function(e,t){if(t&&t.$elem){var n=t.$elem.attr("id");g.$input.attr("id")===n&&g.input(null)}})}return e.initOmnitureLogger=function(){e.oLogger=new m.OmnitureLogger},e.getOmnitureLogger=function(){return e.oLogger},e.prototype.addRowIndexToAnchors=function(e){var t=this,o=n("<div/>").html(e);return o.find("a").each(function(e){n(t).attr("data-row",e)}),o.html()},e.prototype.getCategory=function(e){if("USERHISTORY"===e.category)return z.TypeaheadUtils.CATEGORIES.USERHISTORY;if(e.hierarchyInfo&&e.hierarchyInfo.relation&&"hotelfilter"===e.hierarchyInfo.relation[0])return z.TypeaheadUtils.CATEGORIES.BESTFILTER;if("undefined"!=typeof e.type){var t=z.TypeaheadUtils.getOverrideIcon(e.type,e.subtype);return"string"==typeof t?z.TypeaheadUtils.iconOverride(z.TypeaheadUtils.CATEGORIES[e.type],t):z.TypeaheadUtils.CATEGORIES[e.type]}return"undefined"!=typeof e.t?z.TypeaheadUtils.CATEGORIES[e.t]:void 0},e.prototype.addIndexToItems=function(e){e.forEach(function(e,t){e.index=t})},e.prototype.initResultsByCategory=function(e,t){var n=this.getCategoriesPresent(e),o={};return"HOTELS"===t?(n["Region/City"]&&(o["Region/City"]=[]),n.Attractions&&(o.Attractions=[]),n.Airports&&(o.Airports=[]),n.Amenities&&(o.Amenities=[]),n.Hotels&&(o.Hotels=[])):"CARS"===t&&(n.Airports&&(o.Airports=[]),n["Region/City"]&&(o["Region/City"]=[]),n.Attractions&&(o.Attractions=[])),o},e.prototype.getCategoriesPresent=function(e){var t={},o=this;return n.each(e,function(e,n){var i=o.getCategory(n),r=i?i.name:"Other";"undefined"==typeof t[r]&&(t[r]=!0)}),t},e.prototype.getResultsByCategory=function(e,t){var o=this.initResultsByCategory(e,t),i=this;return n.each(e,function(e,t){var n=i.getCategory(t),r=n?n.name:"Other";"undefined"==typeof o[r]&&(o[r]=[]),o[r].push(t)}),o},e.prototype.updateSearchSuggestions=function(e,t,o,i){function r(e,t){i?e.icon=i:e.icon=t?t.icon:"location"}function a(e){"undefined"!=typeof e.regionNames&&("undefined"!=typeof e.regionNames.lastSearchName?e.regionNames.lastSearchName=e.regionNames.lastSearchName.replace(/'/g,"&#39;"):"undefined"!=typeof e.regionNames.fullName&&(e.regionNames.fullName=e.regionNames.fullName.replace(/'/g,"&#39;"),e.regionNames.lastSearchName=e.regionNames.fullName))}function s(e){e.categoryVM={displayName:"",fullName:""},"regionNames"in e?(e.categoryVM.displayName=e.regionNames.displayName,e.categoryVM.fullName=e.regionNames.fullName,e.categoryVM.lastSearchName=e.regionNames.lastSearchName):"d"in e&&(e.categoryVM.displayName=e.d,e.categoryVM.fullName=e.l)}var l=this;return this.suggestionsProvider.modifySuggestions(e,o,this.opts).then(function(e){n.each(e,function(e,t){var n=l.getCategory(t);t.categoryName=n?n.name:"Other",t.icon||r(t,n),a(t),s(t)})})},e.prototype.addTypeaheadPopupHostContainer=function(){var e="uitk_ta_content",t='<div id="'+e+'" role="presentation"></div>',o=n("#"+e).length;0===o&&n("body").append(t)},e.prototype.getCompiledTemplate=function(e,t){var i,r,a="";if(e.length>1&&0===e.indexOf("#")&&(a=e.substring(1)),i=o.partials[e]||o["default"].partials[e]||o.templates[a]||o.templates[a+".hbs"],!i){if(r=n(e),!(r.length>0))return void C["default"].log(new Error("ERROR: No template found"),E.Severity.Excusable,S.ProblemOrigin.ClientOfUniversalTypeahead);i=o.compile(r.html())}return t&&o["default"].registerPartial(e,i),i},e.prototype.constructContext=function(e){return{clientId:e.clientId,deviceType:z.TypeaheadUtils.getDeviceType(),expuserid:z.TypeaheadUtils.getExpUserId(),guid:e.guid,lob:e.lob,locale:e.locale,siteid:e.siteid,tab:c.ClientHandlerRegistry.getTab()}},e.prototype.constructSuggestionServiceUrlOptions=function(e){return{locale:e.locale,overrideServiceUrl:e.overrideServiceUrl,serviceUrl:e.serviceUrl,suggestServiceUrl:e.suggestServiceUrl}},e.prototype.constructRequestGenerator=function(e,t){var n=new g.ExpediaSuggestServiceRequestGenerator(g.ExpediaSuggestServiceRequestGenerator.ESS_ABACUS_IDS,i.isFunction(g.ExpediaSuggestServiceRequestGenerator.defaultVariantAssigner)?g.ExpediaSuggestServiceRequestGenerator.defaultVariantAssigner:void 0,this.constructSuggestionServiceUrlOptions(e),e.siteid,t);return n},e.prototype.getDomElementId=function(){return this.$input.attr("id")},e.prototype.showPopup=function(){this.$popupContent.is(":hidden")&&(this.$popupContent.on("mousedown",n.proxy(this.clickOn,this)).on("mouseup",n.proxy(this.clickOff,this)).on("mouseenter","a",n.proxy(this.mouseEnter,this)),this.$popupContent.closest("."+z.TypeaheadUtils.responsiveTAClasses.autoCompleteClass).addClass(z.TypeaheadUtils.responsiveTAClasses.openClass),this.$popupContent.show(),this.dropDownShowHandlersAssembly.runHandlers(this.$popupContent,this.$input,this.context)),this.dropdownContentHandlersAssembly.runHandlers(this.$popupContent,this.$input,this.context)},e.prototype.doStartRequest=function(e){var t=this.$input.val();if(t.length>=e){var n=this.cache[t];n?this.render(n.query,n.results,n.activeABTests,n.responseCode):this.dataRequest(t)}else this.close()},e.prototype.startRequest=function(){var t=this,o=!1,r=this.opts.minchar;r=i.isNumber(r)?r:1;var a=e.pluginAssembly.get(f.isMinQueryLengthOverrider).map(function(e){return e.overrideMinQueryLength(t.context)});n.when(a).always(function(){a.forEach(function(e){"resolved"===e.state()&&e.done(function(e){o&&C["default"].log(new Error("ERROR: Conflicting overrideMinQueryLength"),E.Severity.MustFix,S.ProblemOrigin.UniversalTypeahead),r=e,o=!0})}),t.doStartRequest(r)})},e.prototype.createTypeaheadOptions=function(e,t){return n.extend(!0,{},this.opts,{context:this.context,ignoreResults:e,inputElementId:this.getDomElementId(),requestGenerator:this.requestGenerator,srchText:t})},e.prototype.dataRequest=function(e,t){void 0===t&&(t=!1),this.essDataProvider.fetchData(this.createTypeaheadOptions(t,e)).then(n.proxy(this.essResponseResolver,this)).fail(function(e){C["default"].log(e,E.Severity.MustFix,S.ProblemOrigin.ExpediaSuggestService)})},e.prototype.essResponseResolver=function(e){var t=this;if(e)if(e.isReferralToGoogleMaps){var o=n.extend(!0,{},this.opts,{activeEssTests:e.activeABTests,domElementId:this.getDomElementId(),requestType:e.responseCode,srchText:e.query});this.googleMapsDataProvider.fetchData(o).then(function(e){t.googleMapsDataProviderResponseResolver(e)})}else this.cache[e.query]=e,e.results&&this.shouldBeOpen?this.render(e.query,e.results,e.activeABTests,e.responseCode):this.close()},e.prototype.googleMapsDataProviderResponseResolver=function(e){this.cache[e.query]=e,e.results&&this.shouldBeOpen?this.render(e.query,e.results,void 0):this.close()},e.prototype.appendUserTypedText=function(e,t){var o,i=!0,r={},a=/\d/,s=/<script[\s\S]+?script\s*>?/gi;this.opts.playBackText&&"defaultResponse"!==t&&(n.each(e,function(e,t){t.id===-1&&(i=!1)}),i&&(t=t.replace(s,""),o=this.opts.playBackText,o=o.replace(a,t),r.l=t,r.d=o,r.id=-1,r.i=-1,"HOTELS"===this.opts.lob&&(r.t="HOTEL"),e.push(r)))},e.prototype.render=function(e,t,o,s){var l,u=this;""===e?(l="focus",n.extend(this.opts,{renderTrigger:"focus"})):(l="type",n.extend(this.opts,{renderTrigger:"type"}));var c=Date.now();if(this.$input.val()&&e&&this.$input.val()!==e&&!this.opts.openDefaultTa)return void this.publishSuggestionReadyMessage(e,t,o,this.getDomElementId(),s);var p=n.extend(!0,[],t);if(0===p.length)return this.close(),void this.publishSuggestionReadyMessage(e,t,o,this.getDomElementId(),s);var d,g,h,f="",y={},m={},v=this;if(n(document.activeElement).attr("id")===this.$input.attr("id")){if(this.appendUserTypedText(p,e),this.addIndexToItems(p),this.opts.preRenderTransform&&"function"==typeof this.opts.preRenderTransform&&(p=this.opts.preRenderTransform(e,p),!p||!i.isArray(p)))throw new Error("preRenderTransform callback must return a valid array.");this.updateSearchSuggestions(p,this.suggestionsProvider,this.context,this.opts.forceicon).then(function(){v.addIndexToItems(p),y=v.getResultsByCategory(p,v.opts.lob),m=v.displayGroupHandler.getResultsByDisplayGroup(p),h={closeText:v.opts.closetext,continueText:v.opts.continuetext,results:p,resultsByCategory:y,resultsByDisplayGroup:m},"android"in Modernizr&&Modernizr.android||(h.ariaOwns=v.ariaOwns),v.renderedData.query=e,v.renderedData.results=n.extend(!0,[],p),f=v.template(h),v.$popupContent.html(v.addRowIndexToAnchors(f)),v.showPopup(),v.$label.addClass("focused"),g=p.length,d=1===g?"typeahead_results_displayed_one":"typeahead_results_displayed_other",conditionizr.safari?setTimeout(function(){r.utils.liveAnnounce(a.t(d,{arg0:g}),"polite"),setTimeout(function(){r.utils.liveAnnounce("","polite")},200)},800):r.utils.liveAnnounce(a.t(d,{arg0:g}),"polite");var i=Date.now(),l=i-c;L.TypeaheadMessage.publish(new w.SuggestionShownMessage(v.renderedData.results,e,o,v.opts.lob,l,v.getDomElementId())),u.publishSuggestionReadyMessage(e,t,o,u.getDomElementId(),s),window.utaTestHooks={latestEssResults:v.renderedData.results}})}},e.prototype.close=function(){var e=this;if(this.$popupContent.off("mousedown",n.proxy(this.clickOn,this)).off("mouseup",n.proxy(this.clickOff,this)).off("mouseenter","a",n.proxy(this.mouseEnter,this)),!this.$popupContent.is(":hidden")){this.$label.removeClass("focused"),this.$popupContent.closest("."+z.TypeaheadUtils.responsiveTAClasses.autoCompleteClass).removeClass(z.TypeaheadUtils.responsiveTAClasses.openClass),this.removeActiveDescendant(),this.bodyClick&&(this.$popupContent.unbind("mousedown",n.proxy(this.cancelEvent,this)),n(document.body).unbind("mousedown",n.proxy(this.close,this)),this.bodyClick=!1),this.dropDownHideHandlersAssembly.runHandlers(this.$popupContent,this.$input,this.context);var t=n(document.body).scrollTop();setTimeout(function(){n(document.body).scrollTop(t),e.$popupContent.hide(),e.$popupContent.html("")},0)}},e.prototype.removeActiveDescendant=function(){var e=n("input[aria-activedescendant]");e.length>0&&e.removeAttr("aria-activedescendant")},e.prototype.prev=function(){var e=this.$popupContent.find("a"),t=this.$popupContent.find("."+z.TypeaheadUtils.responsiveTAClasses.hlClass).removeClass(z.TypeaheadUtils.responsiveTAClasses.hlClass),o=e.index(t),i=o-1,s=e[i],l=n(s),u=n(s).attr("id"),c=e.length-1,p="";i<-1&&(s=e[c],l=n(s)),s?(n(s).addClass(z.TypeaheadUtils.responsiveTAClasses.hlClass),this.opts.onItemSelectionChanged&&"function"==typeof this.opts.onItemSelectionChanged&&this.opts.onItemSelectionChanged(l),n(s).hasClass("close")?r.utils.liveAnnounce(a.t("close"),"assertive"):(p=n(s).attr("data-value"),conditionizr.firefox||r.utils.liveAnnounce(p,"polite"),this.$input.attr("aria-activedescendant",u))):(this.$input.removeAttr("aria-activedescendant"),r.utils.liveAnnounce(this.$input.val(),"polite"))},e.prototype.next=function(){var e=this.$popupContent.find("a"),t=this.$popupContent.find("."+z.TypeaheadUtils.responsiveTAClasses.hlClass).removeClass(z.TypeaheadUtils.responsiveTAClasses.hlClass),o=e.index(t),i=o+1,s=e[i],l=n(s),u=n(s).attr("id");s?(l.addClass(z.TypeaheadUtils.responsiveTAClasses.hlClass),this.opts.onItemSelectionChanged&&"function"==typeof this.opts.onItemSelectionChanged&&this.opts.onItemSelectionChanged(l),n(s).hasClass("close")?r.utils.liveAnnounce(a.t("close"),"assertive"):(this.$input.attr("aria-activedescendant",u),conditionizr.firefox||r.utils.liveAnnounce(n(s).attr("data-value"),"polite"))):r.utils.liveAnnounce(this.$input.val(),"polite")},e.prototype.removeHighlights=function(){
this.$popupContent.find("."+z.TypeaheadUtils.responsiveTAClasses.hlClass).removeClass(z.TypeaheadUtils.responsiveTAClasses.hlClass)},e.prototype.getSelectedSuggestion=function(e){if(this.renderedData.results&&e){var t=e.substring(e.lastIndexOf("-")+1),n=parseInt(t,10)+1,o=!1;if(n<this.renderedData.results.length){var i=this.renderedData.results[n];o=i.hierarchyInfo&&"true"===i.hierarchyInfo.isChild}return $.createSuggestion(this.renderedData.results[t],o)}return null},e.prototype.selectHighlighted=function(e,t){var o,i,s=this.$popupContent.find("."+z.TypeaheadUtils.responsiveTAClasses.hlClass),l=s.text(),u=(n("html"),"results-item"),c=n(e.target);if(t=t||c.hasClass("close")||c.parent().hasClass("close"),r.isTouchDevice&&(s=c.closest("."+u).find("a"),l=s.text(),t=""===l),o=l.replace(/(^\s+|\s+$)/g,""),this.updateTextField(s),s.removeClass(z.TypeaheadUtils.responsiveTAClasses.hlClass),t===!0)i=s.text().replace(/(^\s+|\s+$)/g,""),r.utils.liveAnnounce(a.t("close_button_menu_closed")),this.close();else{var p=a.t("item_selected_menu_closed",{arg0:o});r.utils.liveAnnounce(p,"assertive")}if(s&&s.attr("id")){var d=this.getSelectedSuggestion(s.attr("id"));B.updateForSuggestion(this.$input.val(),d,this.opts,this.getDomElementId()),L.TypeaheadMessage.publish(new P.SuggestionSelectedMessage(d,e,this.opts.lob,this.getDomElementId()))}s.context=this.$input;var g={element:s};r.publish("typeahead.resultSelected",g),"function"==typeof this.opts.selectioncallback?this.opts.selectioncallback(s):"function"==typeof window[this.opts.selectioncallback]&&window[this.opts.selectioncallback](s)},e.prototype.updateTextField=function(e){var t,n,o,i,a=this,s=e.attr("id");if(e&&s){if(t=s.lastIndexOf("-"),n=+s.substring(t+1),o=this.renderedData.results[n],i=e.attr("data-value")){i=i.replace(/&#39;/g,"'"),this.$input.val(i),"GEOLOCATION"!==o.category&&this.$input.trigger("change");var l=e.attr("data-id");l&&this.$input.attr("data-id",l)}r.prepFields(),this.close(),setTimeout(function(){a.$input[0]&&document.activeElement===a.$input[0]&&a.$input[0].setSelectionRange(0,9999)},0)}},e.prototype.showOnFocusSuggestions=function(){var e=this,t=this.$input.val();this.onFocusSuggester.suggest(this.createTypeaheadOptions(!1,""),this.context).done(n.proxy(function(n){n&&(e.$input.val()&&t!==e.$input.val()||e.render("",n.results,""))},this))},e.prototype.focus=function(e,t){this.hasFocus&&!t||(j.mapMethodByName(this.inputElementFocusByHumanOrScriptHandlers,"handleInputElementFocusByHumanOrScript",this.$input,this.context),e.isTrigger&&!t||(L.TypeaheadMessage.publish(new M.ElementFocusedMessage(this.$input.val(),this.context,this.getDomElementId())),j.mapMethodByName(this.inputElementFocusHandlers,"handleInputElementFocus",this.$input,this.context),this.showOnFocusSuggestions(),this.opts.onInputFocus&&"function"==typeof this.opts.onInputFocus&&this.opts.onInputFocus(e))),this.hasFocus=!0},e.prototype.blur=function(e){var t=this;this.hasFocus=!1,window.utaDebug||setTimeout(n.proxy(function(){t.close()},this),0),this.opts.onInputBlur&&"function"==typeof this.opts.onInputBlur&&this.opts.onInputBlur(e),window.navigator.msPointerEnabled&&!window.PointerEvent||(this.isClickOn&&(this.$popupContent.bind("mousedown",n.proxy(this.cancelEvent,this)),n(document.body).bind("mousedown",n.proxy(this.close,this)),this.bodyClick=!0),L.TypeaheadMessage.publish(new A.UserExitedMessage))},e.prototype.keyDown=function(e){var t;switch(e||(e=window.event),t=e.keyCode){case 27:this.close(),e.stopPropagation();break;case 9:case 13:if(this.opts.selectFirstElementByDefault&&this.$popupContent.find(".highlight").length<=0&&this.$label.hasClass("focused")){var n=this.$popupContent.find("li.category-item");if(n&&0!==n.length||(n=this.$popupContent.find("li.results-item")),n){var o=n.first();o&&o.find("a").addClass("highlight")}}this.$popupContent.find(".highlight").length&&(e.stopPropagation(),13===t&&e.preventDefault(),this.selectHighlighted(e,this.$popupContent.find(".highlight").hasClass("close")));break;case 32:this.$popupContent.find(".highlight").hasClass("close")&&(e.stopPropagation(),e.preventDefault());break;case 39:this.$popupContent.find(".highlight").length&&(this.ignoreNext=!0,e.stopPropagation(),this.selectHighlighted(e,!1));break;case 38:e.preventDefault(),e.stopPropagation(),this.prev();break;case 40:e.stopPropagation(),e.preventDefault(),this.next()}},e.prototype.keyPress=function(e){e||(e=window.event),13===e.keyCode&&this.close()},e.prototype.keyUp=function(e){if(this.ignoreNext)return void(this.ignoreNext=!1);switch(e||(e=window.event),e.keyCode){case 37:this.removeHighlights();break;case 38:e.preventDefault(),e.stopPropagation();break;case 40:e.stopPropagation(),e.preventDefault();break;case 13:this.shouldBeOpen=!1;break;case 32:this.$popupContent.find(".highlight").hasClass("close")&&(e.stopPropagation(),e.preventDefault(),this.selectHighlighted(e,this.$popupContent.find(".highlight").hasClass("close")))}},e.prototype.input=function(e){L.TypeaheadMessage.publish(new _.InputValueEditedMessage(this.$input.val(),this.opts.lob,this.getDomElementId())),this.shouldBeOpen=!0,this.startRequest(),B.updateForSuggestion(this.$input.val(),void 0,this.opts,this.getDomElementId()),this.opts.onInputEdited&&this.opts.onInputEdited(this.$input.val())},e.prototype.clickOn=function(e){var t=n(e.target);t.hasClass("close")||t.parent().hasClass("close")||(this.isClickOn=!0),this.click(e)},e.prototype.clickOff=function(){this.isClickOn=!1},e.prototype.click=function(e){e.stopPropagation(),e.preventDefault(),(0===e.button||r.isTouchDevice)&&this.selectHighlighted(e,!1)},e.prototype.mouseEnter=function(e){this.removeHighlights(),n(e.currentTarget).addClass("highlight")},e.prototype.cancelEvent=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1},e.prototype.remove=function(){this.$input.autocomplete="on",this.$input.closest("form").attr("autocomplete","on"),this.$input.off("focus",n.proxy(this.focus,this)).off("keydown",n.proxy(this.keyDown,this)).off("keyup",n.proxy(this.keyUp,this)).off("keypress",n.proxy(this.keyPress,this)).off("input",n.proxy(this.input,this)).off("blur",n.proxy(this.blur,this)),this.$popupContent.off("mousedown",n.proxy(this.clickOn,this)).off("mouseup",n.proxy(this.clickOff,this)).off("mouseenter","a",n.proxy(this.mouseEnter,this)).remove()},e.prototype.setPinClass=function(e){e.hasClass(z.TypeaheadUtils.responsiveTAClasses.leftClass)||e.hasClass(z.TypeaheadUtils.responsiveTAClasses.rightClass)||e.hasClass(z.TypeaheadUtils.responsiveTAClasses.centerClass)||e.addClass(z.TypeaheadUtils.responsiveTAClasses.leftClass)},e.prototype.hammerTapHandler=function(e){var t=i.isObject(e)&&e.srcEvent;i.isObject(t)&&this.click(t)},e.prototype.publishSuggestionReadyMessage=function(e,t,n,o,i){this.ESS_EXCEPTION_RESPONSE_CODES.indexOf(i)<0&&L.TypeaheadMessage.publish(new O.SuggestionReadyMessage(e,t,n,o))},e.pluginAssembly=new H.DefaultPluginAssembly,e.tooltipPlugin="uitk_tooltip",e.flightOriginPopulationLogger=new y.FlightOriginPopulationLogger,e}();t.handlePageLoad=W,t.initTA=Y,t.registerPlugin=Q}),require("handlebars",function(e){e["default"].registerPartial("hbs/templates/destinationCustom",e["default"].template({1:function(e,t,n,o,i){var r,a=null!=t?t:e.nullContext||{};return'    <div class="display-group-results">\n'+(null!=(r=n["if"].call(a,null!=t?t.label:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?r:"")+"\n"+(null!=(r=n.each.call(a,null!=t?t.items:t,{name:"each",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))?r:"")+"    </div>\n"},2:function(e,t,n,o,i){var r;return'        <li role="presentation"  tabindex="-1"\n            class="display-group-name">\n            <div role="option" class="details">'+e.escapeExpression((r=null!=(r=n.label||(null!=t?t.label:t))?r:n.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{name:"label",hash:{},data:i}):r))+"</div>\n        </li>\n"},4:function(e,t,n,o,i){var r,a=null!=t?t:e.nullContext||{};return"\n"+(null!=(r=n["if"].call(a,null!=t?t.label:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?r:"")+'\n        <li class="results-item" role="presentation">\n'+(null!=(r=n["if"].call(a,null!=t?t.html:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))?r:"")+"        </li>\n"},5:function(e,t,n,o,i){var r;return'        <li role="presentation"  tabindex="-1"\n                    class="non-results-item">\n'+(null!=(r=n["if"].call(null!=t?t:e.nullContext||{},null!=t?t.showAsHierarchy:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))?r:"")+"        </li>\n"},6:function(e,t,n,o,i){var r;return'            <div class="child-suggestion">\n                <span class="child-suggestion-label">\n                '+e.escapeExpression((r=null!=(r=n.label||(null!=t?t.label:t))?r:n.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{name:"label",hash:{},data:i}):r))+"</span>\n            </div>\n"},8:function(e,t,n,o,i){var r,a;return"                "+(null!=(a=null!=(a=n.html||(null!=t?t.html:t))?a:n.helperMissing,r="function"==typeof a?a.call(null!=t?t:e.nullContext||{},{name:"html",hash:{},data:i}):a)?r:"")+"\n"},10:function(e,t,n,o,i){var r,a,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},u=n.helperMissing,c="function";return'                <a href="#"\n                    class="details"\n                    data-value="'+s(e.lambda(null!=(r=null!=t?t.regionNames:t)?r.lastSearchName:r,t))+'"\n                    id="aria-option-'+s((a=null!=(a=n.index||(null!=t?t.index:t))?a:u,typeof a===c?a.call(l,{name:"index",hash:{},data:i}):a))+'"\n                    role="option" tabindex="-1"\n                    aria-selected="false"\n                    data-type="'+s((a=null!=(a=n.type||(null!=t?t.type:t))?a:u,typeof a===c?a.call(l,{name:"type",hash:{},data:i}):a))+'"\n                    data-id="'+s((a=null!=(a=n.gaiaId||(null!=t?t.gaiaId:t))?a:u,typeof a===c?a.call(l,{name:"gaiaId",hash:{},data:i}):a))+'"\n                    style="'+s((a=null!=(a=n.style||(null!=t?t.style:t))?a:u,typeof a===c?a.call(l,{name:"style",hash:{},data:i}):a))+'">\n                '+(null!=(r=(n.createListItem||t&&t.createListItem||u).call(l,t,{name:"createListItem",hash:{},data:i}))?r:"")+"\n                </a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,i){var r,a,s=null!=t?t:e.nullContext||{},l=n.helperMissing,u="function";return'<style>\n.autocomplete-dropdown .display-group-results:not(:first-of-type) {\n    padding-top: 0.9230769230769231em;\n    border-top: 0.07692307692307693em solid #c7c7c7;\n}\n.autocomplete-dropdown .display-group-results:not(:last-of-type) {\n    padding-bottom: 0.9230769230769231em;\n}\n.autocomplete-dropdown li.display-group-name {\n    list-style: none;\n    padding: 0 0.92307692em;\n}\n.autocomplete-dropdown li.display-group-name div.details {\n    color: #313131;\n    padding: 0.46153846em;\n}\n.autocomplete-dropdown li.non-results-item div.child-suggestion {\n    padding-left: 1.88235em;\n}\n.autocomplete-dropdown span.child-suggestion-label {\n    padding-left: 1.5em;\n    color: #313131;\n}\n</style>\n<ul id="'+e.escapeExpression((a=null!=(a=n.ariaOwns||(null!=t?t.ariaOwns:t))?a:l,typeof a===u?a.call(s,{name:"ariaOwns",hash:{},data:i}):a))+'" role="listbox" class="results">\n'+(null!=(r=n.each.call(s,null!=t?t.resultsByDisplayGroup:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?r:"")+'</ul>\n<footer class="footer">\n    <a class="close" href="#" tabindex=\'-1\' aria-label=\''+(null!=(a=null!=(a=n.closeText||(null!=t?t.closeText:t))?a:l,r=typeof a===u?a.call(s,{name:"closeText",hash:{},data:i}):a)?r:"")+"'>\n        "+(null!=(a=null!=(a=n.closeText||(null!=t?t.closeText:t))?a:l,r=typeof a===u?a.call(s,{name:"closeText",hash:{},data:i}):a)?r:"")+'\n        <span class="icon icon-close"></span>\n    </a>\n</footer>\n'},useData:!0}))}),require("handlebars",function(e){e["default"].registerPartial("hbs/templates/gemmaCustom",e["default"].template({1:function(e,t,n,o,i){var r,a,s=e.lambda,l=e.escapeExpression,u=null!=t?t:e.nullContext||{},c=n.helperMissing,p="function";return'    <li class="results-item" role="presentation">\n        <a href="#"\n           class="details"\n           data-value="'+l(s(null!=(r=null!=t?t.regionNames:t)?r.lastSearchName:r,t))+'"\n           id="aria-option-'+l((a=null!=(a=n.index||(null!=t?t.index:t))?a:c,typeof a===p?a.call(u,{name:"index",hash:{},data:i}):a))+'"\n           role="option" tabindex="-1"\n           aria-selected="false"\n           data-id="'+l((a=null!=(a=n.gaiaId||(null!=t?t.gaiaId:t))?a:c,typeof a===p?a.call(u,{name:"gaiaId",hash:{},data:i}):a))+'">\n            <span class="icon icon-'+l((a=null!=(a=n.icon||(null!=t?t.icon:t))?a:c,typeof a===p?a.call(u,{name:"icon",hash:{},data:i}):a))+"\" aria-hidden='true'></span>"+(null!=(r=s(null!=(r=null!=t?t.regionNames:t)?r.displayName:r,t))?r:"")+"\n        </a>\n    </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,i){var r,a,s=null!=t?t:e.nullContext||{},l=n.helperMissing,u="function";return'<ul id="'+e.escapeExpression((a=null!=(a=n.ariaOwns||(null!=t?t.ariaOwns:t))?a:l,typeof a===u?a.call(s,{name:"ariaOwns",hash:{},data:i}):a))+'" role="listbox" class="results">\n'+(null!=(r=n.each.call(s,null!=t?t.results:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?r:"")+'</ul>\n<footer class="footer">\n    <a class="close" href="#" tabindex=\'-1\' aria-label=\''+(null!=(a=null!=(a=n.closeText||(null!=t?t.closeText:t))?a:l,r=typeof a===u?a.call(s,{name:"closeText",hash:{},data:i}):a)?r:"")+"'>\n        "+(null!=(a=null!=(a=n.closeText||(null!=t?t.closeText:t))?a:l,r=typeof a===u?a.call(s,{name:"closeText",hash:{},data:i}):a)?r:"")+'\n        <span class="icon icon-close"></span>\n    </a>\n</footer>'},useData:!0}))}),require("handlebars",function(e){e["default"].registerPartial("hbs/templates/originCategoryCustom",e["default"].template({1:function(e,t,n,o,i){var r,a,s=null!=t?t:e.nullContext||{},l=n.helperMissing,u="function",c=e.escapeExpression;return'        <li role="presentation"\n            data-tid="typeahead-category-'+c((a=null!=(a=n.categoryName||(null!=t?t.categoryName:t))?a:l,typeof a===u?a.call(s,{name:"categoryName",hash:{},data:i}):a))+'"\n            id="typeahead-category-'+c((a=null!=(a=n.categoryName||(null!=t?t.categoryName:t))?a:l,typeof a===u?a.call(s,{name:"categoryName",hash:{},data:i}):a))+'"\n            class="results-item-ally category-name-ally"\n            style="list-style: none">'+c((a=null!=(a=n.categoryName||(null!=t?t.categoryName:t))?a:l,typeof a===u?a.call(s,{name:"categoryName",hash:{},data:i}):a))+"\n        </li>\n"+(null!=(r=n.each.call(s,t,{name:"each",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?r:"")+'        <li class="category-divider" style="list-style:none">&nbsp;</li>\n'},2:function(e,t,n,o,i){var r,a,s=e.lambda,l=e.escapeExpression,u=null!=t?t:e.nullContext||{},c=n.helperMissing,p="function";return'        <a href="#"\n           class="details"\n           data-value="'+l(s(null!=(r=null!=t?t.categoryVM:t)?r.lastSearchName:r,t))+'"\n           id="aria-option-'+l((a=null!=(a=n.index||(null!=t?t.index:t))?a:c,typeof a===p?a.call(u,{name:"index",hash:{},data:i}):a))+'"\n           role="option" tabindex="-1"\n           aria-selected="false"\n           data-id="'+l((a=null!=(a=n.gaiaId||(null!=t?t.gaiaId:t))?a:c,typeof a===p?a.call(u,{name:"gaiaId",hash:{},data:i}):a))+'">\n           <span class="icon icon-'+l((a=null!=(a=n.icon||(null!=t?t.icon:t))?a:c,typeof a===p?a.call(u,{name:"icon",hash:{},data:i}):a))+"\"\n                 aria-hidden='true'></span>"+(null!=(r=s(null!=(r=null!=t?t.categoryVM:t)?r.displayName:r,t))?r:"")+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,i){var r,a,s=null!=t?t:e.nullContext||{},l=n.helperMissing,u="function";return'<ul role="presentation" data-tid="typeahead-list-category">\n'+(null!=(r=(n.each_with_key||t&&t.each_with_key||l).call(s,null!=t?t.resultsByCategory:t,{name:"each_with_key",hash:{key:"categoryName"},fn:e.program(1,i,0),inverse:e.noop,data:i}))?r:"")+'</ul>\n<footer class="footer">\n    <a class="close" tabindex=\'-1\' href="#" aria-label=\''+(null!=(a=null!=(a=n.closeText||(null!=t?t.closeText:t))?a:l,r=typeof a===u?a.call(s,{name:"closeText",hash:{},data:i}):a)?r:"")+"'>\n        "+(null!=(a=null!=(a=n.closeText||(null!=t?t.closeText:t))?a:l,r=typeof a===u?a.call(s,{name:"closeText",hash:{},data:i}):a)?r:"")+'\n        <span class="icon icon-close"></span>\n    </a>\n</footer>'},useData:!0}))}),require("handlebars",function(e){e["default"].registerPartial("hbs/templates/originDefaultCustom",e["default"].template({1:function(e,t,n,o,i){var r,a,s=e.escapeExpression,l=null!=t?t:e.nullContext||{},u=n.helperMissing,c="function";return'    <li class="results-item" role="presentation">\n        <a href="#"\n            class="details"\n            data-value="'+s(e.lambda(null!=(r=null!=t?t.regionNames:t)?r.lastSearchName:r,t))+'"\n            id="aria-option-'+s((a=null!=(a=n.index||(null!=t?t.index:t))?a:u,typeof a===c?a.call(l,{name:"index",hash:{},data:i}):a))+'"\n            role="option" tabindex="-1"\n            aria-selected="false"\n            data-id="'+s((a=null!=(a=n.gaiaId||(null!=t?t.gaiaId:t))?a:u,typeof a===c?a.call(l,{name:"gaiaId",hash:{},data:i}):a))+'">\n'+(null!=(r=n["if"].call(l,null!=t?t.showAsHierarchy:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))?r:"")+"        </a>\n    </li>\n"},2:function(e,t,n,o,i){var r;return"                "+(null!=(r=(n.createSuggestion||t&&t.createSuggestion||n.helperMissing).call(null!=t?t:e.nullContext||{},!0,null!=t?t.index:t,void 0,null!=(r=null!=t?t.regionNames:t)?r.displayName:r,void 0,null!=(r=null!=(r=null!=t?t.hierarchyInfo:t)?r.nearby:r)?r.distInMI:r,{name:"createSuggestion",hash:{},data:i}))?r:"")+"\n"},4:function(e,t,n,o,i){var r;return"                "+(null!=(r=(n.createSuggestion||t&&t.createSuggestion||n.helperMissing).call(null!=t?t:e.nullContext||{},!1,null!=t?t.index:t,null!=t?t.icon:t,null!=(r=null!=t?t.regionNames:t)?r.displayName:r,null!=t?t.rightFloatingTextHtml:t,{name:"createSuggestion",hash:{},data:i}))?r:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,i){var r,a,s=null!=t?t:e.nullContext||{},l=n.helperMissing,u="function";return'<ul id="'+e.escapeExpression((a=null!=(a=n.ariaOwns||(null!=t?t.ariaOwns:t))?a:l,typeof a===u?a.call(s,{name:"ariaOwns",hash:{},data:i}):a))+'" role="listbox" class="results">\n'+(null!=(r=n.each.call(s,null!=t?t.results:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?r:"")+'</ul>\n<footer class="footer">\n    <a class="close" href="#" tabindex=\'-1\' aria-label=\''+(null!=(a=null!=(a=n.closeText||(null!=t?t.closeText:t))?a:l,r=typeof a===u?a.call(s,{name:"closeText",hash:{},data:i}):a)?r:"")+"'>\n        "+(null!=(a=null!=(a=n.closeText||(null!=t?t.closeText:t))?a:l,r=typeof a===u?a.call(s,{name:"closeText",hash:{},data:i}):a)?r:"")+'\n        <span class="icon icon-close"></span>\n    </a>\n</footer>'},useData:!0}))}),define("typeahead/core/geolocation/GeolocationDataProvider",["require","exports","typeahead/core/loc","typeahead/core/geolocation/message/GeolocationClearedMessage","typeahead/core/geolocation/message/GeolocationRequestMessage","typeahead/core/geolocation/message/GeolocationResponseMessage","typeahead/core/IListItem","typeahead/core/message/TypeaheadMessage"],function(e,t,n,o,i,r,a,s){"use strict";t.__esModule=!0;var l=function(){function e(){this.geolocationResult={category:e.CATEGORY,listItemType:a.ListItemType.Suggestion,regionNames:{displayName:e.MESSAGES.SUGGESTION_TEXT,lastSearchName:e.MESSAGES.DISPLAY_TEXT},type:e.CATEGORY}}return e.prototype.fetchData=function(e){var t=$.Deferred();return t.resolve({results:[this.getGeolocationResult()]}).promise()},e.prototype.findGeolocation=function(t,n){var a=this;void 0===n&&(n=void 0);var l=!1;s.TypeaheadMessage.publish(new i.GeolocationRequestMessage(t)),navigator.geolocation.getCurrentPosition(function(t){l=!0,a.setGeolocation(t),s.TypeaheadMessage.publish(new r.GeolocationResponseMessage(a.objectifyPosition(t),(void 0),a.getGeolocationResult(),n)),setTimeout(function(){a.setGeolocation(void 0),s.TypeaheadMessage.publish(new o.GeolocationClearedMessage(a.getGeolocationResult()))},e.TTL_IN_MILLISEC)},function(e){l||(l=!0,s.TypeaheadMessage.publish(new r.GeolocationResponseMessage((void 0),a.objectifyPositionError(e),a.getGeolocationResult())))},{enableHighAccuracy:!0,maximumAge:0,timeout:e.TIMEOUT_IN_MILLISEC}),setTimeout(function(){l||(l=!0,s.TypeaheadMessage.publish(new r.GeolocationResponseMessage((void 0),{code:3,message:"Fallback timeout expired"},a.getGeolocationResult())))},e.TIMEOUT_IN_MILLISEC+15e3)},e.prototype.getGeolocationResult=function(){return this.geolocationResult},e.prototype.setGeolocation=function(e){e&&e.coords?this.geolocationResult.coordinates={lat:e.coords.latitude+"","long":e.coords.longitude+""}:this.geolocationResult.coordinates=void 0},e.prototype.objectifyPosition=function(e){return{coords:e.coords?{accuracy:e.coords.accuracy,altitude:e.coords.altitude,altitudeAccuracy:e.coords.altitudeAccuracy,heading:e.coords.heading,latitude:e.coords.latitude,longitude:e.coords.longitude,speed:e.coords.speed}:void 0,timestamp:e.timestamp}},e.prototype.objectifyPositionError=function(e){return{code:e.code,message:e.message}},e.CATEGORY="GEOLOCATION",e.TIMEOUT_IN_MILLISEC=6e3,e.TTL_IN_MILLISEC=18e4,e.MESSAGES={DISPLAY_TEXT:n.geolocationDisplayText||"Your current location",SUGGESTION_TEXT:n.geolocationSuggestionText||"Use your current location"},e}();t.GeolocationDataProvider=l}),define("typeahead/core/geolocation/GeolocationIcon",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.locationIcon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE2cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTZweCIgDQp4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIiANCnhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48dGl0bGUvPjxkZWZzLz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIA0KaWQ9Ikljb25zIHdpdGggbnVtYmVycyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiPjxnIGZpbGw9IiMwMDY1YjgiIGlkPSJHcm91cCIgDQp0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQ0LjAwMDAwMCwgLTE5Mi4wMDAwMDApIj4NCjxwYXRoIGQ9Ik0xNDQuMDE3NDU2LDIwMCBMMTYwLjAxOTY1MywxOTIuMDQzMDkxIEwxNTIsMjA4LjA4ODYyMyBMMTUyLDIwMCBMMTQ0LjAxNzQ1NiwyMDAgWiBNMTQ0LjAxNzQ1NiwyMDAiIA0KaWQ9IlBhdGggMjIxIi8+PC9nPjwvZz48L3N2Zz4="});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/geolocation/GeolocationSuggestion",["require","exports","typeahead/core/Suggestion"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.shouldTriggerDomElementChangeOnSelection=function(){return!1},t}(n.Suggestion);t.GeolocationSuggestion=o}),define("typeahead/core/geolocation/GeolocationViewController",["require","exports","typeahead/core/loc","typeahead/core/geolocation/GeolocationDataProvider","typeahead/core/geolocation/message/GeolocationRequestMessage","typeahead/core/geolocation/message/GeolocationResponseMessage","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,n,o,i,r,a,s,l){"use strict";t.__esModule=!0;var u=function(){function e(t){var n=this;this.geolocationDataProvider=t,this.errorConfigMap={1:{code:1,closeTypeahead:!0,message:e.MESSAGES.PERMISSION_DENIED},2:{code:2,closeTypeahead:!0,message:e.MESSAGES.POSITION_UNAVAILABLE},3:{code:3,closeTypeahead:!1,message:e.MESSAGES.TIMEOUT},4:{code:4,closeTypeahead:!1,message:e.MESSAGES.UNKNOWN_ERROR}},this.interstitialContentSelector=".wrap",l.TypeaheadMessage.subscribe(a.ElementFocusedMessage.getTopic(),function(e,t){n.domElementId=t.getDomElementId()}),l.TypeaheadMessage.subscribe(s.SuggestionSelectedMessage.getTopic(),function(e,t){o.GeolocationDataProvider.CATEGORY!==t.getSuggestion().getCategory().orElse("")||n.isGeolocationAvailable()||n.geolocationDataProvider.findGeolocation(n.getDomElementId())}),l.TypeaheadMessage.subscribe(i.GeolocationRequestMessage.getTopic(),function(e,t){n.showInterstitial(n.getDomElementId())}),l.TypeaheadMessage.subscribe(r.GeolocationResponseMessage.getTopic(),function(e,t){n.handleGeolocationResponse(t)})}return e.prototype.handleGeolocationResponse=function(e){this.hideInterstitial(this.getDomElementId()),e.getPositionError()?(this.showErrorModal(e.getPositionError().code,this.getDomElementId()),$("#"+this.getDomElementId()).val("")):(this.updateSearchParameters(e.getGeolocationResult(),$("#"+this.getDomElementId())),e.getSubmitButton()&&e.getSubmitButton().trigger("click"))},e.prototype.getErrorMessage=function(e){return this.errorConfigMap[e]?this.errorConfigMap[e].message:this.errorConfigMap[4].message},e.prototype.showInterstitial=function(t){$("#"+t).blur(),uitk.publish("results.changed",{contentId:this.interstitialContentSelector,disable:!0,message:"<p>"+e.MESSAGES.FINDING_GEOLOCATION+"</p>",scrollToTop:!1,showLoader:!0})},e.prototype.hideInterstitial=function(e){uitk.publish("results.complete",{ariaLevel:"polite",contentId:this.interstitialContentSelector,focusElement:e})},e.prototype.showErrorModal=function(t,n){var o=this,i=uitk.modal.create({content:"<p>"+this.getErrorMessage(t)+"</p>",focusClose:n,modalId:"geolocationErrorModal",title:e.MESSAGES.ERROR_TITLE});uitk.subscribe("modal.close",function(e,r){r===i&&(o.errorConfigMap[t].closeTypeahead||$("#"+n).trigger("focus",!0))})},e.prototype.getDomElementId=function(){return this.domElementId?this.domElementId:$("div.autocomplete:visible").find("input[name=destination]").attr("id")},e.MESSAGES={ERROR_TITLE:n.geolocationErrorTitle||"We are unable to determine your current location",FINDING_GEOLOCATION:n.geolocationFindingMessage||"Finding your current location",PERMISSION_DENIED:n.geolocationPermissionDeniedMessage||"Please turn on the location services on your device so we can determine your location or type in a destination.",POSITION_UNAVAILABLE:n.geolocationPositionUnavailableMessage||"Please type in a destination.",TIMEOUT:n.geolocationTimeoutMessage||"Please retry or type in a destination.",UNKNOWN_ERROR:n.geolocationUnknownErrorMessage||"Please retry or type in a destination."},e}();t.GeolocationViewController=u});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/geolocation/HsrpGeolocationViewController",["require","exports","typeahead/core/loc","typeahead/client/ClientHandlerRegistry","typeahead/core/geolocation/GeolocationViewController","typeahead/core/geolocation/message/GeolocationClearedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/SuggestionFactory"],function(e,t,n,o,i,r,a,s){"use strict";t.__esModule=!0;var l=function(e){function t(t){var n=e.call(this,t)||this;return n.geolocationDataProvider=t,n.isGeolocationExpired=!0,uitk.subscribe(o.ClientHandlerRegistry.HSR_SUBMIT_GET_QUERY_MESSAGE,function(e,t){n.setLatLongForCurrentLocation(t)}),a.TypeaheadMessage.subscribe(r.GeolocationClearedMessage.getTopic(),function(e,t){n.isGeolocationExpired=!0}),n}return __extends(t,e),t.prototype.handlePageLoad=function(){},t.prototype.isGeolocationAvailable=function(){return!this.isGeolocationExpired},t.prototype.updateSearchParameters=function(e,t){var n=s.createSuggestion(e);this.geolocationLatLong=n.getLatLong().orElse(""),this.isGeolocationExpired=!1},t.prototype.setLatLongForCurrentLocation=function(e){this.isDestinationCurrentLocation()&&this.geolocationLatLong&&($("#latLong").val(this.geolocationLatLong),e.query&&e.query.indexOf("latLong")===-1&&(e.query+="&latLong="+this.geolocationLatLong),t.ORIGIN_SUBMIT_SEARCH_WIZARD===e.origin&&($("#sort-select").val("distance"),e.query&&e.query.indexOf("sort")===-1&&(e.query+="&sort=distance")))},t.prototype.isDestinationCurrentLocation=function(){return n.geolocationDisplayText===$("#inpSearchNear").val()},t.ORIGIN_SUBMIT_SEARCH_WIZARD="submitSearchWizard",t}(i.GeolocationViewController);t.HsrpGeolocationViewController=l});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/geolocation/MercuryGeolocationViewController",["require","exports","typeahead/core/loc","typeahead/core/geolocation/GeolocationDataProvider","typeahead/core/geolocation/GeolocationViewController","typeahead/core/geolocation/message/GeolocationClearedMessage","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionAutoSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/SearchParametersUpdater","typeahead/core/SuggestionFactory"],function(e,t,n,o,i,r,a,s,l,u,c,p){"use strict";t.__esModule=!0;var d=function(e){function t(t){var n=e.call(this,t)||this;return n.geolocationDataProvider=t,u.TypeaheadMessage.subscribe(s.SubmitClickedMessage.getTopic(),function(e,t){n.isGeolocationSuggestionSelected(n.getVisibleTypeaheadDivElement())&&(n.isGeolocationAvailable()?n.disableLocalStorage():(t.getEvent()&&t.getEvent().preventDefault(),n.geolocationDataProvider.findGeolocation(n.getDomElementId(),$(t.getEvent().currentTarget))))}),u.TypeaheadMessage.subscribe(a.FormSubmittedMessage.getTopic(),function(e,t){if(t.isFormValid()&&n.isGeolocationSuggestionSelected(n.getVisibleTypeaheadDivElement())){var o=$("form:has(input[data-provide=utypeahead]):visible");o.append($("<input>").attr("type","hidden").attr("name","sort").val("distance"))}}),u.TypeaheadMessage.subscribe(r.GeolocationClearedMessage.getTopic(),function(e,t){n.updateSearchParameters(t.getGeolocationResult(),$("#"+n.getDomElementId()))}),n}return __extends(t,e),t.prototype.handlePageLoad=function(e){var t=this;this.geolocationDataProvider.fetchData(void 0).done(function(n){var o=n.results[0],i=$("form[data-lob-form="+e+"]").find("input[name=destination]"),r=i.closest("div.autocomplete");r.length&&(i.val()&&!t.isGeolocationCategory(r)||(i.val(o.regionNames.lastSearchName),t.updateSearchParameters(o,i),u.TypeaheadMessage.publish(new l.SuggestionAutoSelectedMessage(p.createSuggestion(o),i.attr("id")))))})},t.prototype.isGeolocationAvailable=function(){return this.getVisibleTypeaheadDivElement().find("[id*=lat_long]").val()},t.prototype.updateSearchParameters=function(e,t){c.updateForSuggestion(void 0,p.createSuggestion(e),t.data(),t.attr("id"))},t.prototype.isGeolocationCategory=function(e){return o.GeolocationDataProvider.CATEGORY===e.find("[id*=category]").val()},t.prototype.isGeolocationSuggestionSelected=function(e){return o.GeolocationDataProvider.CATEGORY===e.find("[id*=region_type]").val()},t.prototype.getVisibleTypeaheadDivElement=function(){return this.getDomElementId()?$("#"+this.getDomElementId()).closest("div.autocomplete"):$("div.autocomplete:visible")},t.prototype.disableLocalStorage=function(){this.getVisibleTypeaheadDivElement().find(".gcw-storeable").not("[id*=category]").each(function(e,t){$(t).removeClass("gcw-storeable");
})},t}(i.GeolocationViewController);t.MercuryGeolocationViewController=d});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/google/AddressAutocompleteFailureMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(e){function t(t,n,o,i,r){var a=e.call(this,t,n,"AddressAutocompleteFailure",r)||this;return a.userTypedQuery=o,a.status=i,a}return __extends(t,e),t}(n.TypeaheadMetric);t.AddressAutocompleteFailureMetric=o}),define("typeahead/core/google/GoogleMapsDataProvider",["require","exports","typeahead/core/EssDataProvider","typeahead/core/google/AddressAutocompleteFailureMetric","typeahead/core/google/PoweredByGoogleLogo","typeahead/core/IListItem","typeahead/core/logging/CollectorTransport","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/Suggestion"],function(e,t,n,o,i,r,a,s,l,u,c){"use strict";t.__esModule=!0,$.getScript("https://maps.googleapis.com/maps/api/js?client=gme-expedia&channel=ess&libraries=places");var p=function(){function e(){}return e.getSuggestionResult=function(t,n){return{category:c.SuggestionCategory[c.SuggestionCategory.GOOGLEMAPS],coordinates:void 0,listItemType:r.ListItemType.Suggestion,regionNames:{displayName:e.boldMatchedSubStringInPrediction(t),fullName:t.description,lastSearchName:t.description},sourceId:t.place_id,sourceName:"GPA",type:"ADDRESS",index:n}},e.boldMatchedSubStringInPrediction=function(e){for(var t,n=e.description,o="",i=0,r=e.matched_substrings,a=0;a<r.length;a++)t=r[a],o+=n.slice(i,t.offset),o+="<B>"+n.slice(t.offset,t.offset+t.length)+"</B>",i=t.offset+t.length;return o+n.slice(i)},e.prototype.fetchData=function(e){var t=this,o=$.Deferred(),i={input:e.srchText,types:n.GoogleRequestType[n.GoogleRequestType.ADDRESS_AUTOCOMPLETE]===e.requestType?["geocode"]:void 0};return google&&google.maps&&google.maps.places&&google.maps.places.AutocompleteService?this.getGoogleAutocompleteService().getPlacePredictions(i,function(n,i){t.handlePredictionsResponse(n,i,e,o)}):u["default"].log(new Error("Google maps script not loaded"),l.Severity.Excusable,s.ProblemOrigin.UniversalTypeahead),o.promise()},e.prototype.getGoogleAutocompleteService=function(){return this.googleAutocompleteService||(this.googleAutocompleteService=new google.maps.places.AutocompleteService),this.googleAutocompleteService},e.prototype.handlePredictionsResponse=function(t,n,i,r){var s=[];if(n===google.maps.places.PlacesServiceStatus.OK){if(t)for(var l=Math.min(e.MAX_RESULTS,t.length),u=0;u<l;u++)s.push(e.getSuggestionResult(t[u],u))}else(new a.CollectorTransport).log(new o.AddressAutocompleteFailureMetric(i.lob,i.domElementId,i.srchText,google.maps.places.PlacesServiceStatus[n],i.activeEssTests));s&&s.length&&s.push(this.getPoweredByGoogleListItem()),r.resolve({query:i.srchText,results:s})},e.prototype.getPoweredByGoogleListItem=function(){var e=function(){return"<div style='text-align:right;position:relative;top:0.5em;'><img src='"+i.POWERED_BY_GOOGLE_LOGO+"'/></div>"};return new r.LabelTypeListItem(e())},e.MAX_RESULTS=5,e}();t.GoogleMapsDataProvider=p});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/google/GoogleMapsSuggestion",["require","exports","typeahead/core/Suggestion","typeahead/core/util/Optional"],function(e,t,n,o){"use strict";t.__esModule=!0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getSourceName=function(){return o.Optional.of(this.data.sourceName)},t.prototype.getSourceId=function(){return o.Optional.of(this.data.sourceId)},t.prototype.shouldTriggerDomElementChangeOnSelection=function(){return!0},t.prototype.isAddrAutoComplete=function(){return!0},t}(n.Suggestion);t.GoogleMapsSuggestion=i}),define("typeahead/core/google/PoweredByGoogleLogo",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.POWERED_BY_GOOGLE_LOGO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAASCAYAAAC0PldrAAAIHElEQVR4Ae3ZBXDbWB7H8efglpmZGW0HlhzJDpSZmZkZ3W3s2DpmZmbmKx0zM/NdoGhotxTf9x9LHY027paW85v5bBRQopn32weqasqzk5Jw7BE9nHijHo5/Rw/HfqaHYl/keldZ8GJ7qBeqZ/6PNGlPUT5DeVKNqkyc18PJ6VDPtfEfnvUJz0dmpbwfmzMW6k5YFy96pBRTkCnL4MUDiy94oS0F+ZVZlD/5qxLLfNFkz0D0fBtfKOkpCcffrFfG6vVQ4hDUc6ypQLdDFmMdMiWIcjywaOHEB8zynPEFa1pCOWnHLw2Bej5oKtDzqEC+cGyoWZ5YaTDeGer57r4LRPLRCi40liy0QR4eVB5CG2QhU3KQneG+TM/qQhvk424L1Bwt73P22d9QoFD8bVB3KxVUWTX+gqW1mvvLtbr7Z7V+z6frNM/UlFIuKAD83I2v5y69eiL3y9dPZP/s2tdyPn39ZN7UVEq5oCz8x+WvjC/SQrEv8/u/z/O9siSUKNfC8agWSbrRaIH+p3lH1Pg976jxe38gz8JzzLM/g2QhpmIuIjCwB/0cg6HjGAxEsQQtIZmCtbBnLbY4BngZptkGaQmiMHAUhbCyEJMxCxGsh6QFltruOwIv7BmEfTAQwWwsvYMCTcMqGKat6AJJCXYjD1ZcWIdZsEdK8K50gZLroez4+l4G8j1PURlfAJWaMye7Vvd+otbvTVVr7hvVmvc/ci0YyNdAidTHVPa1EzmfuH4iN0WBbnD9H7lu8PXc10CJYDCVxanvffI8nAZvloQTNenZMXYt/YyJ5Y3tgar9nkCt5n2y4Tl073+5TprPEIYSknW2ARpkWosQOkFSiijK0BtuHME2ZGMMDLSDpBMMU29bYaIYBxfW4wBGojcmw8BIWM8Vwjq40QMubMR+231TYGAYJN1QhVUYgEHYgMgdFCiCBeiLYdiJI2iO9og6St4XBgZnKpAWjm2AsmNZO+E8jdlnqzrdvS49aO4fndWLekDVlbmHMoB/MQewAorCrDML86P6E816QD35lbyhzER/SZcouwJKq0oskd9PSX9aVnm5F1RJVbKQr13IVKCU251b7Xf/WwpcqxfMkVnngm9MW+sZ6gJeD24N1BHkwUouDmI28hDGBNjTDwZGIR9hFEOiYyu2YRIkY1GFhzAABvrCnpVYbyvQAeTAyiBHKa2sNUnmY5/jvnwcvYMCbXDMmG1QBR2SJdhu+5l52NXYMsqA7EsXI/5OKBvEhnMKK7LwtePpgYy9HIpB+lbDIGmFbihLTcAzs6FAuueDUJTkW0hdO5XrhrJc/1reTPk6BfsgZMY7iZS/KumFsmihxIFMBaoNeHxmiT/6H5+7Y41esJcl7K/pmdD9N64n4tZALYQzs7EDvTMMmgtBW7GWYyUk26DDj/1wYYHt+z7bUhixMXDMVqDFznG5zX1HIdmDGbDnTvdAGpzZhGWO/2n6ojnCKIIzDNClwQ1LRmU8ETCS3aEysU5r7FHmQckAyUD9sWJgPpSlNlA4SL7O0vJNqGtfz/6bFKX+SyofyvLk1/IGNcxAX8v9JpS8QpDfX/Ha+nwoC8vplIwFYq/TUFbN+w9Zxqr93vpq3fOFWn/BJFlioYQ1UEvgzHxsRQ8Y6NdIgY6jDBI3wugGA53QxVa+IAogeQwR9EB3h27IVGwfqjLc1xWSnZgNZ5bdQYECcGabrcgubMUCPIZjtztQWPsOZpjvPRq52A7KSatKTpV3QfxcXenL61tASUFk8M7q7gIoiywl6UF1fwBKCmLONAVQlhsn8+aYX/8AVEll4pQ8h7x7grLIRj9TgWo0z8Ppsnqv1eqeyP98hX2hZClrrEDH0QpWWuIYJiMbQcx1TNWjYWCQbY8TwQbshJXdWI+obdPdEwbGwJ7ipylQH2vZdN5nK9AMHEVzx1JUeQcF2uVY+rojimJYGY8q7MdEZIy8MGTwfmHuhf5JkTbJex/fyxJdtcpLDzNob5JNrbn/mQMl2ECvNpeKn1sDV6MVjGEz/U9zWSmFYuO82tzr/PzK6fy+UFdP5o6hNP9M742ySyFL1VJrDxSIXu4NJUunvAXPVCApCfufP5p7rg1y2pMZkeswX/u+zIawF0jtwyOmvThiK5UXBhbDgwkIY7mjVKthoBRWymE0MngLbXsrN+bbS5WhQC4sRggVjvtGQ9IWQexGMR7BfjxxBwV6AptRgBIcxU7kwkoODiOCtrhtZOZhkD52m3/KiFGs+VCAdYT3fsicAer5WIcU4DGghPzcta/nfKjhFPa13HrUybW5fBlQQk5hWmXi/fL3rNnuTk5hdX6Pl79/wTwNXrJOYbIXOh9w98atgVqAx7EPx7AUHWDPSGy2la0MOY38zCp0gZWuWNXIbJONAPYhhK0YDSsTocGZbJRmuM9KJ6zAceyHD489zYyxCGMwGYdts24LOLMWi3DHkQ0sg/QqWU5KwvEf4HPMDHseDcc6QTnJUiH7EGajz8g7GPYiH2EWKoOyk/c9vAeax6zzGcryAz5+5PrJ7DIoO37QxTufhRT0C+zLvst11FrC5JQG5f7IrJd5Pjzzx56Pzh4CJc76CnryHugVPMe3OcqfYTkLymkMCpk30RnTlG62jfQLIr5gKkf+wVY29lAWWULTM2HsMah70VSgu888bIULL4hw2pqRPhEmfiMbadmbyWzE/utqSSj2nznBVB7UvWgq0N2lLSIYhxdOWL5k+Xzq/it2mdcGAah7ZV00eQlgxvFRpNfJeyc+Bn2RK32h7sf/AesqcHB02e65AAAAAElFTkSuQmCC"}),define("typeahead/core/logging/CollectorTransport",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.prototype.log=function(e){this.sendLog(e,"typeahead_client_metrics")},e.prototype.logPerformanceMetric=function(e){this.sendLog(e,"typeahead_performance")},e.prototype.sendLog=function(e,t){var n=!0;_.isArray(e)||(n=!1);var o="//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/cl/data/"+t+".json?stream=true&persist=true&batch="+(n?"true":"false");$.ajax({contentType:"application/json; charset=UTF-8",url:o,data:JSON.stringify(e),dataType:"json",type:"POST"})},e}();t.CollectorTransport=n}),define("typeahead/core/logging/DctkClientLogErrorTransport",["require","exports","underscore","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity"],function(e,t,n,o,i){"use strict";t.__esModule=!0;var r=function(){function t(){}return t.prototype.log=function(t,r,a,s){var l=this;void 0===s&&(s={});try{if(!n.isObject(s)){var u=s;s={},s.additional_info=u}r&&(s.severity=i.Severity[r]),a&&(s.problemOrigin=o.ProblemOrigin[a]),this.clientLogger?this.doClientLogging(t,r,s):e(["dctk/clientLogging","dctk/dctk"],function(e,n){l.clientLogger=e,l.doClientLogging(t,r,s)})}catch(t){}},t.prototype.doClientLogging=function(e,t,o){this.clientLogger?i.Severity.MustFix===t?this.clientLogger.logError("UniversalTypeahead",e,o):(e&&(o.message=e.message,o.name=e.name,o.stack=e.stack),this.clientLogger.logMessage("UniversalTypeahead",o)):console&&n.isFunction(console.error)&&console.error(e)},t}();t.DctkClientLogErrorTransport=r}),define("typeahead/core/logging/Element",["require","exports","typeahead/core/Suggestion","typeahead/core/util/Optional","typeahead/core/IListItem"],function(e,t,n,o,i){"use strict";t.__esModule=!0;var r=function(){function e(e){void 0===e&&(e=""),this.domElementId=e,this.value="",this.mostRecentSelection=o.Optional.empty(),this.mostRecentInputValue="",this.essSuggestionCount=0,this.userHistorySuggestionCount=0,this.elementFocused=!1,this.suggestionShown=!1,this.suggestionSelected=!1,e&&(this.value=$("#"+e).val()||"")}return e.prototype.setElementFocused=function(){this.elementFocused=!0},e.prototype.setSuggestionShown=function(e){this.suggestionShown=!0,this.setSuggestionCount(e)},e.prototype.setSuggestionSelected=function(e){this.suggestionSelected=!0,this.mostRecentSelection=o.Optional.of(e),this.value=e.getDisplayText()},e.prototype.setMostRecentInputValue=function(e){this.suggestionSelected=!1,this.mostRecentInputValue=e,this.mostRecentSelection=o.Optional.empty(),this.value=e},e.prototype.isSuggestionShown=function(){return this.suggestionShown},e.prototype.isSuggestionSelected=function(){return this.suggestionSelected},e.prototype.getMostRecentInputValue=function(){return this.mostRecentInputValue},e.prototype.getEssSuggestionCount=function(){return this.essSuggestionCount},e.prototype.getUserHistorySuggestionCount=function(){return this.userHistorySuggestionCount},e.prototype.getMostRecentSelection=function(){return this.mostRecentSelection},e.prototype.getVal=function(){return this.value},e.prototype.setSuggestionCount=function(e){var t=this;this.userHistorySuggestionCount=0,this.essSuggestionCount=0,e&&e.forEach(function(e){if(i.ListItemType.Label!==e.listItemType)switch(e.category){case n.SuggestionCategory[n.SuggestionCategory.USERHISTORY]:t.userHistorySuggestionCount++;break;case n.SuggestionCategory[n.SuggestionCategory.GEOLOCATION]:break;case n.SuggestionCategory[n.SuggestionCategory.GOOGLEMAPS]:break;default:t.essSuggestionCount++}})},e}();t.Element=r}),define("typeahead/core/logging/ErrorLogger",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e){this.transport=e}return e.prototype.log=function(e,t,n,o){void 0===o&&(o={});try{this.transport.log(e,t,n,o)}catch(i){console&&_.isFunction(console.error)&&console.error(i)}},e}();t.ErrorLogger=n}),define("typeahead/core/logging/ErrorTransport",["require","exports"],function(e,t){"use strict";t.__esModule=!0}),define("typeahead/core/logging/FlightOriginPopulationLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/FlightOriginPopulationMetric","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/OriginPopulationMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/TypeaheadUtils"],function(e,t,n,o,i,r,a,s,l){"use strict";t.__esModule=!0;var u=function(){function e(){var e=this;this.isAkamaiPopulated=!1,this.isOriginChanged=!1,s.TypeaheadMessage.subscribe(i.InputValueEditedMessage.getTopic(),function(t,n){n.getDomElementId()&&n.getDomElementId().indexOf("flight-origin")!==-1&&(e.isOriginChanged=!0)}),s.TypeaheadMessage.subscribe(r.OriginPopulationMessage.getTopic(),function(t,n){e.isAkamaiPopulated=!0}),s.TypeaheadMessage.subscribe(a.SubmitClickedMessage.getTopic(),function(t,n){l.TypeaheadUtils.getLob()===l.Lob.Flight&&e.emitOriginPopulationMetric()})}return e.prototype.emitOriginPopulationMetric=function(){(new n.CollectorTransport).log(new o.FlightOriginPopulationMetric(this.isAkamaiPopulated,this.isOriginChanged))},e}();t.FlightOriginPopulationLogger=u}),define("typeahead/core/logging/FlightOriginPopulationMetric",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t){this.isAkamaiPopulated=e,this.isOriginChanged=t,this.type="flightOriginPopulation"}return e}();t.FlightOriginPopulationMetric=n}),define("typeahead/core/logging/Leg",["require","exports","typeahead/core/logging/Element","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(e,t,n,o,i,r){"use strict";t.__esModule=!0;var a=function(){function e(){}return e.isOrigin=function(e){return e=e.toLowerCase(),e.indexOf("origin")>-1||e.indexOf("from")>-1||e.indexOf("departure")>-1||e.indexOf("drop")>-1},e.isDestination=function(e){return e=e.toLowerCase(),e.indexOf("dest")>-1||e.indexOf("to")>-1||e.indexOf("arrival")>-1||e.indexOf("near")>-1||e.indexOf("pick")>-1||0===e.indexOf("location")||e.indexOf("uta-search-query")>-1},e.prototype.getElement=function(t){var a=e.isOrigin(t),s=e.isDestination(t);if(t){if(a)return this.origin||(this.origin=new n.Element(t)),this.origin;if(s)return this.destination||(this.destination=new n.Element(t)),this.destination}return a||s||r["default"].log(new Error("Could not determine origin or destination type for domElementId - "+t),i.Severity.MustFix,o.ProblemOrigin.ClientOfUniversalTypeahead),t?new n.Element(t):new n.Element},e.prototype.getOriginElement=function(){return this.origin?this.origin:this.getElement("origin")},e.prototype.getDestinationElement=function(){return this.destination?this.destination:this.getElement("destination")},e}();t.Leg=a}),define("typeahead/core/logging/OmnitureLogger",["require","exports","typeahead/core/logging/Element","typeahead/core/logging/Leg","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionAutoSelectedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/Suggestion","typeahead/core/TypeaheadUtils","typeahead/core/util/Optional"],function(e,t,n,o,i,r,a,s,l,u,c,p,d,g,h,f,y,m){"use strict";t.__esModule=!0;var v=function(){function e(){var e=this;this.rfrrIdPrefix="",this.isAutoSelected=!1,this.resetLoggerState(),h.TypeaheadMessage.subscribe(s.ElementFocusedMessage.getTopic(),function(t,n){e.getElement(n.getDomElementId()).setElementFocused()}),h.TypeaheadMessage.subscribe(g.SuggestionShownMessage.getTopic(),function(t,n){e.getElement(n.getDomElementId()).setSuggestionShown(n.getShownSuggestions()),e.mostRecentElementInteracted=m.Optional.of(e.getElement(n.getDomElementId())),e.activeESSTests=n.getActiveESSTests()}),h.TypeaheadMessage.subscribe(u.InputValueEditedMessage.getTopic(),function(t,n){e.getElement(n.getDomElementId()).setMostRecentInputValue(n.getNewInputValue()),n.getNewInputValue()&&(e.mostRecentElementInteracted=m.Optional.of(e.getElement(n.getDomElementId())))}),h.TypeaheadMessage.subscribe(p.SuggestionAutoSelectedMessage.getTopic(),function(t,n){e.getElement(n.getDomElementId()).setSuggestionSelected(n.getSuggestion()),e.isAutoSelected=!0}),h.TypeaheadMessage.subscribe(d.SuggestionSelectedMessage.getTopic(),function(t,n){e.getElement(n.getDomElementId()).setSuggestionSelected(n.getSuggestion()),e.mostRecentElementInteracted=m.Optional.of(e.getElement(n.getDomElementId()))}),h.TypeaheadMessage.subscribe(c.SubmitClickedMessage.getTopic(),function(t,n){e.rfrrIdPrefix=n.getRfrrIdPrefix()}),h.TypeaheadMessage.subscribe(l.FormSubmittedMessage.getTopic(),function(t,n){e.submitTrackingData(n)})}return e.getLegIndex=function(e){var t=e.replace(/\D/g,"");return t?parseInt(t,10)-1:0},e.getBasicReport=function(t,n,o,i,r,a,s,l){var u=[e.getLaunchView(a),e.getWizardName(t,a),e.getTab(n),e.getShortLob(n,o,i,r),s,l];return _.compact(u).join("|")},e.getWizardName=function(e,t){var n;if(e)switch(e){case"FLT.SR|UpdateSearch":n="UpdateSearch";break;case"HOT.SR|UpdateSearch":n="UpdateSearch";break;case"Open.Search|UpdateSearch":n="UpdateSearch";break;default:n="CoreWzd"}else if(t)switch(t){case"Flights.Search":n="UpdateSearch";break;case"Hotels.Search":n="UpdateSearch";break;default:n="CoreWzd"}return n},e.getShortLob=function(e,t,n,o){switch(e){case y.Lob.Flight:switch(t){case y.FlightType.OneWay:return"F.OW";case y.FlightType.RoundTrip:return"F.RT";case y.FlightType.MultiDestination:return"F.MD";default:return"-"}case y.Lob.Hotel:return"H";case y.Lob.VacationRental:return"VR";case y.Lob.Package:switch(n){case y.PackageType.FlightHotelCar:return"FHC";case y.PackageType.HotelCar:return"HC";case y.PackageType.FlightCar:return"FC";case y.PackageType.FlightHotel:return"FH";default:return"-"}case y.Lob.Activity:return"LX";case y.Lob.Rail:switch(o){case y.RailType.OneWay:return"R.OW";case y.RailType.RoundTrip:return"R.RT";default:return"-"}case y.Lob.Cruise:return"CR";case y.Lob.Car:return"C";case y.Lob.OpenSearch:return"OS";default:return"-"}},e.getLaunchView=function(e){return e=e.toLowerCase(),e.indexOf("home")>-1?"Home":e.indexOf("flight")>-1?"FLT":e.indexOf("hotels.search")>-1?"HOT.SR":e.indexOf("hotel")>-1?"HTL":e.indexOf("vacationrental")>-1?"VR":e.indexOf("pack")>-1?"PKG":e.indexOf("car")>-1?"CAR":e.indexOf("cru")>-1?"CRU":e.indexOf("lx")>-1?"LX":e.indexOf("rail")>-1?"RAIL":e.indexOf("open")>-1?"OPEN":e},e.getTab=function(e){switch(e){case y.Lob.Flight:return"Flights";case y.Lob.Hotel:return"Hotels";case y.Lob.Package:return"Package";case y.Lob.Car:return"Car";case y.Lob.Cruise:return"Cruise";case y.Lob.Activity:return"Activity";case y.Lob.Rail:return"Rails";case y.Lob.VacationRental:return"VacationRental";case y.Lob.OpenSearch:return"OpenSearch";default:return"Unknown"}},e.getSuggestionInfo=function(t){return t.getSourceName().orElse("-")+":"+t.getSourceId().orElse("-")+"|"+t.getType().orElse("-")+"|R#"+t.getRelationInfo().orElse("-")+"|"+t.getRegionNames().orElse(e.emptyRegionNames).lastSearchName+(e.isSuggestionInCategory(t,f.SuggestionCategory.USERHISTORY)?"|"+f.SuggestionCategory[f.SuggestionCategory.USERHISTORY]:"")},e.isSuggestionInCategory=function(e,t){return f.SuggestionCategory[t]===e.getCategory().orElse("")},e.getMultiFlightSuggestionInfo=function(e){return e.getSourceName().orElse("-")+":"+e.getSourceId().orElse("-")+"|"+e.getType().orElse("-")},e.prototype.setMostRecentElementInteracted=function(e){this.mostRecentElementInteracted=e},e.prototype.getElement=function(t){var n=e.getLegIndex(t);return this.legs[n]||(this.legs[n]=new o.Leg),this.legs[n].getElement(t)},e.prototype.getEvar48=function(t,n){if(t===y.Lob.Flight&&n===y.FlightType.MultiDestination)return this.getMultiFlightEvar48();var o="",i=this.legs[0].getDestinationElement();if(i.getMostRecentSelection().isPresent())o=e.getSuggestionInfo(i.getMostRecentSelection().get());else{var r=i.getVal();o="-:-|-|R#-|"+(r||"TANoneSelected")}return o},e.prototype.getProp73=function(t,n,o){if(y.Lob.Flight===t&&n===y.FlightType.MultiDestination)return this.getMultiFlightProp73();if(this.isFlightInvolved(t,o)||y.Lob.Car===t||y.Lob.Rail===t){var i="",r=this.legs[0].getOriginElement();if(r.getMostRecentSelection().isPresent())i=e.getSuggestionInfo(r.getMostRecentSelection().get());else{var a=r.getVal();i="-:-|-|R#-|"+(a||"TANoneSelected")}return i}return y.Lob.Hotel===t||y.Lob.Activity===t||y.Lob.Package===t&&o===y.PackageType.HotelCar?"-:-|-|R#-|OriginNotApplicable":""},e.prototype.getProp74=function(t,n){var o='"'+this.mostRecentElementInteracted.orElse(e.emptyElement).getMostRecentInputValue()+'"';if(t===y.Lob.Flight&&n===y.FlightType.MultiDestination){for(var i=[],r=[],a=0,s=this.legs;a<s.length;a++){var l=s[a];i.push(l.getOriginElement().getVal()),r.push(l.getDestinationElement().getVal())}o+="."+i.join("#")+"."+r.join("#")}return o},e.prototype.getTypeaheadTrigger=function(){var e="";return this.mostRecentElementInteracted.isPresent()?this.mostRecentElementInteracted.get().isSuggestionShown()?(e="TAShow",e+=this.mostRecentElementInteracted.get().isSuggestionSelected()?this.mostRecentElementInteracted.get().getMostRecentInputValue()?".TASelection":".TAFocus":this.mostRecentElementInteracted.get().getMostRecentInputValue()||!this.mostRecentElementInteracted.get().getVal()?".TANoSelection":".TAPrevSearch"):(e="TANoShow",this.mostRecentElementInteracted.get().getMostRecentInputValue()||(e+=".TAPrevSearch")):e=this.isAutoSelected?"TANoShow.TAAutoSelection":"TANoShow.TAPrevSearch",e},e.prototype.getEventString=function(){if(this.mostRecentElementInteracted.isPresent()&&this.mostRecentElementInteracted.get().isSuggestionShown()){var e=this.mostRecentElementInteracted.get().getMostRecentInputValue(),t="event45";return t=e?"event46="+e.length+","+t:"event46=0,"+t,this.mostRecentElementInteracted.get().getMostRecentSelection().isPresent()&&(t="event44="+this.mostRecentElementInteracted.get().getMostRecentSelection().get().getPosition()+","+t),t}return""},e.prototype.getHierarchyCode=function(){return this.mostRecentElementInteracted.orElse(e.emptyElement).getMostRecentSelection().isPresent()?this.mostRecentElementInteracted.get().getMostRecentSelection().get().getHierarchyCode():"DL#-"},e.prototype.getSelectedSuggestionPostion=function(){return this.mostRecentElementInteracted.orElse(e.emptyElement).getMostRecentSelection().isPresent()?this.mostRecentElementInteracted.get().getMostRecentSelection().get().getPosition().toString():"-"},e.prototype.getInstrumentationValue=function(t){return _.compact([_.contains([y.Lob.Flight,y.Lob.Hotel],t)?this.getHierarchyCode():"L#"+this.getSelectedSuggestionPostion(),"ESS#"+this.mostRecentElementInteracted.orElse(e.emptyElement).getEssSuggestionCount()]).join("|")},e.prototype.getTADetails=function(e){var t=this.getTypeaheadTrigger(),n=this.getInstrumentationValue(e),o=[t,n];return _.compact(o).join("|")},e.prototype.getTrackingData=function(e,t){var n,o=y.TypeaheadUtils.getLob(),i=y.TypeaheadUtils.getFlightType(o),r=y.TypeaheadUtils.getRailType(o),a=y.TypeaheadUtils.getPackageType(),s=y.TypeaheadUtils.getClientId();return n=e?this.getValidFormTrackingdata(t,o,i,a,r,s):this.getInvalidFormTrackingdata(t,o,i,a,r,s)},e.prototype.submitTrackingData=function(e){try{var t=e.getContext();if(e.isFormValid()){var n=this.getTrackingData(!0,t);y.TypeaheadUtils.submitToOmniture(n,this.activeESSTests),this.resetLoggerState()}else{var n=this.getTrackingData(!1,t);y.TypeaheadUtils.submitToOmniture(n,null),this.resetLoggerState()}}catch(o){a["default"].log(new Error("Error occurred while submitting typeahead tracking data to Omniture"),r.Severity.Excusable,i.ProblemOrigin.UniversalTypeahead,"StackTrace:\n"+o.stack),console.error("Error occurred while submitting typeahead tracking data to Omniture.\nCause:\n"+o.stack)}},e.prototype.resetLoggerState=function(){this.mostRecentElementInteracted=m.Optional.empty(),this.legs=[new o.Leg],this.activeESSTests=""},e.prototype.getValidFormTrackingdata=function(t,n,o,i,r,a){this.populateNonInteractedElements();var s="";s=this.rfrrIdPrefix?this.rfrrIdPrefix+"|"+e.getTab(n)+"|"+e.getShortLob(n,o,i,r)+"|"+t.locale+"|"+t.siteid:e.getBasicReport(this.rfrrIdPrefix,n,o,i,r,a,t.locale,t.siteid);var l,u=s+"|"+this.getTADetails(n);return l={eVar28:u,eVar48:this.getEvar48(n,o),eventString:this.getEventString(),prop16:u,prop73:this.getProp73(n,o,i),prop74:this.getProp74(n,o)}},e.prototype.getInvalidFormTrackingdata=function(t,n,o,i,r,a){var s;if(this.rfrrIdPrefix){var l=this.rfrrIdPrefix+"|"+e.getShortLob(n,o,i,r)+"|"+t.locale+"|"+t.siteid+"|Form-Invalid";s={eVar28:l,prop16:l}}else{var l=e.getBasicReport(this.rfrrIdPrefix,n,o,i,r,a,t.locale,t.siteid)+"|Form-Invalid";s={eVar28:l,prop16:l}}return s},e.prototype.getMultiFlightEvar48=function(){for(var t="",n=0,o=this.legs;n<o.length;n++){var i=o[n];t+=(i.getDestinationElement().getMostRecentSelection().isPresent()?e.getMultiFlightSuggestionInfo(i.getDestinationElement().getMostRecentSelection().get()):"-:-|-")+"#"}return t.slice(0,-1)},e.prototype.getMultiFlightProp73=function(){for(var t="",n=0,o=this.legs;n<o.length;n++){var i=o[n];t+=(i.getOriginElement().getMostRecentSelection().isPresent()?e.getMultiFlightSuggestionInfo(i.getOriginElement().getMostRecentSelection().get()):"-:-|-")+"#"}return t.slice(0,-1)},e.prototype.populateNonInteractedElements=function(){var e=this;$("input[data-provide=utypeahead]:visible").each(function(t,n){var o=$(n).attr("id");e.getElement(o)})},e.prototype.isFlightInvolved=function(e,t){return y.Lob.Flight===e||y.Lob.Package===e&&(y.PackageType.FlightCar===t||y.PackageType.FlightHotelCar===t||y.PackageType.FlightHotel===t)},e.emptyRegionNames={fullName:"-",lastSearchName:"-"},e.emptyEssId={sourceId:"-",sourceName:"-"},e.emptyElement=new n.Element,e}();t.OmnitureLogger=v}),define("typeahead/core/logging/PerformanceMetrics",["require","exports","typeahead/core/abTest","typeahead/core/TypeaheadUtils"],function(e,t,n,o){"use strict";t.__esModule=!0;var i=function(){function e(){this.entries=[],this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING=10,this.METRIC_NAME="UtaPerformanceMetric"}return e.getAdditionalMetric=function(){return{deviceType:o.TypeaheadUtils.getDeviceType(),guid:o.TypeaheadUtils.getGuid(),lob:o.Lob[o.TypeaheadUtils.getLob()],locale:o.TypeaheadUtils.getLocale(),pageId:o.TypeaheadUtils.getPageId(),pointOfSale:o.TypeaheadUtils.getPointOfSale(),siteId:o.TypeaheadUtils.getSiteId(),userAgent:navigator.userAgent}},e.prototype.logRequest=function(e,t,n){var o={inputElementId:t,query:n,timestamp:Date.now(),triggerType:e};this.entries.push({request:o})},e.prototype.logResponse=function(e,t,n,o){var i=this.getRequestMetricEntry(e,t);if(i){var r=Date.now();i.response={inputElementId:e,latency:r-i.request.timestamp,query:t,suggestionCount:n,timestamp:r},!this.activeEssTests&&o&&(this.activeEssTests=o)}},e.prototype.getAggregatedMetric=function(){if(this.entries.length){for(var e={},t=this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING<this.entries.length?this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING:this.entries.length,i=0;i<t;i++){var r=this.entries[i];r.response&&(e["latency"+i]=r.response.latency)}e.latencyMedian=this.getMedianLatency();var a=this.getWorstLatencyMetric();e.queryWorst=a?this.getWorstLatencyMetric().response.query:void 0,e.latencyWorst=a?this.getWorstLatencyMetric().response.latency:void 0;var s=this.entries[this.entries.length-1];return e.queryLast=s.request.query,e.latencyLast=s.response?s.response.latency:void 0,e.totalTriggers=this.entries.length,e.totalSuccess=this.getSuccessMetrics().length,e.inputElementId=this.entries[0].request.inputElementId,e.lob=o.Lob[o.TypeaheadUtils.getLob()],e.variants=_.compact([n.getActiveClientTests(),this.activeEssTests]).join("|"),e.name=this.METRIC_NAME,e}},e.prototype.getAllEntries=function(){for(var t=[],n=0;n<this.entries.length;n++)t.push($.extend(this.entries[n].request,e.getAdditionalMetric())),this.entries[n].response&&t.push($.extend(this.entries[n].response,e.getAdditionalMetric()));return t},e.prototype.getRequestMetricEntry=function(e,t){for(var n=0;n<this.entries.length;n++){var o=this.entries[n];if(o.request.inputElementId===e&&o.request.query===t&&!o.response)return o}},e.prototype.getWorstLatencyMetric=function(){for(var e=void 0,t=0;t<this.entries.length;t++){var n=this.entries[t];n.response&&(!e||e.response.latency<n.response.latency)&&(e=n)}return e},e.prototype.getMedianLatency=function(){var e=void 0,t=this.getSuccessMetrics();if(t.sort(function(e,t){return e.response.latency-t.response.latency}),t.length){var n=Math.floor(t.length/2);e=t.length%2?t[n].response.latency:(t[n-1].response.latency+t[n].response.latency)/2}return e},e.prototype.getSuccessMetrics=function(){return this.entries.filter(function(e){return e.response})},e}();t.PerformanceMetrics=i}),define("typeahead/core/logging/PerformanceMetricsLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/PerformanceMetrics","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionReadyMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage"],function(e,t,n,o,i,r,a,s,l,u){"use strict";t.__esModule=!0;var c=function(){function e(){var e=this;this.TRIGGER_TYPE_FOCUS="focus",this.TRIGGER_TYPE_INPUT="input",this.metrics=new o.PerformanceMetrics,l.TypeaheadMessage.subscribe(r.ElementFocusedMessage.getTopic(),function(t,n){e.metrics.logRequest(e.TRIGGER_TYPE_FOCUS,n.getDomElementId(),"")}),l.TypeaheadMessage.subscribe(a.InputValueEditedMessage.getTopic(),function(t,n){""!==n.getNewInputValue()&&e.metrics.logRequest(e.TRIGGER_TYPE_INPUT,n.getDomElementId(),n.getNewInputValue())}),l.TypeaheadMessage.subscribe(s.SuggestionReadyMessage.getTopic(),function(t,n){e.metrics.logResponse(n.getDomElementId(),n.getQuery(),n.getSuggestions()?n.getSuggestions().length:0,n.getActiveEssTests())}),l.TypeaheadMessage.subscribe(u.UserExitedMessage.getTopic(),function(){e.emitMetrics()})}return e.prototype.resetLogger=function(){this.metrics=new o.PerformanceMetrics},e.prototype.emitMetrics=function(){this.emitToSplunk(),this.emitToCollector(),this.resetLogger()},e.prototype.emitToSplunk=function(){var e=this.metrics.getAggregatedMetric();e&&i["default"].log(void 0,void 0,void 0,e)},e.prototype.emitToCollector=function(){var e=this.metrics.getAllEntries();e&&e.length&&(new n.CollectorTransport).logPerformanceMetric(e)},e}();t.PerformanceMetricsLogger=c}),define("typeahead/core/logging/ProblemOrigin",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n;!function(e){e[e.Unspecified=0]="Unspecified",e[e.ExpediaSuggestService=1]="ExpediaSuggestService",e[e.UniversalTypeahead=2]="UniversalTypeahead",e[e.ClientOfUniversalTypeahead=3]="ClientOfUniversalTypeahead",e[e.DataCaptureToolkit=4]="DataCaptureToolkit"}(n=t.ProblemOrigin||(t.ProblemOrigin={}))}),define("typeahead/core/logging/ScanabilityLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/ScanabilityMetric","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,n,o,i,r,a){"use strict";t.__esModule=!0;var s=function(){function e(){var e=this;this.activeESSTests="",a.TypeaheadMessage.subscribe(r.SuggestionShownMessage.getTopic(),function(t,n){e.domElementId=n.getDomElementId(),e.lob=n.getLob(),e.activeESSTests=n.getActiveESSTests(),e.suggestionShownTimestamp=Date.now()}),a.TypeaheadMessage.subscribe(i.SuggestionSelectedMessage.getTopic(),function(t,n){e.domElementId&&(e.selectionMethod=n.getSelectionMethod(),e.suggestionSelectedTimestamp=Date.now(),e.emitScanabilityMetric(),e.domElementId=void 0,e.lob=void 0,e.selectionMethod=void 0,e.suggestionShownTimestamp=0,e.suggestionSelectedTimestamp=0)})}return e.prototype.emitScanabilityMetric=function(){(new n.CollectorTransport).log(new o.ScanabilityMetric(this.lob,this.domElementId,this.suggestionShownTimestamp,this.suggestionSelectedTimestamp,this.selectionMethod,this.activeESSTests));
},e}();t.ScanabilityLogger=s});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/logging/ScanabilityMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(e){function t(t,n,o,i,r,a){var s=e.call(this,t,n,"scan",a)||this;return s.latency=i-o,s.selectionMethod=r,s}return __extends(t,e),t}(n.TypeaheadMetric);t.ScanabilityMetric=o}),define("typeahead/core/logging/SelectionToSubmissionLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/SelectionToSubmissionMetric","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,n,o,i,r,a,s){"use strict";t.__esModule=!0;var l=function(){function e(){var e=this;this.activeESSTests="",s.TypeaheadMessage.subscribe(a.SuggestionShownMessage.getTopic(),function(t,n){e.activeESSTests=n.getActiveESSTests()}),s.TypeaheadMessage.subscribe(r.SuggestionSelectedMessage.getTopic(),function(t,n){e.domElementId=n.getDomElementId(),e.lob=n.getLob(),e.suggestionSelectedTimestamp=Date.now()}),s.TypeaheadMessage.subscribe(i.SubmitClickedMessage.getTopic(),function(t,n){e.domElementId&&(e.submitClickedTimestamp=Date.now(),e.emitSelectionToSubmissionMetric(),e.domElementId=void 0,e.lob=void 0,e.suggestionSelectedTimestamp=0,e.submitClickedTimestamp=0)})}return e.prototype.emitSelectionToSubmissionMetric=function(){(new n.CollectorTransport).log(new o.SelectionToSubmissionMetric(this.lob,this.domElementId,this.suggestionSelectedTimestamp,this.submitClickedTimestamp,this.activeESSTests))},e}();t.SelectionToSubmissionLogger=l});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/logging/SelectionToSubmissionMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(e){function t(t,n,o,i,r){var a=e.call(this,t,n,"selectionToSubmission",r)||this;return a.latency=i-o,a}return __extends(t,e),t}(n.TypeaheadMetric);t.SelectionToSubmissionMetric=o}),define("typeahead/core/logging/Severity",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n;!function(e){e[e.MustFix=0]="MustFix",e[e.Excusable=1]="Excusable",e[e.Negligible=2]="Negligible"}(n=t.Severity||(t.Severity={}))}),define("typeahead/core/logging/SuggestionEngagementLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/SuggestionEngagementMetric","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage","typeahead/core/TypeaheadUtils"],function(e,t,n,o,i,r,a,s,l,u,c){"use strict";t.__esModule=!0;var p=function(){function e(){var e=this;this.isSuggestionShown=!1,this.isSuggestionSelected=!1,this.userTypedQuery="",this.displayText="",this.activeESSTests="",l.TypeaheadMessage.subscribe(i.ElementFocusedMessage.getTopic(),function(t,n){e.lob=n.getContext().lob,e.domElementId=n.getDomElementId(),e.displayText=n.getElementValue()}),l.TypeaheadMessage.subscribe(s.SuggestionShownMessage.getTopic(),function(t,n){e.isSuggestionShown=!0,e.activeESSTests=n.getActiveESSTests()}),l.TypeaheadMessage.subscribe(r.InputValueEditedMessage.getTopic(),function(t,n){e.lob=n.getLob(),e.domElementId=n.getDomElementId(),e.isSuggestionSelected=!1,e.userTypedQuery=n.getNewInputValue(),e.displayText=n.getNewInputValue(),e.selectedSuggestion=void 0}),l.TypeaheadMessage.subscribe(a.SuggestionSelectedMessage.getTopic(),function(t,n){e.lob=n.getLob(),e.selectedSuggestion=n.getSuggestion()}),l.TypeaheadMessage.subscribe(u.UserExitedMessage.getTopic(),function(t,n){e.domElementId&&(e.emitSuggestionEngagementMetric(),e.domElementId=void 0,e.lob=void 0,e.isSuggestionShown=!1,e.isSuggestionSelected=!1,e.userTypedQuery="",e.displayText="",e.selectedSuggestion=void 0)})}return e.prototype.updatePackageType=function(){var e=function(e){switch(e){case c.PackageType.FlightHotelCar:return"FHC";case c.PackageType.HotelCar:return"HC";case c.PackageType.FlightCar:return"FC";case c.PackageType.FlightHotel:return"FH";default:return"-"}},t=c.TypeaheadUtils.getPackageType();t!==c.PackageType.Unknown&&(this.lob="PACKAGES:"+e(t))},e.prototype.emitSuggestionEngagementMetric=function(){this.updatePackageType(),(new n.CollectorTransport).log(new o.SuggestionEngagementMetric(this.lob,this.domElementId,this.userTypedQuery,this.displayText,this.isSuggestionShown,this.selectedSuggestion,this.activeESSTests))},e}();t.SuggestionEngagementLogger=p});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/logging/SuggestionEngagementMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(e){function t(t,n,o,i,r,a,s){var l=e.call(this,t,n,"SuggestionEngagement",s)||this;return l.suggestionShown=r,l.userTypedQuery=o,a?(l.suggestionSelected=!0,l.text=a.getDisplayText(),l.selectedSuggestionEssid=a.getSourceName().orElse("-")+":"+a.getSourceId().orElse("-"),l.isAddrAutocomplete=a.isAddrAutoComplete()):(l.suggestionSelected=!1,l.text=i,l.selectedSuggestionEssid=void 0),l}return __extends(t,e),t}(n.TypeaheadMetric);t.SuggestionEngagementMetric=o}),define("typeahead/core/logging/TypeaheadErrorLogger",["require","exports","typeahead/core/logging/DctkClientLogErrorTransport","typeahead/core/logging/ErrorLogger"],function(e,t,n,o){"use strict";t.__esModule=!0;var i=new o.ErrorLogger(new n.DctkClientLogErrorTransport);t["default"]={log:function(e,t,n,o){void 0===o&&(o={}),i.log(e,t,n,o)}}}),define("typeahead/core/logging/TypeaheadMetric",["require","exports","typeahead/core/TypeaheadUtils"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e,t,o,i){this.contentFlavor="uTA",this.deviceType=n.TypeaheadUtils.getDeviceType(),this.guid=n.TypeaheadUtils.getGuid(),this.lob=e,this.locale=n.TypeaheadUtils.getLocale(),this.pageId=n.TypeaheadUtils.getPageId(),this.pointOfSale=n.TypeaheadUtils.getPointOfSale(),this.siteId=n.TypeaheadUtils.getSiteId(),this.textInputElementId=t,this.timestamp=Date.now(),this.type=o,this.userAgent=navigator.userAgent,this.variants=_.compact([n.TypeaheadUtils.getClientSideExperimentVariants(),i]).join("|")}return e}();t.TypeaheadMetric=o}),define("typeahead/core/message/ElementFocusedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t,n){this.elementValue=e,this.domElementId=n,this.context=t}return e.getTopic=function(){return"typeahead.element_focused"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getElementValue=function(){return this.elementValue},e.prototype.getContext=function(){return this.context},e}();t.ElementFocusedMessage=n}),define("typeahead/core/message/FormLoadedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e){this.tab=e}return e.getTopic=function(){return"typeahead.form_loaded"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getTab=function(){return this.tab},e}();t.FormLoadedMessage=n}),define("typeahead/core/message/FormSubmittedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t,n){this.formValid=e,this.context=t,this.event=n}return e.getTopic=function(){return"typeahead.form_submitted"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.isFormValid=function(){return this.formValid},e.prototype.getContext=function(){return this.context},e.prototype.getEvent=function(){return this.event},e}();t.FormSubmittedMessage=n}),define("typeahead/core/message/InputClearedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e){this.$elem=e}return e.getTopic=function(){return"Input cleared"},e.prototype.getTopic=function(){return e.getTopic()},e}();t.InputClearedMessage=n}),define("typeahead/core/message/InputValueEditedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t,n){this.newInputValue=e,this.domElementId=n,this.lob=t}return e.getTopic=function(){return"typeahead.input_value_edited"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getNewInputValue=function(){return this.newInputValue},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getLob=function(){return this.lob},e}();t.InputValueEditedMessage=n}),define("typeahead/core/message/OriginPopulationMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.getTopic=function(){return"typeahead.origin_population"},e.prototype.getTopic=function(){return e.getTopic()},e}();t.OriginPopulationMessage=n}),define("typeahead/core/message/SubmitClickedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t){this.rfrrIdPrefix=e,this.event=t}return e.getTopic=function(){return"typeahead.submit_clicked"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getRfrrIdPrefix=function(){return this.rfrrIdPrefix},e.prototype.getEvent=function(){return this.event},e}();t.SubmitClickedMessage=n}),define("typeahead/core/message/SuggestionAutoSelectedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t){this.suggestion=e,this.domElementId=t}return e.getTopic=function(){return"typeahead.suggestion_auto_selected"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getSuggestion=function(){return this.suggestion},e.prototype.getDomElementId=function(){return this.domElementId},e}();t.SuggestionAutoSelectedMessage=n}),define("typeahead/core/message/SuggestionReadyMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t,n,o){this.query=e,this.suggestions=t,this.activeEssTests=n,this.domElementId=o}return e.getTopic=function(){return"typeahead.suggestion_ready"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getQuery=function(){return this.query},e.prototype.getSuggestions=function(){return this.suggestions},e.prototype.getActiveEssTests=function(){return this.activeEssTests},e.prototype.getDomElementId=function(){return this.domElementId},e}();t.SuggestionReadyMessage=n}),define("typeahead/core/message/SuggestionSelectedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t,n,o){this.suggestion=e,this.domElementId=o,this.lob=n,this.selectionMethod=t&&t.type?t.type.indexOf("mouse")>-1?"mouse":t.type.indexOf("key")>-1?"keyboard":t.type.indexOf("touch")>-1?"touch":"unknown":"unknown"}return e.getTopic=function(){return"typeahead.suggestion_selected"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getSuggestion=function(){return this.suggestion},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getSelectionMethod=function(){return this.selectionMethod},e.prototype.getLob=function(){return this.lob},e}();t.SuggestionSelectedMessage=n}),define("typeahead/core/message/SuggestionShownMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t,n,o,i,r){this.suggestions=e,this.domElementId=r,this.elementValue=t,this.lob=o,this.activeESSTests=n,this.renderTime=i}return e.getTopic=function(){return"typeahead.suggestion_shown"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getShownSuggestions=function(){return this.suggestions},e.prototype.getElementValue=function(){return this.elementValue},e.prototype.getLob=function(){return this.lob},e.prototype.getActiveESSTests=function(){return this.activeESSTests},e.prototype.getRenderTime=function(){return this.renderTime},e}();t.SuggestionShownMessage=n}),define("typeahead/core/message/TypeaheadMessage",["require","exports","uitk"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(){}return e.publish=function(e){n.publish(e.getTopic(),e)},e.subscribe=function(e,t){return n.subscribe(e,t)},e.unsubscribe=function(e,t){return n.unsubscribe(e,t)},e}();t.TypeaheadMessage=o}),define("typeahead/core/message/UserExitedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.getTopic=function(){return"typeahead.user_exited"},e.prototype.getTopic=function(){return e.getTopic()},e}();t.UserExitedMessage=n}),define("typeahead/core/plugins/CompositePageLoadHandler",["require","exports","typeahead/core/context","typeahead/client/ActivitiesSearchResultsPageHandler","typeahead/client/CarSearchResultsPageHandler","typeahead/client/ClientHandlerRegistry","typeahead/client/FlightSearchResultsPageHandler","typeahead/client/HotelSearchResultsPageHandler","typeahead/client/MercuryWizardHandler","typeahead/client/OpenSearchPageHandler","typeahead/core/abTest","typeahead/core/plugins/DefaultPluginAssembly","typeahead/core/TypeaheadUtils"],function(e,t,n,o,i,r,a,s,l,u,c,p,d){"use strict";t.__esModule=!0;var g=function(){function e(){}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.handlePageLoad=function(t){var o=$.Deferred();if(e.isPageLoadHandled)o.resolve(void 0);else{c.evaluateAllExperiments(t);var i={maxresults:10},r={clientId:d.TypeaheadUtils.getClientId(),deviceType:d.TypeaheadUtils.getDeviceType(),expuserid:d.TypeaheadUtils.getExpUserId(),guid:d.TypeaheadUtils.getGuid(),lob:void 0,locale:n.locale,serviceUrl:n.serviceUrl,siteid:n.siteid},a=t.get(p.DefaultPluginAssembly.pageLoadHandlerIdentifier);if(a&&a.length>0){var s=a.map(function(e){return e.handlePageLoad(i,r)});$.when.apply($,s).done(function(){o.resolve(void 0)})}else o.resolve(void 0);this.registerClients(),e.isPageLoadHandled=!0}return o.promise()},e.prototype.registerClients=function(){r.ClientHandlerRegistry.registerClient(new o.ActivitiesSearchResultsPageHandler),r.ClientHandlerRegistry.registerClient(new i.CarSearchResultsPageHandler),r.ClientHandlerRegistry.registerClient(new a.FlightSearchResultsPageHandler),r.ClientHandlerRegistry.registerClient(new s.HotelSearchResultsPageHandler),r.ClientHandlerRegistry.registerClient(new l.MercuryWizardHandler),r.ClientHandlerRegistry.registerClient(new u.OpenSearchPageHandler),r.ClientHandlerRegistry.handlePageLoad()},e.isPageLoadHandled=!1,e}();t.CompositePageLoadHandler=g}),define("typeahead/core/plugins/DefaultPluginAssembly",["require","exports","jquery"],function(e,t,n){"use strict";function o(e,t){e.indexOf(t)<0&&e.push(t)}t.__esModule=!0;var i=function(){function e(){this.plugins=[]}return e.prototype.registerPlugin=function(e){o(this.plugins,e)},e.prototype.get=function(e){return this.plugins.filter(function(t){return e(t)})},e.requestParamModifierIdentifier=function(e){return"modifyParameters"in e},e.suggestionsModifierIdentifier=function(e){return"modifySuggestions"in e},e.dropDownHideHandler=function(e){return _.isFunction(e.handleDropDownHide)},e.dropDownShowHandler=function(e){return _.isFunction(e.handleDropDownShow)},e.dropdownContentHandler=function(e){return _.isFunction(e.handleContentToShow)},e.onFocusSuggestionsProviderIdentifier=function(e){return _.isFunction(e.suggestOnFocus)},e.pageLoadHandlerIdentifier=function(e){return _.isFunction(e.handlePageLoad)},e.experimentIdentifier=function(e){return _.isFunction(e.getExperiments)},e}();t.DefaultPluginAssembly=i}),define("typeahead/core/plugins/ExecutionHelper",["require","exports","jquery","typeahead/core/abTest"],function(e,t,n,o){"use strict";function i(e,t){e.name?o.getAndLog(e.name).done(function(n){t.resolve("undefined"!=typeof e.value?e.value===n.value:n.value>0)}).fail(function(){t.resolve(!1)}):t.resolve(!1)}function r(e){return l.hasOwnProperty(e)?l[e]:null}function a(e,t){for(var n,o=0;o<t.length;o++){n=t[o];var i=!0;for(var a in n)if("experiment"!==a&&n.hasOwnProperty(a)&&n[a]){var s=r(a);if(s&&n[a].indexOf(e[s])<0){i=!1;break}}if(i)return n}}function s(e,t){var o=n.Deferred();if(!t||!t.length||!e)return o.resolve(!0).promise();var r=a(e,t);return r?r.experiment?i(r.experiment,o):o.resolve(!0):o.resolve(!1),o.promise()}t.__esModule=!0;var l={clients:"clientId",deviceTypes:"deviceType",lobs:"lob",locales:"locale",siteids:"siteid",tabs:"tab"};t.evaluateExperiment=i,t.shouldExecute=s}),define("typeahead/core/plugins/SuggestionsProvider",["require","exports","jquery","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,n,o){"use strict";t.__esModule=!0;var i=function(){function e(e){this.suggestionsModifiers=[],this.suggestionsModifiers=e.get(o.DefaultPluginAssembly.suggestionsModifierIdentifier)}return e.prototype.modifySuggestions=function(e,t,o){void 0===o&&(o={});var i=n.Deferred();return e&&e.length>0&&this.suggestionsModifiers&&this.suggestionsModifiers.length>0?(n.when.apply(n,this.suggestionsModifiers.map(function(n){return n.modifySuggestions(e,t,o)})).done(function(){i.resolve(e)}),i.promise()):i.resolve([])},e}();t.SuggestionsProvider=i}),define("typeahead/core/presentation/DisplayGroupHandler",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.prototype.getResultsByDisplayGroup=function(e){var t=this.getDisplayGroupsPresent(e);$.each(e,function(e,n){n.displayGroup?t[n.displayGroup.groupName].items.push(n):t["default"].items.push(n)});var n=this.sortDisplayGroupsByDisplayOrder(t);return n},e.prototype.getDisplayGroupsPresent=function(e){var t={};return $.each(e,function(e,n){n.displayGroup?t[n.displayGroup.groupName]={index:Object.keys(t).length,items:[],label:n.displayGroup.label}:t["default"]={index:Object.keys(t).length,items:[],label:""}}),t},e.prototype.sortDisplayGroupsByDisplayOrder=function(e){var t=Object.keys(e).sort(function(t,n){return e[t].index-e[n].index}),n=[];return t.forEach(function(t){n.push({groupName:t,items:e[t].items,label:e[t].label})}),n},e}();t.DisplayGroupHandler=n}),define("typeahead/core/presentation/DropDownHideHandlersAssembly",["require","exports","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e){this.handlers=e.get(n.DefaultPluginAssembly.dropDownHideHandler)}return e.prototype.runHandlers=function(e,t,n){this.handlers.map(function(o){return o.handleDropDownHide(e,t,n)})},e}();t.DropDownHideHandlersAssembly=o}),define("typeahead/core/presentation/DropDownShowHandlersAssembly",["require","exports","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e){this.handlers=e.get(n.DefaultPluginAssembly.dropDownShowHandler)}return e.prototype.runHandlers=function(e,t,n){this.handlers.map(function(o){return o.handleDropDownShow(e,t,n)})},e}();t.DropDownShowHandlersAssembly=o}),define("typeahead/core/presentation/DropdownContentHandlersAssembly",["require","exports","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e){this.handlers=e.get(n.DefaultPluginAssembly.dropdownContentHandler)}return e.prototype.runHandlers=function(e,t,n){this.handlers.map(function(o){return o.handleContentToShow(e,t,n)})},e}();t.DropdownContentHandlersAssembly=o}),define("typeahead/features/IDropDownHideHandler",["require","exports","jquery"],function(e,t,n){"use strict";t.__esModule=!0}),define("typeahead/features/IDropDownShowHandler",["require","exports","jquery"],function(e,t,n){"use strict";t.__esModule=!0}),define("typeahead/features/IDropdownContentHandler",["require","exports","jquery"],function(e,t,n){"use strict";t.__esModule=!0}),define("typeahead/core/presentation/IInputElementFocusByHumanOrScriptHandler",["require","exports","jquery"],function(e,t,n){"use strict";t.__esModule=!0,t.isInputElementFocusByHumanOrScriptHandler=function(e){return _.isObject(e)&&_.isFunction(e.handleInputElementFocusByHumanOrScript)}}),define("typeahead/core/presentation/IInputElementFocusHandler",["require","exports","jquery"],function(e,t,n){"use strict";t.__esModule=!0,t.isInputElementFocusHandler=function(e){return _.isObject(e)&&_.isFunction(e.handleInputElementFocus)}}),define("typeahead/core/presentation/SvgIcons",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.init=function(){if(!e.initialized){var t=document.createElement("div");t.setAttribute("aria-hidden","true"),t.setAttribute("style","display:none"),t.innerHTML=e.svgSprite,document.body.insertBefore(t,document.body.childNodes[0]),e.initialized=!0;var n=document.createElement("style");n.type="text/css",n.innerHTML=".icon > .uitk-icon-svg \n            {fill:currentcolor;height:1em;width:1em;pointer-events:none;position:relative;top:0.15em;}",document.head.appendChild(n)}},e.initialized=!1,e.svgSprite='\n    <svg xmlns="http://www.w3.org/2000/svg">\n    <symbol id="uitk-icon-location" viewBox="0 0 18 18"><path d="M9 0C5.8 0 3.3 2.6 3.3 5.7V6C3.5 11.5 9 18 9 18s5.5-6.5\n     5.7-11.9v-.3C14.7 2.6 12.2 0 9 0zm0 8.3c-1.4 0-2.6-1.2-2.6-2.6S7.6 3.1 9 3.1s2.6 1.2 2.6 2.6S10.4 8.3 9 8.3z"/>\n    </symbol>\n    <symbol id="uitk-icon-flights" viewBox="0 0 18 18"><path d="M1.2 11.1l2.7.9 3.8-3.8L.1 \n    3.9l1.1-1.1c.1-.1.2-.1.4-.1l8.7 2.8L14.8 1c.6-.6 1.5-.9 2.3-1 .2 0 .5 0 .7.2.2.2.3.4.2.7-.1.7-.4 1.7-1 2.3l-4.5 4.5 \n    2.8 8.7c0 .1 0 .3-.1.4l-1.1 1.1-4.3-7.5L6 14.1l.9 2.7-1.1 1.1-2.3-3.4-3.4-2.3 1.1-1.1z"/></symbol>\n    <symbol id="uitk-icon-hotels" viewBox="0 0 18 18"><path d="M17.7 \n    17.5l-.4-1c-.1-.1-.2-.2-.3-.2h-.8V4.9c0-.2-.2-.4-.4-.4h-3.4V.4c0-.2-.2-.4-.4-.4H2.2c-.2 0-.3.2-.3.4v15.9h-.8c-.1 \n    0-.3.1-.3.2l-.4 1c-.1.1 0 .2 0 .4s.2.1.3.1h16.6c.1 0 \n    .2-.1.3-.2s.1-.2.1-.3zm-11.3-4H4.1v-2.2h2.2v2.2zm0-4.5H4.1V6.8h2.2V9zm0-4.5H4.1V2.2h2.2v2.3zM10.1 \n    16H7.9v-4.8h2.2V16zm0-7H7.9V6.8h2.2V9zm0-4.5H7.9V2.2h2.2v2.3zm3.8 9h-2.2v-2.2h2.2v2.2zm0-4.5h-2.2V6.8h2.2V9z"/>\n    </symbol>\n    <symbol id="uitk-icon-cars" viewBox="0 0 18 18"><path d="M17.8 8.3l-1.5-1.4L14.8 2c0-.2-.2-.3-.4-.3H3.6c-.2 \n    0-.3.1-.4.3L1.6 6.9.2 8.3s-.1.1-.1.2V13c0 .1 0 .2.1.3l.6.6V16c0 .2.2.4.4.4h3c.2 0 .4-.2.4-.4v-2.1h8.9V16c0 \n    .2.2.4.4.4h3c.2 0 .4-.2.4-.4v-2.1l.6-.6c.1-.1.1-.2.1-.3V8.5l-.2-.2zM4.4 3.2h9.3l1.1 3.7H3.3l1.1-3.7zm-.8 8.2c-.8 \n    0-1.5-.7-1.5-1.5 0-.9.7-1.5 1.5-1.5S5 9 5 9.9c0 .8-.6 1.5-1.4 1.5zm10.8 0c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.6 \n    1.5 1.5c0 .8-.7 1.5-1.5 1.5z"/></symbol>\n    <symbol id="uitk-icon-train" viewBox="0 0 18 18"><path d="M3.8 18l1-2.5h2l-.2 1h5l-.2-1h2l1 2.5H3.8zm9-18c.8 0 1.5.7\n     1.5 1.5v12.1c0 .2-.2.4-.4.4H4.1c-.2 0-.4-.2-.4-.4V1.5C3.8.7 4.4 0 5.2 0h7.6zM6.5 2.6c0 .2.2.4.4.4h4.2c.2 0 \n     .4-.2.4-.4v-.7c0-.2-.2-.4-.4-.4H6.9c-.2 0-.4.2-.4.4v.7zm.8 8.9c0-.6-.4-1-1-1s-1 .4-1 1 .4 1 1 1 1-.4 1-1zm5.5 \n     0c0-.6-.4-1-1-1s-1 .4-1 1 .4 1 1 1 1-.4 1-1zm0-7H5.3v4.8h7.5V4.5z"/></symbol>\n    <symbol id="uitk-icon-notime" viewBox="0 0 18 18"><path d="M17.4 9c0 4-3.2 7.2-7.2 7.2V14c2.8 0 5-2.3 5-5 \n    0-2.8-2.3-5-5-5s-4.9 2.2-5 4.8v.8l.1-.4.9-1c.1-.1.2-.1.3-.1s.2 0 .3.1l1 1c.1.1.1.2.1.3s0 .2-.1.3l-3.6 3.6L.5 \n    9.8c-.1-.1-.1-.2-.1-.3s0-.2.1-.3l1-1c.1-.1.2-.1.3-.1s.2 0 .3.1l.8.9.2.5v-.7c0-4 3.2-7.2 7.2-7.2S17.4 5 17.4 \n    9zm-4.1-.5l-2.4-.2-.2-2.9h-1l-.2 4.3 3.8-.2v-1z"/></symbol>\n    <symbol id="uitk-icon-tag" viewBox="0 0 18 18"><path d="M7.928.111A.376.376 0 0 0 7.661 0H3.434a.37.37 0 0 \n    0-.267.111L.11 3.168a.376.376 0 0 0-.111.267v4.227a.37.37 0 0 0 .111.267l9.961 9.961a.38.38 0 0 0 .535 \n    0l7.284-7.284a.38.38 0 0 0 0-.535L7.928.111zm-3.39 5.942a1.514 1.514 0 1 1 .002-3.028 1.514 1.514 0 0 1-.002 \n    3.028z"/></symbol>\n    <symbol id="uitk-icon-return" viewBox="0 0 18 18"><path d="M18 10.8c0 .1 0 .2-.1.3l-5 4.9c-.2.2-.4.2-.6 \n    0l-1.1-1.1c-.2-.2-.2-.4 0-.6l2-2 .5-.2H.5c-.1 0-.2 0-.3-.1-.1-.1-.1-.2-.1-.3V2.3c0-.1 0-.2.1-.3s.2-.1.3-.1h1.6c.1 0 \n    .2 0 .3.1.1 0 .1.1.1.3v7.3h11.3l-.5-.2-2-2c-.3-.2-.3-.4-.1-.6l1.1-1.1c.2-.2.4-.2.6 0l4.9 4.9c.1 0 .1.1.2.2z"/>\n    </symbol>\n    <symbol id="uitk-icon-close" viewBox="0 0 18 18"><path d="M14.4 \n    5.9c.1-.1.1-.2.1-.3s0-.2-.1-.3l-1.7-1.7c-.2-.2-.4-.2-.6 0L9 6.7 5.9 3.6c-.1-.1-.2-.1-.3-.1-.1 0-.2 0-.3.1L3.6 \n    5.3c-.2.2-.2.4 0 .6L6.7 9l-3.1 3.1c-.1.1-.1.2-.1.3s0 .2.1.3l1.7 1.7c.2.2.4.2.6 0L9 11.3l3.1 3.1c.2.2.4.2.6 \n    0l1.7-1.7c.1-.1.1-.2.1-.3s0-.2-.1-.3L11.3 9l3.1-3.1z"/></symbol>\n    </svg>',e}();t.SvgIcons=n}),define("typeahead/core/util/Functional",["require","exports","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity"],function(e,t,n,o,i){"use strict";function r(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];if(!_.isArray(e))return n["default"].log(new Error("mapMethodByName expected targets to be in an array, but got "+JSON.stringify(e)),i.Severity.MustFix,o.ProblemOrigin.UniversalTypeahead),[];for(var s=[],l=0,u=e;l<u.length;l++){var c=u[l],p=c[t];if(_.isFunction(p))try{s.push(p.apply(c,r))}catch(d){n["default"].log(d,i.Severity.MustFix,o.ProblemOrigin.UniversalTypeahead)}else n["default"].log(new Error(t+" is not supported by "+JSON.stringify(c)),i.Severity.MustFix,o.ProblemOrigin.UniversalTypeahead)}return s}t.__esModule=!0,t.mapMethodByName=r}),define("typeahead/core/util/Optional",["require","exports","underscore"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e){this.value=e}return e.of=function(t){if(e.isEmpty(t))throw"Optional.of() does not accept undefined or null as argument";return new e(t)},e.ofNullable=function(t){return new e(t)},e.empty=function(){return new e(null)},e.isEmpty=function(e){return n.isUndefined(e)||n.isNull(e)},e.prototype.get=function(){if(this.isPresent())return this.value;throw new Error("trying to get the value of an empty Optional")},e.prototype.isPresent=function(){return!e.isEmpty(this.value)},e.prototype.orElse=function(e){return this.isPresent()?this.value:e},e}();t.Optional=o});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("typeahead/core/geolocation/logging/GeolocationMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(e){function t(t,n,o,i,r,a,s){var l=e.call(this,t,n,"GeolocationAsSuggestion",s)||this;return l.position=r,l.positionError=a,l.latency=i-o,l}return __extends(t,e),t}(n.TypeaheadMetric);t.GeolocationMetric=o}),define("typeahead/core/geolocation/logging/GeolocationMetricLogger",["require","exports","typeahead/core/geolocation/logging/GeolocationMetric","typeahead/core/geolocation/message/GeolocationRequestMessage","typeahead/core/geolocation/message/GeolocationResponseMessage","typeahead/core/logging/CollectorTransport","typeahead/core/message/TypeaheadMessage","typeahead/core/TypeaheadUtils"],function(e,t,n,o,i,r,a,s){"use strict";t.__esModule=!0;var l=function(){function e(){var e=this;a.TypeaheadMessage.subscribe(o.GeolocationRequestMessage.getTopic(),function(t,n){e.lob=s.Lob[s.TypeaheadUtils.getLob()],e.domElementId=n.getDomElementId(),e.beginTimestamp=Date.now()}),a.TypeaheadMessage.subscribe(i.GeolocationResponseMessage.getTopic(),function(t,n){e.position=n.getPosition(),e.positionError=n.getPositionError(),e.endTimestamp=Date.now(),e.emitGeolocationMetric()})}return e.prototype.emitGeolocationMetric=function(){(new r.CollectorTransport).log(new n.GeolocationMetric(s.Lob[s.TypeaheadUtils.getLob()],this.domElementId,this.beginTimestamp,this.endTimestamp,this.position,this.positionError,(void 0)))},e}();t.GeolocationMetricLogger=l}),define("typeahead/core/geolocation/message/GeolocationClearedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e){this.geolocationResult=e}return e.getTopic=function(){return"typeahead.geolocation_cleared"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getGeolocationResult=function(){return this.geolocationResult},e}();t.GeolocationClearedMessage=n}),define("typeahead/core/geolocation/message/GeolocationRequestMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e){this.domElementId=e}return e.getTopic=function(){return"typeahead.geolocation_request"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getDomElementId=function(){return this.domElementId},e}();t.GeolocationRequestMessage=n}),define("typeahead/core/geolocation/message/GeolocationResponseMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t,n,o){void 0===o&&(o=void 0),this.position=e,this.postionError=t,this.geolocationResult=n,this.submitButton=o}return e.getTopic=function(){return"typeahead.geolocation_response"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getPosition=function(){return this.position},e.prototype.getPositionError=function(){return this.postionError},e.prototype.getGeolocationResult=function(){return this.geolocationResult},e.prototype.getSubmitButton=function(){return this.submitButton},e}();t.GeolocationResponseMessage=n}),define("typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils",["require","exports","typeahead/core/plugins/ExecutionHelper"],function(e,t,n){"use strict";function o(e,t,o,i,r){var a=$.Deferred();return"undefined"!=typeof o?n.shouldExecute(i,t).done(function(t){o.features=o.features&&o.features.length&&o.features.push?o.features||[]:[],t&&o.features.indexOf(e)<0&&o.features.push(e)}).always(function(){a.resolve(o)}):a.resolve(o),a.promise()}t.__esModule=!0,t.addFeatureFlag=o}),require(["require","exports","typeahead/client/ClientHandlerRegistry","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/FormLoadedMessage","typeahead/core/message/OriginPopulationMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/SearchParametersUpdater","typeahead/core/StripingConfiguration","typeahead/core/SuggestionFactory","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,n,o,i,r,a,s,l,u,c,p,d,g,h){"use strict";t.__esModule=!0;var f=[{clients:["Homepage","FlightsLandingPage"],experiment:{id:12842,name:"CWTA_DefaultCurrentLocationAkamai",value:2},tabs:["flight"]}],y=function(){function e(){this.FLIGHT_ORIGIN_SELECTOR="input[data-provide='utypeahead'][data-lob='FLIGHTS'][id*='flight-origin']",this.ESS_NEARBY_API="/api/v4/nearby";
}return e.prototype.handlePageLoad=function(e,t){var n=this,o=$.Deferred();return t.tab?l.TypeaheadMessage.subscribe(a.FormLoadedMessage.getTopic(),function(e,o){n.makeRequests(t)}):this.makeRequests(t),o.resolve(void 0),o.promise()},e.prototype.getExperiments=function(){return p.getExperiments(f)},e.prototype.makeRequests=function(e){var t=this;e.tab=n.ClientHandlerRegistry.getTab(),u.shouldExecute(e,f).done(function(n){n&&t.makeNearbyRequest(e).done(function(e){t.populateOriginAirport(e)}).fail(function(){r["default"].log(new Error("Failed to get nearby airport"),i.Severity.Excusable,o.ProblemOrigin.ExpediaSuggestService)})}).fail(function(){r["default"].log(new Error("Failed to evaluate exp 12842"),i.Severity.Excusable,o.ProblemOrigin.DataCaptureToolkit)})},e.prototype.makeNearbyRequest=function(e){var t=$.Deferred();try{var n=this.getAkamaiCoordinates();n&&n.latitude&&n.longitude?t=$.ajax({data:{client:g.TypeaheadUtils.getClientId(),debug:!0,latlong:n.latitude+"|"+n.longitude,locale:g.TypeaheadUtils.getLocale(),maxradius:200,maxresults:20,regiontype:1,siteid:g.TypeaheadUtils.getSiteId()},dataType:"jsonp",timeout:2e3,type:"GET",url:e.serviceUrl+this.ESS_NEARBY_API}):t.fail()}catch(o){t.fail()}return t},e.prototype.getAkamaiCoordinates=function(){return window.utag_data&&window.utag_data.context&&window.utag_data.context.clientInfo?window.utag_data.context.clientInfo.coords:null},e.prototype.populateOriginAirport=function(e){var t=e.sr,n=this.pickBestAirport(t);if(n){var o=d.createSuggestion(n),i=o.getFullName().orElse(""),r=$(this.FLIGHT_ORIGIN_SELECTOR);r&&r.length>0&&(r.val(i),c.updateForSuggestion(i,o,r.data(),r.attr("id")),l.TypeaheadMessage.publish(new s.OriginPopulationMessage))}},e.prototype.pickBestAirport=function(e){function t(e){if(e&&e.POPULARITY&&e.hierarchyInfo&&e.hierarchyInfo.nearby){var t=e.hierarchyInfo.nearby.distInMI;return 0===t&&(t=1e-4),parseFloat(e.POPULARITY)/Math.pow(t,2)}return 0}var n=-1,o=null;return e&&e.length>0&&e.forEach(function(e){var i=t(e);console.warn(e.regionNames.displayName+": "+i),i>n&&(n=i,o=e)}),o},e}();h.registerPlugin(new y)}),require(["require","exports","typeahead/core/loc","typeahead/client/ClientHandlerRegistry","typeahead/core/plugins/ExecutionHelper","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,n,o,i,r,a){"use strict";t.__esModule=!0;var s=[{clients:["Homepage","AWSHomepage","HotelsLandingPage"],tabs:["hotel"]}],l="altRegion",u=function(){function e(){}return e.prototype.modifySuggestions=function(e,t,o){var r=$.Deferred();return e&&e.length>0?i.shouldExecute(t,s).done(function(t){t&&("focus"===o.renderTrigger?e.forEach(function(t,o){if(t.hierarchyInfo){var i=t.hierarchyInfo.relation;i&&"alt"===i[0]&&(t.showAsHierarchy=!0,(!e[o-1].hierarchyInfo||e[o-1].hierarchyInfo&&e[o-1].hierarchyInfo.relation&&"alt"!==e[o-1].hierarchyInfo.relation[0])&&(t.label=n.altSuggestionLabelText?n.altSuggestionLabelText:"People also search"))}}):"type"===o.renderTrigger&&e.forEach(function(e,t){if(e.hierarchyInfo){var o=e.hierarchyInfo.relation;o&&"alt"===o[0]&&(e.displayGroup={groupName:"altSuggestion",label:n.altSuggestionLabelText?n.altSuggestionLabelText:"People also search"})}}))}).always(function(){r.resolve(e)}):r.resolve(e),r.promise()},e.prototype.modifyParameters=function(e,t,n){return t.tab=o.ClientHandlerRegistry.getTab(),r.addFeatureFlag(l,s,e,t,n)},e}();a.registerPlugin(new u)});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();require(["require","exports","jquery","typeahead/core/SuggestServiceParamModifier","universalTypeahead"],function(e,t,n,o,i){"use strict";t.__esModule=!0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configuration=[{lobs:["HOTELS"]}],t.featureName="IncludeHLR",t}return __extends(t,e),t.prototype.modify=function(e,t,n){this.addRegionType(e,256)},t}(o.SuggestServiceParamModifier);i.registerPlugin(new r)}),require(["require","exports","typeahead/core/loc","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,n,o,i,r,a){"use strict";t.__esModule=!0;var s=[{clients:["Homepage","AWSHomepage","CarsLandingPage"],experiment:{id:13136,name:"CWTA_CarRentalHintText"}}],l=[{clients:["Homepage","AWSHomepage","CarsLandingPage"],experiment:{id:13136,name:"CWTA_CarRentalHintText",value:1}},{lobs:["CARS"]}],u=[{clients:["Homepage","AWSHomepage","CarsLandingPage"],experiment:{id:13136,name:"CWTA_CarRentalHintText",value:2}},{lobs:["CARS"]}],c=[l,u],p=function(){function e(){var t=this;this.$input=$("input[data-provide=utypeahead][data-dest=true][data-lob=CARS]"),this.originalPlaceholder=this.$input.attr("placeholder")||"City, airport or address",this.placeholderIndex=-1,this.modifyInputElement=function(n){t.$input=n,e.placeholders=t.getCarPlaceholders(r.TypeaheadUtils.getSiteId()),uitk.subscribe("sfSelectedLobs.updated",function(e,n){t.stopCyclePlaceholders(),t.recheckVariant(!0).done(function(e){0!==e&&t.startCyclePlaceholders()})}),t.startCyclePlaceholders(),t.$input.blur(t.startCyclePlaceholders),t.$input.focus(t.stopCyclePlaceholders)},this.startCyclePlaceholders=function(){t.stopCyclePlaceholders(),0!==t.getVariant()&&(t.timeoutId=setTimeout(t.cyclePlaceholders,e.initialDelayMillis))},this.stopCyclePlaceholders=function(){void 0!==t.intervalId&&clearInterval(t.intervalId),void 0!==t.timeoutId&&clearTimeout(t.timeoutId),t.placeholderIndex=-1,t.setPlaceholderText(t.originalPlaceholder)},this.cyclePlaceholders=function(){t.intervalId=setInterval(t.setNextPlaceholderText,e.cycleDelayMillis)},this.setPlaceholderText=function(e){t.$input.attr("placeholder",e),uitk.prepFields()},this.setNextPlaceholderText=function(e){t.setPlaceholderText(t.getNextText(e))},this.getNextIndex=function(n){if(void 0===n&&(n=e.placeholders.length),1===t.getVariant())for(n=t.placeholderIndex;n===t.placeholderIndex&&0!==e.placeholders.length;)n=Math.floor(Math.random()*e.placeholders.length+1);else if(2===t.getVariant()&&(n=t.placeholderIndex+1,t.placeholderIndex>e.placeholders.length))return 0;return n},this.getNextText=function(n){return void 0===n&&(n=t.getNextIndex(),t.placeholderIndex=n),n>=e.placeholders.length?t.originalPlaceholder:e.tryPhrase.replace("{0}",e.placeholders[n])},this.getVariant=function(){return t.recheckVariant(),e.variant}}return e.prototype.getExperiments=function(){return i.getExperiments([].concat.apply([],c))},e.prototype.handlePageLoad=function(t,n){var i=this;this.$input=$("input[data-provide=utypeahead][data-dest=true][data-lob=CARS]"),this.context=n,e.variant=0;var r=$.Deferred();return o.shouldExecute(n,s).done(function(t){t?(o.shouldExecute(n,l).done(function(t){t&&(e.variant=1),i.modifyInputElement(i.$input),r.resolve(void 0)}).fail(function(){r.resolve(void 0)}),o.shouldExecute(n,u).done(function(t){t&&(e.variant=2),i.modifyInputElement(i.$input),r.resolve(void 0)}).fail(function(){r.resolve(void 0)})):r.resolve(void 0)}).fail(function(){r.resolve(void 0)}),r.promise()},e.prototype.recheckVariant=function(t){var n=$.Deferred();return void 0===t&&(t=!1),(t||void 0===e.variant)&&(o.shouldExecute(this.context,s).done(function(t){t||(e.variant=0,n.resolve(0))}).fail(function(){e.variant=0,n.resolve(0)}),o.shouldExecute(this.context,l).done(function(t){t&&(e.variant=1,n.resolve(1))}).fail(function(){e.variant=0,n.resolve(0)}),o.shouldExecute(this.context,u).done(function(t){t&&(e.variant=2,n.resolve(2))}).fail(function(){e.variant=0,n.resolve(0)})),n.promise()},e.prototype.getCarPlaceholders=function(e){var t;switch(e){case"1":t=["Denver Hertz","Miami Budget","LAX","MCO","San Francisco","Boston"];break;case"3":t=["London Europcar","Miami Sixt","LON","DUB","Heathrow","Paris"];break;case"25":t=["Perth Enterprise","Brisbane Avis","MEL","SYD","Cairns","London"];break;case"27":t=["DEL","HYD","Bengaluru","Mumbai"];break;case"63":t=["Dublin Easirent","Sydney Europcar","LAS","DUB","London","Chicago"];break;case"29":t=["Wellington Economy Rent A Car","Queenstown Europcar","AKL","LON","Sydney","Auckland"];break;case"70125":t=["Belfast Sixt","Brisbane Hertz","MEL","SYD","Melborne","Las Vegas"];break;case"70403":t=["Houston Avis","Boston Dollar","LON","DUB","Paris","London"];break;case"70301":t=["Miami Hertz","Denver National Car Rental","LAS","MCO","Orlando","San Jose"];break;case"80001":t=["Tampa Budget","Atlanta Avis","MCO","LAS","Denver","Orlando"];default:t=[]}return t},e.tryPhrase=n.placeholderCycleTryPhrase||'Try "{0}"',e.initialDelayMillis=1e3,e.cycleDelayMillis=2e3,e}();a.registerPlugin(new p)});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();require(["require","exports","jquery","typeahead/core/SuggestServiceParamModifier","universalTypeahead"],function(e,t,n,o,i){"use strict";t.__esModule=!0;var r=["cars_rental","carsclickpopularity"],a=8,s="popularity",l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configuration=[{lobs:["CARS"]}],t}return __extends(t,e),t.prototype.modify=function(e,t,n){e.maxresults=a,e.sortcriteria=s,e.features=e.features&&e.features.length?e.features:[],Array.prototype.push.apply(e.features,r)},t}(o.SuggestServiceParamModifier);i.registerPlugin(new l)}),require(["require","exports","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,n,o){"use strict";t.__esModule=!0;var i=[{lobs:["HOTELS"]}],r="contextual_ta",a=function(){function e(){}return e.prototype.modifyParameters=function(e,t,o){return n.addFeatureFlag(r,i,e,t,o)},e}();o.registerPlugin(new a)}),require(["require","exports","typeahead/client/ClientHandlerRegistry","typeahead/core/geolocation/GeolocationDataProvider","typeahead/core/geolocation/logging/GeolocationMetricLogger","typeahead/core/message/FormLoadedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/SuggestionsAggregator","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,n,o,i,r,a,s,l,u,c,p){"use strict";t.__esModule=!0;var d=[{deviceTypes:["Tablet","Mobile"],tabs:["hotel"]},{clients:["Hotels.Search"],experiment:{id:15128,name:"HSRP_uTA_UseCurrentLocation",value:1}}],g=["Homepage","HotelsLandingPage"],h=function(){function e(){}return e.prototype.handlePageLoad=function(e,t){var n=this,o=$.Deferred();return g.indexOf(t.clientId)>-1&&a.TypeaheadMessage.subscribe(r.FormLoadedMessage.getTopic(),function(e,o){t.tab=o.getTab(),c.TypeaheadUtils.isWithinMobileBreakpoint()&&s.shouldExecute(t,d).done(function(e){e&&(n.initialize(),n.geolocationViewController&&n.geolocationViewController.handlePageLoad(o.getTab()))})}),o.resolve(void 0).promise()},e.prototype.suggestOnFocus=function(e,t){return this.suggest(e,t)},e.prototype.suggest=function(e,t){var n=this,o=$.Deferred(),i={id:this.getId(),results:[]};return s.shouldExecute(t,d).done(function(t){t?(n.initialize(),n.geolocationDataProvider.fetchData(e).done(function(e){o.resolve({id:n.getId(),results:e.results})}).fail(function(){o.resolve(i)})):o.resolve(i)}).fail(function(){o.resolve(i)}),o.promise()},e.prototype.getId=function(){return u.SuggesterId.CurrentLocationSuggester},e.prototype.getExperiments=function(){return l.getExperiments(d)},e.prototype.initialize=function(){this.geolocationDataProvider||(this.geolocationDataProvider=new o.GeolocationDataProvider,this.geolocationViewController=n.ClientHandlerRegistry.getGeolocationViewController(this.geolocationDataProvider),this.geolocationMetricLogger=new i.GeolocationMetricLogger)},e}();p.registerPlugin(new h)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","universalTypeahead"],function(e,t,n,o,i,r){"use strict";t.__esModule=!0;var a=[{clients:["Flights.Search"],experiment:{id:15336,name:"FSRP_uTA_OptimizeDropdownGeometry",value:1}}],s=function(){function e(){this.showHandlers={}}return e.optimizeDropDownGeometry=function(t,n){var o=4+document.body.clientWidth-2*e.baseSpacingHorz,i=4+Math.min(e.maxAvailableMediaWidthPx,o),r=Math.min(i,o),a=n.offset().left-2;a+r>o&&(a=e.baseSpacingHorz+o-r-2),t.css({left:a+"px","max-width":i+"px",width:r+"px"})},e.prototype.getExperiments=function(){return i.getExperiments(a)},e.prototype.handleDropDownShow=function(e,t,i){var r=this,s=n.Deferred();return o.shouldExecute(i,a).done(function(n){n&&r.doHandleDropDownShow(e,t)}).always(function(){s.resolve(void 0)}),s.promise()},e.prototype.handleDropDownHide=function(t,o,i){var r=o.attr("id"),a=r?this.showHandlers[r]:void 0;return a&&(n(window).off(e.resizeEventTypes,null,a),delete this.showHandlers[r]),n.Deferred().resolve(void 0).promise()},e.prototype.doHandleDropDownShow=function(t,o){var i=function(n){e.optimizeDropDownGeometry(t,o)};i(null),n(window).on(e.resizeEventTypes,null,null,i);var r=o.attr("id");r&&(this.showHandlers[o.attr("id")]=i)},e.baseSpacingHorz=12,e.maxAvailableMediaWidthPx=770,e.resizeEventTypes="orientationchange resize",e}();r.registerPlugin(new s)}),require(["require","exports","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,n,o){"use strict";t.__esModule=!0;var i=[{lobs:["PACKAGES"]}],r=function(){function e(){}return e.prototype.modifySuggestions=function(t,o,r){var a=this,s=$.Deferred();return t&&t.length>0?n.shouldExecute(o,i).done(function(n){n&&(a.isFlightCar()||a.isPackageOrigin())&&t.forEach(function(t){t.icon=e.FLIGHTS_ICON})}).always(function(){s.resolve(t)}):s.resolve(t),s.promise()},e.prototype.isFlightCar=function(){return $("input[value=flight-car]:visible").is(":checked")||e.FLIGHT_CAR_TYPES.indexOf($("button.on:visible").data("lob"))>-1},e.prototype.isPackageOrigin=function(){return $("input:focus").data("gcw-field-type")===e.ORIGIN_FIELD_TYPE},e.FLIGHTS_ICON="flights",e.ORIGIN_FIELD_TYPE="origin",e.FLIGHT_CAR_TYPES=["packageFlightCar","flightCar","carFlight"],e}();o.registerPlugin(new r)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,n,o,i,r,a,s){"use strict";t.__esModule=!0;var l=[{clients:["Flights.Search"],experiment:{id:15333,name:"FSRP_uTA_Hierarchy",value:1}},{lobs:["HOTELS","FLIGHTS","RAILS","PACKAGES"]}],u="ta_hierarchy",c=function(){function e(){}return e.prototype.getExperiments=function(){return i.getExperiments(l)},e.prototype.modifyParameters=function(e,t,o){if(r.TypeaheadUtils.getPackageType()!==r.PackageType.FlightCar)return a.addFeatureFlag(u,l,e,t,o);var i=n.Deferred();return i.resolve(e).promise()},e.prototype.modifySuggestions=function(e,t,i){var r=n.Deferred();return e&&e.length>0?o.shouldExecute(t,l).done(function(t){e.forEach(function(e){if(t){var n=e.relation;+e.index>0&&e.hierarchyInfo&&(n=e.hierarchyInfo.relation),!n||"child"!==n[0]&&"nearby"!==n[0]||(e.showAsHierarchy=!0)}})}).always(function(){r.resolve(e)}):r.resolve(e),r.promise()},e}();s.registerPlugin(new c)}),require(["require","exports","jquery","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,n,o,i,r,a){"use strict";t.__esModule=!0;var s=[{clients:["Homepage","HotelsLandingPage","AWSHomepage"],tabs:["hotel"]}],l=function(){function e(){}return e.prototype.handlePageLoad=function(e,t){var a=this,l=n.Deferred();return i.TypeaheadMessage.subscribe(o.SubmitClickedMessage.getTopic(),function(e,o){t.tab=a.getMercuryWzdTab(),r.shouldExecute(t,s).done(function(e){if(e){var t=n("[data-gcw-storeable-name=gcw-destination]:visible"),o="#"+n(t).attr("data-hotel_id_element"),i="#"+n(t).attr("data-city_element"),r=n(o),a=n(r).val(),s=n(i),l=n(s).val();a&&l?(n(s).attr("name","destination"),n(t).removeAttr("name")):(n(t).attr("name","destination"),n(s).removeAttr("name"))}}).always(function(){l.resolve()})}),l.promise()},e.prototype.getMercuryWzdTab=function(){return n("li.tab:visible").children("button.on").data("lob")},e}();a.registerPlugin(new l)}),require(["require","exports","jquery","typeahead/core/loc","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,n,o,i,r,a,s,l){"use strict";t.__esModule=!0;var u=[{experiment:{id:13081,name:"OneSearchTypeahead"},lobs:["HOTELS"]}],c="onesearchta",p=128,d=function(){function e(){this.applicableClientIds=["Hotels.Search"],this.applicableTextInputElementIds=["inpSearchNear"]}return e.prototype.modifyParameters=function(e,t,o){var r=n.Deferred();return this.applicableClientIds.indexOf(a.TypeaheadUtils.getClientId())>-1&&this.applicableTextInputElementIds.indexOf(o.inputElementId)>-1?i.shouldExecute(t,u).done(function(n){n&&(e.rid=o.searchRegionId,e.mask|=p,s.addFeatureFlag(c,u,e,t))}).always(function(){r.resolve(e)}):r.resolve(e),r.promise()},e.prototype.handleContentToShow=function(e,t,o){var r=this,s=n.Deferred();return this.applicableClientIds.indexOf(a.TypeaheadUtils.getClientId())>-1&&this.applicableTextInputElementIds.indexOf(t.attr("id"))>-1?i.shouldExecute(o,u).done(function(t){t&&r.showHotelNameSearchSupportedInfo(e)}).always(function(){s.resolve(void 0)}):s.resolve(void 0),s.promise()},e.prototype.getExperiments=function(){return r.getExperiments(u)},e.prototype.showHotelNameSearchSupportedInfo=function(e){var t="padding-top:0.92307692em;padding-right:0.92307692em;padding-bottom:0;padding-left:0.92307692em;margin-top:0.92307692em;border-top-width:1px;border-top-style:solid;border-top-color:#DDD;",i="display:block;padding-top:0;padding-right:0.46153846em;padding-bottom:0;padding-left:0.46153846em;",r="padding-right:0.76923077em;",a="font-size:0.9em",s=o.taOnesearchPromptText?o.taOnesearchPromptText:"You can also search by hotel name or attraction",l=n.parseHTML("<li role='presentation' class='' style="+t+"><div id='oneSearchTypeaheadPromptInner' style="+i+"><span class='icon icon-info' aria-hidden='true' style="+r+"></span><span class='ta-onesearch-prompt-text' style="+a+">"+s+"</span></div></li>");e.find("ul").append(l)},e}();l.registerPlugin(new d)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,n,o,i,r,a){"use strict";t.__esModule=!0;var s="",l="font-size:",u="em",c="1.077",p="1.154",d="1.231",g=[{experiment:{id:14895,name:"IncreaseFontSizeFlights",value:1},tabs:["flight"]},{experiment:{id:14896,name:"IncreaseFontSizeHotels",value:1},tabs:["hotel"]}],h=[{experiment:{id:14895,name:"IncreaseFontSizeFlights",value:2},tabs:["flight"]},{experiment:{id:14896,name:"IncreaseFontSizeHotels",value:2},tabs:["hotel"]}],f=[{experiment:{id:14895,name:"IncreaseFontSizeFlights",value:3},tabs:["flight"]},{experiment:{id:14896,name:"IncreaseFontSizeHotels",value:3},tabs:["hotel"]},{tabs:["car"]}],y=[g,h,f],m=function(){function e(){}return e.prototype.getExperiments=function(){return i.getExperiments([].concat.apply([],y))},e.prototype.modifySuggestions=function(e,t,i){var a=s,y=n.Deferred();return r.TypeaheadUtils.isWithinMobileBreakpoint()&&e&&e.length>0&&(o.shouldExecute(t,g).done(function(e){e&&(a=c)}),o.shouldExecute(t,h).done(function(e){e&&(a=p)}),o.shouldExecute(t,f).done(function(e){e&&(a=d)}),a!==s&&e.forEach(function(e){e.style=""+l+a+u})),y.resolve(e),y.promise()},e}();a.registerPlugin(new m)}),require(["require","exports","jquery","typeahead/client/ClientHandlerRegistry","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,n,o,i,r,a,s,l,u){"use strict";t.__esModule=!0;var c=[{clients:["Homepage","AWSHomepage"],tabs:["activity"]},{clients:["LXLandingPage"]}],p="lxcategory",d=function(){function e(){}return e.prototype.modifyParameters=function(e,t,n){return t.tab=o.ClientHandlerRegistry.getTab(),l.addFeatureFlag(p,c,e,t,n)},e.prototype.modifySuggestions=function(e,t,o){var i=n.Deferred();return e&&e.length>0?s.shouldExecute(t,c).done(function(t){t&&e.forEach(function(e){if(e.hierarchyInfo){var t=e.hierarchyInfo.relation;t&&"lxcategory"===t[0]&&(e.showAsHierarchy=!0)}})}).always(function(){i.resolve(e)}):i.resolve(e),i.promise()},e.prototype.handlePageLoad=function(e,t){var l=n.Deferred();return a.TypeaheadMessage.subscribe(r.SuggestionSelectedMessage.getTopic(),function(e,i){t.tab=o.ClientHandlerRegistry.getTab(),s.shouldExecute(t,c).done(function(e){if(e){var t=i.getSuggestion().getExtraSearchParams();t.orElse([]).forEach(function(e){var t=document.createElement("INPUT");t.setAttribute("type","hidden"),t.setAttribute("class","uta-search-parameter"),t.setAttribute("name",e.field),t.setAttribute("value",e.value),n("div.tabs-container").find("form:visible").append(t)})}}).always(function(){l.resolve()})}),a.TypeaheadMessage.subscribe(i.InputValueEditedMessage.getTopic(),function(e){s.shouldExecute(t,c).done(function(e){e&&n("input.uta-search-parameter").remove()})}),l.promise()},e}();u.registerPlugin(new d)}),require(["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,n,o,i,r){"use strict";t.__esModule=!0;var a=[{clients:["Flights.Search"],experiment:{id:15334,name:"FSRP_uTA_NearbyAirports",value:1}},{lobs:["FLIGHTS"]}],s="nearby_airport",l=function(){function e(){}return e.prototype.modifyParameters=function(e,t,o){var r=$.Deferred();return n.shouldExecute(t,a).done(function(n){n?i.addFeatureFlag(s,a,e,t,o).done(function(e){r.resolve(e)}).fail(function(){r.resolve(e)}):r.resolve(e)}).fail(function(){r.resolve(e)}),r},e.prototype.getExperiments=function(){return o.getExperiments(a)},e}();r.registerPlugin(new l)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,n,o,i){"use strict";t.__esModule=!0;var r=[{tabs:["hotel"]}],a=function(){function e(){}return e.prototype.modifyParameters=function(e,t,i){var a=n.Deferred();return"undefined"!=typeof e?o.shouldExecute(t,r).done(function(t){t&&(e.personalize=!0)}).always(function(){a.resolve(e)}):a.resolve(e),a.promise()},e}();i.registerPlugin(new a)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","universalTypeahead"],function(e,t,n,o,i,r){"use strict";t.__esModule=!0;var a=[{clients:["Flights.Search"],experiment:{id:15335,name:"FSRP_uTA_MinQueryLength",value:1}}],s=function(){function e(){}return e.prototype.getExperiments=function(){return i.getExperiments(a)},e.prototype.overrideMinQueryLength=function(e){var t=n.Deferred();return o.shouldExecute(e,a).done(function(e){e?t.resolve(1):t.reject()}).fail(function(){t.reject()}),t.promise()},e}();r.registerPlugin(new s)}),require(["require","exports","typeahead/client/ClientHandlerRegistry","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","universalTypeahead"],function(e,t,n,o,i,r,a,s){"use strict";t.__esModule=!0;var l=function(){function e(){this.isMetricsLogged=!1}return e.prototype.handlePageLoad=function(e,t){this.evaluateMetrics();var n=$.Deferred();return n.resolve().promise()},e.prototype.evaluateMetrics=function(){var e=this,t=Date.now(),n={};n.name="UtaPageloadMetrics",n.utaBundle=this.getUtaBundleUrl(),n.numberOfInputInteractions=0,n.durationInMillisFromStorefrontScriptStartToUtaScriptStart=isNaN(window.storefrontScriptLoadingStartedTimestamp)||isNaN(window.utaScriptLoadingStartedTimestamp)?void 0:window.utaScriptLoadingStartedTimestamp-window.storefrontScriptLoadingStartedTimestamp,n.durationInMillisFromUtaScriptStartToUtaReady=isNaN(window.utaModuleReadyTimeStamp)||isNaN(window.utaScriptLoadingStartedTimestamp)?void 0:window.utaModuleReadyTimeStamp-window.utaScriptLoadingStartedTimestamp,n.durationInMillisFromUtaReadyToUtaPageLoadHandler=isNaN(t)||isNaN(window.utaModuleReadyTimeStamp)?void 0:t-window.utaModuleReadyTimeStamp,$("body").one("focus","[data-provide=utypeahead]",function(){var e=Date.now();n.durationInMillisFromStorefrontScriptStartToInputFocus=isNaN(window.storefrontScriptLoadingStartedTimestamp)?void 0:e-window.storefrontScriptLoadingStartedTimestamp}),$("body").on("input.typeahead_metrics","[data-provide=utypeahead]",function(){n.numberOfInputInteractions++});var o=a.TypeaheadMessage.subscribe(r.SuggestionShownMessage.getTopic(),function(t,i){n.domElementId=i.getDomElementId(),n.suggestionsRenderTimeInMillis=i.getRenderTime(),a.TypeaheadMessage.unsubscribe(t,o),e.logMetrics(n)}),s=a.TypeaheadMessage.subscribe(i.SubmitClickedMessage.getTopic(),function(t,o){a.TypeaheadMessage.unsubscribe(t,s),e.logMetrics(n)})},e.prototype.logMetrics=function(e){this.isMetricsLogged||(e.tab=n.ClientHandlerRegistry.getTab(),e.isReadyOnFocus=!window.isUtaModuleNotReadyOnFocus,o["default"].log(void 0,void 0,void 0,e),this.isMetricsLogged=!0,$("body").off("input.typeahead_metrics"),window.utaDebug&&(console.dir("uTA Pageload Metrics:"+JSON.stringify(e)),console.dir(e)))},e.prototype.getUtaBundleUrl=function(){var e=new Error;if(e.stack){var t=/(http.+universal_typeahead_bundle.*.js)/.exec(e.stack);return t&&t[1]?t[1]:void 0}},e}();s.registerPlugin(new l)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,n,o,i){"use strict";t.__esModule=!0;var r=[{lobs:["HOTELS","CARS"]}],a="postal_code",s=32,l=function(){function e(){}return e.prototype.modifyParameters=function(e,t,i){var l=n.Deferred();return"undefined"!=typeof e?o.shouldExecute(t,r).done(function(n){e.features=e.features&&e.features.length?e.features||[]:[],n&&e.features.indexOf(a)<0&&e.features.push(a),n&&"HOTELS"===t.lob&&(e.mask|=s)}).always(function(){l.resolve(e)}):l.resolve(e),l.promise()},e}();i.registerPlugin(new l)}),require(["require","exports","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,n,o,i,r){"use strict";t.__esModule=!0;var a=function(){function e(){var e=this;this.applicableClientIds=["Homepage","AWSHomepage","PackageLandingPage"],this.applicablePackageTypes=["FH"],o.TypeaheadMessage.subscribe(n.FormSubmittedMessage.getTopic(),function(t,n){if(n.isFormValid()&&e.isRedirectApplicable()&&n.getEvent()){var o=e.getRedirectPath($(n.getEvent().currentTarget));o&&(n.getEvent().preventDefault(),window.location.href=o)}})}return e.prototype.isRedirectApplicable=function(){var e=i.TypeaheadUtils.getClientId(),t=i.TypeaheadUtils.getShortPackageType();return this.applicableClientIds.indexOf(e)>-1&&this.applicablePackageTypes.indexOf(t)>-1},e.prototype.getRedirectPath=function(e){var t=e.find("input[data-gcw-field-type=destination]:visible").closest("div.autocomplete").find("input[data-gcw-storeable-name=gcw-destination-ta]").val();if(t){var n=JSON.parse(t);if(n.redirectPath)return window.location.protocol+"//"+window.location.host+n.redirectPath}},e}();r.registerPlugin(new a)}),require(["require","exports","jquery","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,n,o,i,r,a,s,l,u){"use strict";t.__esModule=!0;var c=[{clients:["PackageLandingPage","FlightsLandingPage","HotelsLandingPage","CarsLandingPage"]},{clients:["Homepage","AWSHomepage"],tabs:["flight","hotel","car","package"]}],p=function(){function e(){var e=this;this.isScrollTopOn=!1,r.TypeaheadMessage.subscribe(o.ElementFocusedMessage.getTopic(),function(t,o){e.isScrollTopOn=!1,l.TypeaheadUtils.isWithinMobileBreakpoint()&&a.shouldExecute(o.getContext(),c).done(function(t){t&&(e.scrollTop(n("#"+o.getDomElementId())),e.isScrollTopOn=!0)})}),r.TypeaheadMessage.subscribe(i.InputValueEditedMessage.getTopic(),function(t,o){e.isScrollTopOn&&e.scrollTop(n("#"+o.getDomElementId()))})}return e.prototype.getExperiments=function(){return s.getExperiments(c)},e.prototype.scrollTop=function(e){var t=n("body"),o="wheel touchmove",i=document.documentElement.clientWidth/window.innerWidth;if(!(i>1)){var r=e.offset().top-13,a=e.siblings(".label");a.length>0&&(r=a.offset().top-7);var s=t.scrollTop();Math.abs(s-r)<6.5||(t.on(o,function(){t.off(o),t.stop()}),t.animate({scrollTop:r},300))}},e}();u.registerPlugin(new p)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","universalTypeahead"],function(e,t,n,o,i,r){"use strict";t.__esModule=!0;var a=[{clients:["Flights.Search"],experiment:{id:15332,name:"FSRP_uTA_InputAutoSelect",value:1}},{}],s=function(){function e(){}return e.enableAutoSelection=function(e){var t=function(){var t=n(e)[0];t&&n(e).val()&&document.activeElement===t&&t.setSelectionRange(0,9999)};setTimeout(function(){n(e).one("mouseup",function(){t()}),t()},0)},e.prototype.getExperiments=function(){return i.getExperiments(a)},e.prototype.handleInputElementFocusByHumanOrScript=function(t,i){return o.shouldExecute(i,a).done(function(n){n&&e.enableAutoSelection(t)}),n.Deferred().resolve().promise()},e}();r.registerPlugin(new s)}),require(["require","exports","typeahead/core/EssDataProvider","typeahead/core/plugins/ExecutionHelper","typeahead/core/SuggestionsAggregator","universalTypeahead"],function(e,t,n,o,i,r){"use strict";t.__esModule=!0;var a=[{clients:["Homepage","AWSHomepage","FlightsLandingPage","CarsLandingPage","HotelsLandingPage"],tabs:["flight","hotel","car","activity"]},{clients:["Hotels.Search","LXLandingPage"]}],s=function(){function e(){this.dataProvider=new n.EssDataProvider}return e.prototype.getId=function(){return i.SuggesterId.EssOnFocusPersonalizedSuggester},e.prototype.suggest=function(e,t){var n=this,i=$.Deferred();return o.shouldExecute(t,a).done(function(o){o?n.fetchSuggestionsAndResolve(i,e,t):n.resolve(i,[])}).fail(function(){n.resolve(i,[])}),i.promise()},e.prototype.suggestOnFocus=function(e,t){return this.suggest(e,t)},e.prototype.resolve=function(e,t){e.resolve({id:this.getId(),results:t})},e.prototype.fetchSuggestionsAndResolve=function(e,t,n){var o=this,i=[];this.dataProvider.fetchData($.extend(!0,{},t,{context:n},{personalize:!0})).then(function(e){e&&e.results&&(i=i.concat(e.results))}).always(function(){o.resolve(e,i)})},e}();r.registerPlugin(new s)});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();require(["require","exports","jquery","typeahead/core/SuggestionModifier","universalTypeahead"],function(e,t,n,o,i){"use strict";t.__esModule=!0;var r=function(e){
function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configuration=[{lobs:["FLIGHTS"]}],t.featureName="SuppressIcon",t}return __extends(t,e),t.prototype.modify=function(e,t){e.forEach(function(e){e.icon="none"})},t.prototype.precondition=function(n,o){return e.prototype.precondition.call(this,n,o)&&t.inapplicableClients.lastIndexOf(o.clientId)<0},t.inapplicableClients=["Flights.Search"],t}(o.SuggestionModifier);i.registerPlugin(new r)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,n,o,i){"use strict";t.__esModule=!0;var r=[{clients:["Flights.Search"],experiment:{id:15336,name:"FSRP_uTA_OptimizeDropdownGeometry",value:0}}],a=function(){function e(){this.showHandlers={}}return e.optimizeDropDownGeometry=function(t,n){var o=4+document.body.clientWidth-2*e.baseSpacingHorz,i=4+Math.min(e.uitkTypeaheadWidthPx,o),r=4+Math.min(e.uitkTypeaheadMinWidthPx,o),a=Math.min(i,o),s=n.offset().left-2;s+a>o&&(s=e.baseSpacingHorz+o-a-2),s-=n.get(0).getBoundingClientRect().left,t.css({left:s+"px","max-width":i+"px","min-width":r+"px",width:a+"px"})},e.prototype.getExperiments=function(){},e.prototype.handleDropDownHide=function(t,o,i){var r=o.attr("id"),a=r?this.showHandlers[r]:void 0;a&&(n(window).off(e.resizeEventTypes,null,a),delete this.showHandlers[r]);var s=n.Deferred();return s.resolve().promise()},e.prototype.handleDropDownShow=function(e,t,i){var a=this,s=n.Deferred();return o.shouldExecute(i,r).done(function(n){n&&a.doHandleDropDownShow(e,t)}).always(function(){s.resolve(void 0)}),s.promise()},e.prototype.doHandleDropDownShow=function(t,o){var i=function(n){e.optimizeDropDownGeometry(t,o)};i(null),n(window).on(e.resizeEventTypes,null,null,i);var r=o.attr("id");r&&(this.showHandlers[o.attr("id")]=i)},e.baseSpacingHorz=12,e.uitkTypeaheadWidthPx=390,e.uitkTypeaheadMinWidthPx=282,e.resizeEventTypes="orientationchange resize",e}();i.registerPlugin(new a)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,n,o,i){"use strict";t.__esModule=!0;var r=[{}],a=function(){function e(){this.showHandlers={}}return e.optimizeDropDownGeometry=function(t,n){var o=4+document.body.clientWidth-2*e.baseSpacingHorz,i=4+Math.min(e.uitkTypeaheadMinWidthPx,o),r=4+Math.min(e.uitkTypeaheadWidthPx,o),a=Math.min(r,o),s=n.offset().left-2;s+a>o&&(s=e.baseSpacingHorz+o-a-2),s-=n.get(0).getBoundingClientRect().left,e.applyDropDownGeometry(t,s,r,i,a)},e.applyDropDownGeometry=function(e,t,n,o,i){e.css({left:t+"px","max-width":n+"px","min-width":o+"px",width:i+"px"})},e.prototype.handleDropDownShow=function(t,i,a){var s=this,l=n.Deferred();return e.applicableClients.indexOf(a.clientId)>=0?o.shouldExecute(a,r).done(function(e){e&&s.doHandleDropDownShow(t,i),l.resolve(void 0)}).fail(function(){l.resolve(void 0)}):l.resolve(void 0),l.promise()},e.prototype.doHandleDropDownShow=function(t,o){var i=function(n){e.optimizeDropDownGeometry(t,o)};i(null),n(window).on(e.resizeEventTypes,null,null,i);var r=o.attr("id");r&&(this.showHandlers[o.attr("id")]=i)},e.applicableClients=["Homepage","AWSHomepage","LXLandingPage","CarsLandingPage","FlightsLandingPage","HotelsLandingPage","PackageLandingPage","RailsLandingPage"],e.baseSpacingHorz=12,e.uitkTypeaheadWidthPx=600,e.uitkTypeaheadMinWidthPx=282,e.resizeEventTypes="orientationchange resize",e}();i.registerPlugin(new a)}),require(["require","exports","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,n,o){"use strict";t.__esModule=!0;var i=[{lobs:["NONE"]}],r="unspecified_area",a=function(){function e(){}return e.prototype.modifyParameters=function(e,t,o){return n.addFeatureFlag(r,i,e,t,o)},e}();o.registerPlugin(new a)}),define("typeahead/client/ActivitiesSearchResultsPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(){}return e.prototype.isApplicable=function(t){return e.APPLICABLE_CLIENT_ID===t},e.prototype.subscribeFormSubmitEvent=function(){$("body").on("click","a#toggleSearch",function(){$("button#srpSearch").click(function(){n.ClientHandlerRegistry.publishSubmitClickedMessage(e.rfrrIdPrefix),n.ClientHandlerRegistry.publishFormSubmittedMessage(!0)})})},e.prototype.subscribeFormLoadedEvent=function(){},e.prototype.getTab=function(){},e.prototype.getGeolocationViewController=function(){},e.rfrrIdPrefix="LX.SR|UpdateSearch",e.APPLICABLE_CLIENT_ID="LX.Search",e}();t.ActivitiesSearchResultsPageHandler=o}),define("typeahead/client/CarSearchResultsPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(){}return e.prototype.isApplicable=function(t){return e.APPLICABLE_CLIENT_ID===t},e.prototype.subscribeFormSubmitEvent=function(){$("body").on("click","a#wizard-toggle",function(){$("button#wizard-update").click(function(){n.ClientHandlerRegistry.publishSubmitClickedMessage(e.rfrrIdPrefix),n.ClientHandlerRegistry.publishFormSubmittedMessage(!0)})})},e.prototype.subscribeFormLoadedEvent=function(){},e.prototype.getTab=function(){},e.prototype.getGeolocationViewController=function(){},e.rfrrIdPrefix="CAR.SR|UpdateSearch",e.APPLICABLE_CLIENT_ID="Cars.Search",e}();t.CarSearchResultsPageHandler=o}),define("typeahead/client/ClientHandlerRegistry",["require","exports","typeahead/core/context","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage","typeahead/core/TypeaheadUtils","typeahead/core/util/Optional"],function(e,t,n,o,i,r,a,s,l,u,c,p){"use strict";t.__esModule=!0;var d=function(){function e(){}return e.handlePageLoad=function(){e.client=e.getClientHandler(c.TypeaheadUtils.getClientId()),e.client.isPresent()?(e.client.get().subscribeFormLoadedEvent(),e.client.get().subscribeFormSubmitEvent()):r["default"].log(new Error("No client handler for this page. Omniture logs may not work."),i.Severity.MustFix,o.ProblemOrigin.UniversalTypeahead)},e.getTab=function(){return e.client.isPresent()?e.client.get().getTab():void 0},e.registerClient=function(t){e.allClients.indexOf(t)<0&&e.allClients.push(t)},e.publishSubmitClickedMessage=function(e,t){l.TypeaheadMessage.publish(new s.SubmitClickedMessage(e,t)),l.TypeaheadMessage.publish(new u.UserExitedMessage)},e.publishFormSubmittedMessage=function(e,t){l.TypeaheadMessage.publish(new a.FormSubmittedMessage(e,n,t))},e.getGeolocationViewController=function(t){return e.client.isPresent()?e.client.get().getGeolocationViewController(t):void 0},e.getClientHandler=function(t){var n=void 0;if(t)for(var o=0;o<e.allClients.length;o++)if(e.allClients[o].isApplicable(t)){n=e.allClients[o];break}return p.Optional.ofNullable(n)},e.HSR_SUBMIT_SHOW_ERRORS_MESSAGE="hsr.submit.showErrors",e.HSR_SUBMIT_GET_QUERY_MESSAGE="hsr.submit.getQuery",e.allClients=[],e.client=p.Optional.ofNullable(void 0),e}();t.ClientHandlerRegistry=d}),define("typeahead/client/FlightSearchResultsPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry"],function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(){}return e.prototype.isApplicable=function(t){return e.APPLICABLE_CLIENT_ID===t},e.prototype.subscribeFormSubmitEvent=function(){$("body").on("click","#flight-wizard-search-button",function(){var t=function(){var e=$("#validation-alert");return!e.length};n.ClientHandlerRegistry.publishSubmitClickedMessage(e.rfrrIdPrefix),t()&&n.ClientHandlerRegistry.publishFormSubmittedMessage(!0)})},e.prototype.subscribeFormLoadedEvent=function(){},e.prototype.getTab=function(){},e.prototype.getGeolocationViewController=function(){},e.rfrrIdPrefix="FLT.SR|UpdateSearch",e.APPLICABLE_CLIENT_ID="Flights.Search",e}();t.FlightSearchResultsPageHandler=o}),define("typeahead/client/HotelSearchResultsPageHandler",["require","exports","typeahead/core/loc","typeahead/client/ClientHandlerRegistry","typeahead/core/geolocation/HsrpGeolocationViewController","typeahead/core/message/FormLoadedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,n,o,i,r,a){"use strict";t.__esModule=!0;var s=function(){function e(){}return e.prototype.isApplicable=function(t){return e.APPLICABLE_CLIENT_ID===t},e.prototype.subscribeFormSubmitEvent=function(){var e=this;$("form").on("click","button[type=submit]",function(e){if($(e.target).parents("form:has(input[data-provide=utypeahead])").length>0){var t=$(e.target).data("track");t=t.match(/(\w+).(\w+)/g)[0]+"|"+t.match(/(\w+).(\w+)/g)[1],$(e.target).removeAttr("data-track"),o.ClientHandlerRegistry.publishSubmitClickedMessage(t)}}),uitk.subscribe(o.ClientHandlerRegistry.HSR_SUBMIT_SHOW_ERRORS_MESSAGE,function(e,t){o.ClientHandlerRegistry.publishFormSubmittedMessage(t.isValid)}),uitk.subscribe(o.ClientHandlerRegistry.HSR_SUBMIT_GET_QUERY_MESSAGE,function(t,n){e.setLatLongForCurrentLocation(n)})},e.prototype.subscribeFormLoadedEvent=function(){uitk.subscribe(e.SEARCH_WIZARD_OPENED_MESSAGE,function(t,n){e.SEARCH_WIZARD_TOGGLE_BUTTON_ID===n.attr("id")&&a.TypeaheadMessage.publish(new r.FormLoadedMessage((void 0)))})},e.prototype.getTab=function(){},e.prototype.getGeolocationViewController=function(e){return this.geolocationViewController||(this.geolocationViewController=new i.HsrpGeolocationViewController(e)),this.geolocationViewController},e.prototype.setLatLongForCurrentLocation=function(e){var t=this.getLatLongFromUrl();this.isDestinationCurrentLocation()&&t&&($("#latLong").val(t),e.query&&e.query.indexOf("latLong")===-1&&(e.query+="&latLong="+t))},e.prototype.getLatLongFromUrl=function(){var e=function(e){return e&&e.match(/^[+-]?\d+\.\d+,[+-]?\d+\.\d+$/)?e:void 0};return e(this.getRequestParameterValue("latLong"))},e.prototype.isDestinationCurrentLocation=function(){var e=function(e){return!!e&&(e=e.replace(/\+/g," "),n.geolocationDisplayText===$("#inpSearchNear").val()&&n.geolocationDisplayText===e)};return e(this.getRequestParameterValue("destination"))},e.prototype.getRequestParameterValue=function(e){var t=new RegExp(e+"=([^&]*)&?").exec(decodeURIComponent(window.location.href));if(t&&t.length&&t[1])return t[1]},e.APPLICABLE_CLIENT_ID="Hotels.Search",e.SEARCH_WIZARD_OPENED_MESSAGE="toggle.opened",e.SEARCH_WIZARD_TOGGLE_BUTTON_ID="changeSearchWizard",e}();t.HotelSearchResultsPageHandler=s}),define("typeahead/client/MercuryWizardHandler",["require","exports","jquery","typeahead/client/ClientHandlerRegistry","typeahead/core/geolocation/MercuryGeolocationViewController","typeahead/core/message/FormLoadedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,n,o,i,r,a){"use strict";t.__esModule=!0;var s=function(){function e(){uitk.subscribe("sfSelectedLobs.updated",function(e,t){["flightHotel","flightHotelCar"].indexOf(t.searchSubType)>-1&&n("input[data-provide=utypeahead]").removeData("typeahead")})}return e.prototype.isApplicable=function(t){return e.APPLICABLE_CLIENT_IDS.indexOf(t)>-1},e.prototype.subscribeFormSubmitEvent=function(){n("form").on("click","button[type=submit]",function(e){n(e.target).parents("form:has(input[data-provide=utypeahead])").length>0&&o.ClientHandlerRegistry.publishSubmitClickedMessage(null,e)}),setTimeout(function(){n("form:has(input[data-provide=utypeahead])").on("submit.typeahead",function(e){var t=function(){var e=n("form:has(input[data-provide=utypeahead]):visible .validation-alert");return e.is(":hidden")||e.hasClass("visuallyhidden")};o.ClientHandlerRegistry.publishFormSubmittedMessage(t(),e)})},0)},e.prototype.subscribeFormLoadedEvent=function(){var e=this,t=function(){a.TypeaheadMessage.publish(new r.FormLoadedMessage(e.getTab()))};t(),uitk.subscribe("mercury-form-history-loaded",function(){t()})},e.prototype.getTab=function(){return n("li.tab:visible").children("button.on").data("lob")},e.prototype.getGeolocationViewController=function(e){return this.geolocationViewController||(this.geolocationViewController=new i.MercuryGeolocationViewController(e)),this.geolocationViewController},e.APPLICABLE_CLIENT_IDS=["Homepage","AWSHomepage","LXLandingPage","CarsLandingPage","FlightsLandingPage","HotelsLandingPage","PackageLandingPage","RailsLandingPage"],e}();t.MercuryWizardHandler=s}),define("typeahead/client/OpenSearchPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,n,o,i){"use strict";t.__esModule=!0;var r=function(){function e(){}return e.prototype.isApplicable=function(t){return e.APPLICABLE_CLIENT_ID===t},e.prototype.subscribeFormSubmitEvent=function(){var e=this;$("div.open-search-page").on("click","button#search-button",function(){$("#uta-search-query").val()&&e.publishSubmitMessages()}),i.TypeaheadMessage.subscribe(o.SuggestionSelectedMessage.getTopic(),function(t,n){setTimeout(function(){e.publishSubmitMessages()},0)})},e.prototype.subscribeFormLoadedEvent=function(){},e.prototype.getTab=function(){},e.prototype.getGeolocationViewController=function(){},e.prototype.publishSubmitMessages=function(){n.ClientHandlerRegistry.publishSubmitClickedMessage(e.rfrrIdPrefix),n.ClientHandlerRegistry.publishFormSubmittedMessage(!0)},e.rfrrIdPrefix="Open.Search|UpdateSearch",e.APPLICABLE_CLIENT_ID="OpenSearchPage",e}();t.OpenSearchPageHandler=r});
//# sourceMappingURL=universal_typeahead_bundle.min.js.map
