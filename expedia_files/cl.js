// Version: 2.134.1
// Commit: 5d4cd97ca70791c91e2eb62191a089321014ddf2
// Build date: 2017-09-07 11:46:08 UTC

/**
 * Client Logging
 *
 * Documentation available at http://go/fl0swg2n
 *
 * Settings (set them before loading the library):
 * - dctk.logging.pageStartTime (required)
 * - dctk.logging.pageName (required)
 * - dctk.logging.guid (required)
 * - dctk.logging.enabled
 * - dctk.logging.gcoAgent
 * - dctk.logging.agentLogonName
 * - dctk.logging.agentCallCenter
 * - dctk.logging.agentCountry
 * - dctk.logging.data
 *
 * TODO Include this documentation in the API Reference
 *
 * @preserve
 */
var dctk=window.dctk=window.dctk||{};dctk.logging=dctk.logging||{};var collectedErrors=window.collectedErrors;!function(){if(dctk.logging._loaded||dctk._loggingLoaded)return void setTimeout(function(){throw new Error("Client Logging was attempted to be loaded twice")});dctk.logging._loaded=!0,function(){"use strict";var n;if(n=function(){var n=!1;return{hasEntry:function(){return Boolean(this.getEntryAsQueryStringParameter())},getEntryAsQueryStringParameter:function(){if(n||!dctk.ewePerformance)return"";var e=dctk.ewePerformance.getPageUsableTime();return e&&e.length?"pageUsableTime="+Math.round(e[0].startTime):""},markAsSent:function(){n=!0}}}(),null==dctk.logging.enabled&&(dctk.logging.enabled=!0),dctk.logging.enabled){var e,t=[],i=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],o=[{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"Kindle",identity:"Kindle"},{string:navigator.userAgent,subString:"BB10",identity:"Blackberry"},{string:navigator.userAgent,subString:"Touch",addlString:"MSIE 10",identity:"Surface"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];dctk.logging.setProduction=function(n){e=n},dctk.logging._isProduction=function(){return null!=e?e:dctk.logging._isAProductionDomain()};var r=["www.expedia.com","www.expedia.co.uk","www.expedia.ca","www.expedia.de","www.expedia.it","www.expedia.es","www.expedia.nl","www.expedia.mx","www.expedia.com.sg","www.expedia.com.my","www.expedia.co.kr","www.expedia.co.th","www.expedia.com.hk","www.expedia.fr","www.expedia.com.au","www.expedia.co.in","www.expedia.co.jp","www.expedia.co.nz","www.expedia.co.id","www.expedia.com.tw","www.expedia.ie","www.expedia.be","www.expedia.se","www.expedia.no","www.expedia.dk","www.expedia.com.ph","www.expedia.com.br","www.expedia.com.ar","www.expedia.com.vn","www.expedia.fi","www.expedia.at","expedia.viaggi.virgilio.it","expedia.viaggi.tiscali.it","expedia.corriere.it","expedia.viaggi.deejay.it","expedia.allmusic.tv","voyages.anyway.com","yahoo.expedia.com.au","ninemsn.expedia.com.au","jal.expedia.co.jp","msn.expedia.co.jp","expedia-aarp.com","voyage-sncf.com","expediafortd.com","vacation.hotwire.com","www.travelocity.com","www.travelocity.ca","xsell.expedia.com","www.airasiago.com.my","orbitz.com",/(^|\.)wotif\.(com|co\.nz)$/];dctk.logging._isAProductionDomain=function(n){n=n||{},n._domain=n._domain||p,n._productionDomains=n._productionDomains||r;for(var e=0;e<n._productionDomains.length;e++)if(n._domain.match(n._productionDomains[e]))return!0;return!1};var a=function(n){for(var e=0;e<n.length;e++){var t=n[e].string,i=n[e].prop;if(dctk.logging.versionSearchString=n[e].versionSearch||n[e].identity,t){if(-1!=t.indexOf(n[e].subString)&&(!n[e].addlString||-1!=t.indexOf(n[e].addlString)))return n[e].identity||"unknown"}else if(i)return n[e].identity||"unknown"}},g=function(n){var e=n.indexOf(dctk.logging.versionSearchString);if(-1!=e)return parseFloat(n.substring(e+dctk.logging.versionSearchString.length+1))},c=function(n){return n.toISOString?n.toISOString():n.getFullYear().toString()+"-"+n.getMonth()+"-"+n.getDate()+"T"+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()},d=function(n,e,t){n.attachEvent?(n["e"+e+t]=t,n[e+t]=function(){n["e"+e+t](window.event)},n.attachEvent("on"+e,n[e+t])):n.addEventListener(e,t,!1)},s=function(e){n.hasEntry()&&(e.push(n.getEntryAsQueryStringParameter()),n.markAsSent()),C("/cl/1x1.gif"+h+"&pageName="+dctk.logging.pageName+"&guid="+l()+"&logTime="+c(new Date)+"&sessionDuration="+encodeURIComponent(N())+"&action=logTrxEvent&"+(e||[]).join("&"))},l=function(){return dctk.logging.guid||"unknown"},u=function(n){return window.performance&&performance.timing&&performance.timing[n]||NaN},m=a(i),w=g(navigator.userAgent)||g(navigator.appVersion)||"an unknown version",p=window.location.hostname,v=a(o),f="";if(dctk.logging.data)for(var k=0,S=dctk.logging.data.split("|");k<S.length&&S[k].length>0;k++)f+="&"+S[k];var h="?browser="+m+"&browserVersion="+w+"&platform="+v+"&domain="+p+"&live="+dctk.logging._isProduction()+f+function(){return dctk.logging.gcoAgent?"&gcoAgent=true&agentLogonName="+(dctk.logging.agentLogonName||"unknown")+"&agentCallCenter="+(dctk.logging.agentCallCenter||"unknown")+"&agentCountry="+(dctk.logging.agentCountry||"unknown"):null==dctk.logging.gcoAgent?"":"&gcoAgent=false"}();"performance"in window?dctk.logging.pageStartTime=window.performance.timing.responseStart:dctk.logging.pageStartTime=dctk.logging.pageStartTime||(new Date).getTime();var y=function(n){"complete"==document.readyState?n():d(window,"load",n)},E=function(n){y(function(){n({unloadTime:u("unloadEventEnd")-u("unloadEventStart"),redirectTime:u("redirectEnd")-u("redirectStart"),dnsTime:u("domainLookupEnd")-u("domainLookupStart"),connectionTime:u("connectEnd")-u("connectStart"),requestTime:u("responseStart")-u("requestStart"),responseTime:u("responseEnd")-u("responseStart"),parsingTime:u("domInteractive")-u("domLoading"),domReadyCallbackTime:u("domContentLoadedEventEnd")-u("domContentLoadedEventStart"),onLdCallbackTime:u("loadEventEnd")-u("loadEventStart"),processingTime:u("domComplete")-u("domLoading"),navigationToResponse:u("responseStart")-u("navigationStart"),navigationToDomContentLoaded:u("domContentLoadedEventStart")-u("navigationStart"),navigationToOnLd:u("loadEventStart")-u("navigationStart"),fetchToResponse:u("responseStart")-u("fetchStart"),fetchToDomContentLoaded:u("domContentLoadedEventStart")-u("fetchStart"),fetchToOnLd:u("loadEventStart")-u("fetchStart"),responseToDomContentLoaded:u("domContentLoadedEventStart")-u("responseStart"),responseToOnLd:u("loadEventStart")-u("responseStart"),navigationToDomInteractive:u("domInteractive")-u("navigationStart")})})};dctk.logging.navTiming={},dctk.logging.browser=m,dctk.logging.version=w,dctk.logging.OS=v,dctk.logging.logTrxEvent=function(n,e){var t=[n+"_elapsedTime="+((new Date).getTime()-dctk.logging.pageStartTime)];e&&(t=t.concat(dctk.logging._normalizeMessageParams(e))),s(t)},dctk.logging.trxEventWrapper=function(n,e,t){return function(){var i=(new Date).getTime(),o=n.apply(t||dctk.logging,arguments),r=(new Date).getTime();return s([e+"_elapsedTime="+(r-dctk.logging.pageStartTime),"clEventName01="+e,"clEventTime01="+(r-i)]),o}},dctk.logging.logMessage=function(n,e){var t=dctk.logging._normalizeMessageParams(function(){var e={logTime:c(new Date),action:"logErrors",label:n,pageName:dctk.logging.pageName,pageUrl:window.location.href,guid:l(),clientWidth:document.documentElement.clientWidth};return e[n+"_elapsedTime"]=(new Date).getTime()-dctk.logging.pageStartTime,e}());t=t.concat(dctk.logging._normalizeMessageParams(e)),C("/cl/2x2.gif"+h+"&"+t.join("&"))},dctk.logging.logError=function(n,e,t){var i=dctk.logging._normalizeMessageParams(e?L(e):{onError:"NA"});i=i.concat(dctk.logging._normalizeMessageParams(t)),dctk.logging.logMessage(n,i),A(n+"\n"+i.join("\n"))},dctk.logging.reset=function(){dctk.logging.pageStartTime=(new Date).getTime()},dctk.logging.subscribeToOnerrorCallback=function(n){t.push(n)},dctk.logging.publishOnerrorCallback=function(){for(var n=0;n<t.length;n++)"function"==typeof t[n]&&t[n]()},dctk.logging.setPageName=function(n){dctk.logging.pageName=n};var x=window.onerror,b={};dctk.logging._onerror=function(n,e,t,i,o){var r=o?L(o):{onErrorMsg:n};r.onErrorUrl=e,r.onErrorLine=t,r.onErrorChar=null==i?"NA":i,b[n]=(b[n]||0)+1;var a=100==b[n];a&&(r.exceedsErrorThreshold="true"),(1==b[n]||a)&&dctk.logging.logMessage("windowOnError",r),dctk.logging.publishOnerrorCallback()},window.onerror=function(){try{x&&x.apply(window,arguments)}finally{dctk.logging._onerror.apply(dctk.logging,arguments)}},dctk.loggingAdapter=dctk.logging,dctk.logging._normalizeMessageParams=function(n){if(!n)return[];if("string"==typeof n)return[n];if(!(n instanceof Array)){var e=[];for(var t in n)e.push(encodeURIComponent(t)+"="+encodeURIComponent(T(n[t])));n=e}return n};var T=function(n){return'"'+String(n).replace(/"/g,"ï¼‚")+'"'},A=function(n){try{console.error(n)}catch(e){try{console.log(n)}catch(n){}}};dctk.logging._beaconImages=[];var C=function(n){var e=new Image;e.src=n,dctk.logging._beaconImages.push(e)},L=function(n){return n=_(n),{onErrorMsg:n.message,onErrorUrl:n.sourceURL,onErrorLine:n.line,onErrorChar:n.col,stack:n.stack?n.stack.substr(0,200):"NA"}},_=function(n){var e,t="NA",i="NA",o="NA";try{n&&n.stack&&(e=n.stack.match(/\(([^\)]+\d+)\)/),e||(e=n.stack.match(/@([^\)]+\d+)\n/)),e&&(e=e[1].split(":"),t=e.pop(),i=e.pop(),o=e.join(":")))}catch(n){}return n&&(n={sourceURL:n.sourceURL||n.fileName||o,line:n.line||n.lineNumber||i,col:n.columnNumber||t,message:n.message,stack:n.stack||"NA"}),n},N=function(){var n,e,t,i,o,r,a;e=(new Date).getTime();try{if(!window.localStorage)return;t="dctk_clientLogging_firstInteractionTimestamp",i="dctk_clientLogging_lastInteractionTimestamp",o=Number(localStorage.getItem(i)),n=Number(localStorage.getItem(t)),r=e-o>18e5,a=0===n,(r||a)&&(n=e,localStorage.setItem(t,n)),o=e,localStorage.setItem(i,o)}catch(t){n=e}return e-n},P=function(n){var e=[];for(var t in n){var i=n[t];null==i||isNaN(i)||e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}return e.join("&")};!function(){E(function(e){dctk.logging.navTiming=e;var t=P(e);n.hasEntry()&&(t=[t,n.getEntryAsQueryStringParameter()].join("&"),n.markAsSent()),dctk.logging.logTrxEvent("navTiming",t)})}(),function(){setInterval(s([]),6e4)}()}}(),"function"==typeof define&&define.amd&&define("dctk/clientLogging",function(){return dctk.logging})}(),collectedErrors&&(collectedErrors.forEach(function(n){dctk.logging.logError(n)}),collectedErrors=null);
