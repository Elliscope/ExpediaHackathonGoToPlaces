require("gcw-custom-typeahead.hbs");define("gcwControllers","GcwActivitiesControllers GcwCarsControllers GcwCruisesControllers GcwFlightsControllers GcwHotelsControllers GcwPackagesControllers GcwRailsControllers".split(" "),function(g,f,e,b,a,c,d){return{activities:function(a,c,d,b){a=new g(a,c,d,b);a.init();return a},cars:function(a,c,d,b){a=new f(a,c,d,b);a.init();return a},cruises:function(a,c,d,b){a=new e(a,c,d,b);a.init();return a},flights:function(a,c,d,e){a=new b(a,c,d,e);a.init();return a},hotels:function(c,d,b,e){c=new a(c,d,b,e);c.init();return c},packages:function(a,d,b,e){a=new c(a,d,b,e);a.init();return a},rails:function(a,c,b,e){a=new d(a,c,b,e);a.init();return a}}});define("GcwActivitiesControllers",["classCheck","uitk","jquery","GcwUtilsControllers"],function(g,f,e,b){function a(d,b,m,e){g(this,a);c=this;c.$form=d;c.idSuffix=b;c.storedData=m;c.fieldsCollection=e}var c;a.prototype.init=function(){c.registerEvents();c.$form.data("gcw-original-action",c.$form.attr("action"));window.lx||(window.lx={})};a.prototype.registerEvents=function(){c.$form.on("change","[name\x3dgtDirection]",function(a){b.setHotel(c.idSuffix);b.swapGtSchedule(c.idSuffix,a.currentTarget.value)});f.subscribe("typeahead.opened",function(a,b){window.lx&&!window.lx.cache&&(window.lx.cache={});if(document.activeElement.id==="hotel-origin"+c.idSuffix||document.activeElement.id==="hotel"+c.idSuffix)window.lx.cache.hotelSuggestionsMap={},e.each(b.results,function(a){a=this.regionNames.fullName;a=e("\x3cinput /\x3e").html(a).text();var c={};c.hotelId=this.hotelId;c.lat=this.coordinates.lat;c["long"]=this.coordinates["long"];window.lx.cache.hotelSuggestionsMap[a]=c});else if(document.activeElement.id==="flight-origin"+c.idSuffix||document.activeElement.id==="flight"+c.idSuffix)window.lx.cache.airportSuggestionsMap={},e.each(b.results,function(a){a=this.hierarchyInfo.airport.airportCode;var c={};c.regionId=this.hierarchyInfo.airport.multicity;c.lat=this.coordinates.lat;c["long"]=this.coordinates["long"];c.airportFullName=this.regionNames.fullName;window.lx.cache.airportSuggestionsMap[a]=c})});f.subscribe("typeahead.resultSelected",function(a,l){var d=c.idSuffix,e;document.activeElement.id==="flight-origin"+d?e="#hotel":document.activeElement.id==="flight"+d&&(e="#hotel-origin");e=c.$form.find(e+d);b.changeRegionIdOnAirportSelectionFromTASuggestion(d,l,e)});c.$form.on("focus","#hotel-origin"+c.idSuffix,function(){var a=c.$form.find("#hotel-origin"+c.idSuffix),l=c.$form.find("#flight"+c.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(c.idSuffix,a,l)});c.$form.on("focus","#hotel"+c.idSuffix,function(){var a=c.$form.find("#hotel"+c.idSuffix),l=c.$form.find("#flight-origin"+c.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(c.idSuffix,a,l)})};return a});
define("GcwCarsControllers",["classCheck","uitk","jquery","GcwUtilsControllers","xdate"],function(g,f,e,b,a){function c(a,b,e,k){g(this,c);d=this;d.$form=a;d.idSuffix=b;d.storedData=e;d.fieldsCollection=k}var d;c.prototype.init=function(){var a=d.storedData;d.registerEvents();window.lx||(window.lx={});a&&a["gcw-car-gt-type"]&&d.$form.data("gcw-error-msg-id","gcw_gtDepartureArrivalTimingDifferenceErrorMessage");d.carVendorToggle();d.$form.data("gcw-original-action",d.$form.attr("action"));0<d.$form.find(".gcw-cars-time-select").length&&d.LoadCarDateTime()};c.prototype.registerEvents=function(){var a=d.$form.data("gcw-error-msg-id");d.$form.on("change",".gcw-toggle-car-vendors, .gcw-toggle-discount-codes",function(){d.carVendorToggle()});d.$form.on("change","[name\x3dgtDirection]",function(a){b.setHotel(d.idSuffix);b.swapGtSchedule(d.idSuffix,a.currentTarget.value)});d.$form.on("change",".gcw-sub-nav-option",function(c){c=e(c.currentTarget).attr("value");"ttdGroundTransport"===c||"carsGroundTransport"===c?d.$form.data("gcw-error-msg-id","gcw_gtDepartureArrivalTimingDifferenceErrorMessage"):d.$form.data("gcw-error-msg-id",a)});f.subscribe("typeahead.opened",function(a,c){window.lx&&!window.lx.cache&&(window.lx.cache={});if(document.activeElement.id==="hotel-origin"+d.idSuffix||document.activeElement.id==="hotel"+d.idSuffix)window.lx.cache.hotelSuggestionsMap={},e.each(c.results,function(a){a=this.regionNames.fullName;a=e("\x3cinput /\x3e").html(a).text();var c={};c.hotelId=this.hotelId;c.lat=this.coordinates.lat;c["long"]=this.coordinates["long"];window.lx.cache.hotelSuggestionsMap[a]=c});else if(document.activeElement.id==="flight-origin"+d.idSuffix||document.activeElement.id==="flight"+d.idSuffix)window.lx.cache.airportSuggestionsMap={},e.each(c.results,function(a){a=this.hierarchyInfo.airport.airportCode;var c={};c.regionId=this.hierarchyInfo.airport.multicity;c.lat=this.coordinates.lat;c["long"]=this.coordinates["long"];c.airportFullName=this.regionNames.fullName;window.lx.cache.airportSuggestionsMap[a]=c})});f.subscribe("typeahead.resultSelected",function(a,c){var l=d.idSuffix,m;document.activeElement.id==="flight-origin"+l?m="#hotel":document.activeElement.id==="flight"+l&&(m="#hotel-origin");m=d.$form.find(m+l);b.changeRegionIdOnAirportSelectionFromTASuggestion(l,c,m)});d.$form.on("focus","#hotel-origin"+d.idSuffix,function(){var a=d.$form.find("#hotel-origin"+d.idSuffix),c=d.$form.find("#flight"+d.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(d.idSuffix,a,c)});d.$form.on("focus","#hotel"+d.idSuffix,function(){var a=d.$form.find("#hotel"+d.idSuffix),c=d.$form.find("#flight-origin"+d.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(d.idSuffix,a,c)})};c.prototype.carVendorToggle=function(){var a=d.$form.find(".gcw-toggle-car-vendors"),c=d.$form.find(".gcw-car-vendor-field"),b=c.find("select option:selected").val(),k=a.find("option:selected").data("gcw-toggled-vendor"),n=[],f=[];c.find("select option").each(function(a,c){0===e(c).parent("span").length&&e(c).wrap('\x3cspan style\x3d"display: none;" /\x3e');e(c).prop("disabled",!0).prop("selected",!1);n=e(c).data("gcw-discount-code-availability").split(",");-1<n.indexOf(k)&&f.push(e(c))});e.each(f,function(a,c){0<e(c).parent("span").length&&e(c).unwrap();e(c).prop("disabled",!1);e(c).val()===b&&e(c).prop("selected",!0)});c.find("select option:selected").val()||c.find("select option:enabled").eq(0).prop("selected",!0);a=d.discountCouponConfig(k);d.toggleCouponInputs(a)};c.prototype.toggleCouponInputs=function(a){var c={$corpCode:d.$form.find(".gcw-corp-code"),$rateCode:d.$form.find(".gcw-rate-code"),$couponCode:d.$form.find(".gcw-coupon-code"),$otherCouponCode:d.$form.find(".gcw-other-coupon-code")};e.each(c,function(a,c){c.addClass("gcw-disabled").find("input").prop("disabled",!0)});a&&(a.corp&&(c.$corpCode.removeClass("gcw-disabled").find("span").text(a.corp),c.$corpCode.find("input").prop("disabled",!1)),a.rate&&(c.$rateCode.removeClass("gcw-disabled").find("span").text(a.rate),c.$rateCode.find("input").prop("disabled",!1)),a.coupon&&(c.$couponCode.removeClass("gcw-disabled").find("span").text(a.coupon),c.$couponCode.find("input").prop("disabled",!1)),a.other&&(c.$otherCouponCode.removeClass("gcw-disabled").find("span").text(a.other),c.$otherCouponCode.find("input").prop("disabled",!1)))};c.prototype.discountCouponConfig=function(a){var c=d.$form.find(".gcw-car-vendor-field select option:selected").data("gcw-discount-code-data"),b={};if(c)switch(a){case "corp":c.split(",").forEach(function(a){"corp"===a.split("-")[0]&&(b[a.split("-")[0]]=a.split("-")[1])});break;case "special":c.split(",").forEach(function(a){"corp"!==a.split("-")[0]&&(b[a.split("-")[0]]=a.split("-")[1])})}return b};c.prototype.getCarNextPickupTime=function(a,c){var d="AM",b=a.getHours(),l=a.getMinutes();if(0<=l&&l<c)l=c;else{for(var m=c;l>=c;)c+=m;l=c;59<c&&(l=0,b+=1)}m=b;12<b&&24>b?(d="PM",m=b-12):0===b||24===b?m=12:12===b&&(d="PM");return(10>m?"0"+m:m).toString()+(0<=l&&10>l?"0"+l:l).toString()+d};c.prototype.getCarDateFormat=function(a,c){if(""===c||void 0===c)c="mm/dd/yyyy";return a.toString(c.replace(/m/g,"M").replace(/D/g,"d").replace(/Y/g,"y"))};c.prototype.LoadCarDateTime=function(){var c=new a,b=30,e=d.$form.find(".gcw-load-default-pickup-time option:eq(10)").val(),k=d.$form.find(".gcw-load-default-pickup-time option:eq(11)").val();""!==e&&void 0!==e&&""!==k&&void 0!==k&&(b=d.TimeIntervalCalculation(e,k));b=d.getCarNextPickupTime(c,b);d.$form.find(".gcw-load-default-pickup-time").attr("selected","selected").val(b);d.$form.find(".gcw-load-default-dropoff-time").attr("selected","selected").val(b);b=d.$form.find(".gcw-load-default-pickup-date").data("gcw-date-format");c=d.getCarDateFormat(c,b);d.$form.find(".gcw-load-default-pickup-date").val(c);c=(new a).addDays(4);c=d.getCarDateFormat(c,b);d.$form.find(".gcw-load-default-dropoff-date").val(c)};c.prototype.TimeIntervalCalculation=function(a,c){var d=30,b,l,m,e;6===a.length&&6===c.length?(b=a.slice(0,2),l=c.slice(0,2),m=a.slice(2,4),e=c.slice(2,4)):(b=a.slice(0,1),l=c.slice(0,1),m=a.slice(1,3),e=c.slice(1,3));l!==b?d=m===e?1<=l-b?60*(l-b):12===parseInt(b)?60*l:0:m>e?parseInt(e)+(60-m):e-m+(1<=l-b?60*(l-b):12===parseInt(b)?60*l:0):e>m&&(d=e-m);isNaN(d)&&(d=30);return d};return c});
define("GcwCruisesControllers",["classCheck"],function(g){function f(b,a,c,d){g(this,f);e=this;e.$form=b;e.idSuffix=a;e.storedData=c;e.fieldsCollection=d}var e;f.prototype.init=function(){e.registerEvents();e.setCruiseLine();e.setCruisesMonths()};f.prototype.registerEvents=function(){e.$form.on("change",".gcw-cruise-lane-select",function(b){e.cruiseLineSelected($(b.target))})};f.prototype.cruiseLineSelected=function(b){var a=e.$form.find(".gcw-cruise-lane select");b=e.$form.find(".gcw-cruise-ship");var c=e.$form.find(".cruise-ship"),a=a.val(),a=e.$form.find("#ship-name-"+a+e.idSuffix);b.addClass("gcw-disabled");0<a.length?a.parent().removeClass("gcw-disabled"):c.parent().removeClass("gcw-disabled")};f.prototype.setCruiseLine=function(){var b=e.$form.find(".gcw-cruise-lane select"),a;e.storedData&&(b=e.storedData[b.data("gcw-storeable-name")])&&(b=e.$form.find("#ship-name-"+b+e.idSuffix))&&0<b.length&&(e.$form.find(".cruise-ship").parent().addClass("gcw-disabled"),b.parent().removeClass("gcw-disabled"),(a=e.storedData[b.data("gcw-storeable-name")])&&b.val(a))};f.prototype.setCruisesMonths=function(){var b=e.$form.find(".gcw-months-loc"),a=e.$form.find(".gcw-cruise-departure-month select"),c=a.data("gcw-date-value-format"),d=a.data("gcw-months-options")?a.data("gcw-months-options"):23;if(b.length&&1>=a.find("option").length){var b=b.val().split(";"),l=new Date,m=l.getMonth(),l=l.getFullYear(),q,k,n;e.storedData&&(q=e.storedData[a.data("gcw-storeable-name")]);for(var f=1;f<=d;f++)k=b[m]+" "+l.toString(),m+=1,"YYYY-MM-DD"===c?(n=m.toString(),n=1===n.length?"0"+n:n,n=l.toString()+"-"+n+"-01"):"Mmm+DD+YYYY"===c?(n=b[m-1].slice(0,3),n+=1===f?"+13,":"+01,",n+=l.toString()):n=m.toString()+"X"+l.toString(),l=11<m?l+1:l,m=11<m?0:m,q&&q===n?a.append("\x3coption selected value\x3d"+n+"\x3e"+k+"\x3c/option\x3e"):a.append("\x3coption value\x3d"+n+"\x3e"+k+"\x3c/option\x3e")}};return f});define("GcwFlightsControllers",["classCheck","GcwUtilsControllers"],function(g,f){function e(a,c,d,l){g(this,e);b=this;b.$form=a;b.idSuffix=c;b.storedData=d;b.fieldsCollection=l}var b;e.prototype.init=function(){b.registerEvents();b.loadMultiFlightLegData();f.setRoomContainerClass(b.$form)};e.prototype.registerEvents=function(){b.$form.on("change",".gcw-rooms-field",function(a){f.setRoomContainerClass(b.$form)});f.addFieldHandler(b);f.removeFieldHandler(b)};e.prototype.addFields=function(){var a=b.$form.find("[data-gcw-additional-fields]"),c=a.last().find(".datepicker"),d=a.last().attr("id"),l=c.attr("id"),m=a.last(),c=b.$form.find("[data-gcw-add-fields]"),e=a.length+2,k,f;m.hasClass("gcw-disabled")?(m.removeClass("gcw-disabled"),b.removeFlightLegEnabled()):(a=m.clone().find("input").val("").removeAttr("data-typeahead").end(),a.attr("id",d.replace(e-1,e)),a.find(".datepicker").attr("id",l.replace(e-1,e)),d=a.find('input[type\x3d"text"]'),l=a.find('input[type\x3d"hidden"]'),d.each(function(){var a=$(this);b.setDataAttrForUta(a,e,!0);k=a.attr("data-gcw-storeable-name").slice(0,-1);f=a.attr("id");var c=f.replace(e-1,e),d=k+e;a.attr("data-gcw-storeable-name",d);a.data("gcw-storeable-name",d);a.attr("id",c);a.closest("label").attr("for",c);b.flightLegValid(a)}),l.each(function(){var a=$(this);k=a.attr("data-gcw-storeable-name");f=a.attr("id");var c=f.replace(e-1,e),d=k.replace(e-1,e);a.attr("data-gcw-storeable-name",d);a.data("gcw-storeable-name",d);a.attr("id",c)}),c.before(a),b.removeFlightLegEnabled(),b.addFieldsInCollection(a))};e.prototype.focusNextEl=function(){b.$form.find("input[type\x3dtext].gcw-origin").last().focus().select()};e.prototype.removeFlightLegEnabled=function(){var a=b.$form.find("[data-gcw-additional-fields]"),c=a.length,a=a.find("a"),d=$(".gcw-add-flight-leg");1<c?a.removeClass("gcw-disabled"):a.addClass("gcw-disabled");4<=c?d.addClass("gcw-disabled"):d.removeClass("gcw-disabled")};e.prototype.addFieldsInCollection=function(a){a.find("input").each(function(){b.fieldsCollection.add($(this))})};e.prototype.removeFieldsFromCollection=function(a){a.find("input").each(function(){b.fieldsCollection.remove($(this))})};e.prototype.removeFields=function(a){var c=b.$form.find("[data-gcw-additional-fields]"),d=c.attr("id"),l=!1,m;1<c.length?(a=a.closest(c),c=c.last().find("input"),a.remove(),c.each(function(){(m=$(this).data("gcw-storeable-name"))&&uitk.publish("gcw.storedDataUpdate",{targetStoreableName:m})}),c=b.$form.find("[data-gcw-additional-fields]"),b.readjustFlightLegNumbers(c),l=!0,b.removeFlightLegEnabled(),b.removeFieldsFromCollection(a)):(a.closest(c).attr("id",d),b.removeFlightLegEnabled());uitk.utils.focusElement(b.$form.find("#add-flight-leg"+b.idSuffix));return l};e.prototype.readjustFlightLegNumbers=function(a){var c,d,l,m,e,k,f,g,r;for(r=0;r<a.length;r++)c=$(a[r]),d=c.find(".datepicker"),l=parseInt(c.attr("id").match(/\d+/)[0],10),l!==r+2&&(f=r+2,m=c.attr("id"),d=d.attr("id"),c.attr("id",m.replace(l,f)),c.find(".datepicker").attr("id",d.replace(l,f)),c.find("input[type\x3dtext]").each(function(){var a=$(this);e=a.attr("id");k=a.attr("data-gcw-storeable-name").slice(0,-1);var c=e.replace(l,f),d=k+f;b.setDataAttrForUta(a,f,!1,l);a.attr("id",c);a.attr("data-gcw-storeable-name",d);a.data("gcw-storeable-name",d);a.parent("label").attr("for",c)}),c.find("input[type\x3dhidden]").each(function(){var a=$(this);g=a.attr("data-gcw-storeable-name");e=a.attr("id");var c=e.replace(l,f),d=g.replace(l,f);a.attr("data-gcw-storeable-name",d);a.data("gcw-storeable-name",d);a.attr("id",c)}))};e.prototype.setDataAttrForUta=function(a,c,d,b){d=d?c-1:b;a.hasClass("datepicker-trigger-input")||(b=a.attr("data-airport_code_element").replace(d,c),a.attr("data-airport_code_element",b),a.data("airport_code_element",b),b=a.attr("data-hotel_id_element").replace(d,c),a.attr("data-hotel_id_element",b),a.data("hotel_id_element",b),b=a.attr("data-lat_long_element").replace(d,c),a.attr("data-lat_long_element",b),a.data("lat_long_element",b),b=a.attr("data-region_id_element").replace(d,c),a.attr("data-region_id_element",b),a.data("region_id_element",b),b=a.attr("data-region_type_element").replace(d,c),a.attr("data-region_type_element",b),a.data("region_type_element",b),b=a.attr("data-station_code_element").replace(d,c),a.attr("data-station_code_element",b),a.data("station_code_element",b),b=a.attr("data-city_element").replace(d,c),a.attr("data-city_element",b),a.data("station_code_element",b),b=a.attr("data-country_code_element").replace(d,c),a.attr("data-country_code_element",b),a.data("country_code_element",b),b=a.attr("data-category_element").replace(d,c),a.attr("data-category_element",b),a.data("category_element",b),b=a.attr("data-heds_element").replace(d,c),a.attr("data-heds_element",b),a.data("heds_element",b),b=a.attr("data-search_name_element").replace(d,c),a.attr("data-search_name_element",b),a.data("search_name_element",b),b=a.attr("data-point_of_supply_element").replace(d,c),a.attr("data-point_of_supply_element",b),a.data("point_of_supply_element",b),c=a.attr("data-ta_element").replace(d,c),a.attr("data-ta_element",c),a.data("ta_element",c))};e.prototype.loadMultiFlightLegData=function(){var a=0,c;if(b.storedData)for(c in b.storedData)3===c.indexOf("-multidest-")&&a++;1<a&&b.addFieldsFromStorage(a);return[a]};e.prototype.addFieldsFromStorage=function(a){var c=3;for(c;c<=a+1;c++)b.addFields(),b.$form.find(".gcw-multidest-flights-container").find(".gcw-storeable").each(function(){var a=$(this),c=a.data("gcw-storeable-name");a.val(b.storedData[c])})};e.prototype.flightLegValid=function(a){a.parent().removeClass("invalid")};return e});
define("GcwHotelsControllers",["classCheck","jquery","GcwUtilsControllers"],function(g,f,e){function b(c,d,l,m){g(this,b);a=this;a.$form=c;a.idSuffix=d;a.storedData=l;a.fieldsCollection=m}var a;b.prototype.init=function(){a.registerEvents();e.setRoomContainerClass(a.$form);a.setNRoomsClass();a.disableFlightAndCar()};b.prototype.registerEvents=function(){var c=a.$form.find(".gcw-guests-select"),d="#hotel-rooms"+a.idSuffix+", #hotel-1-adults"+a.idSuffix+", #hotel-1-children"+a.idSuffix;c.length&&(a.$form.on("change",d,function(){a.applyGuestsRules()}),a.$form.on("guestsChange",c,function(){a.applyGuestsRules();e.setRoomContainerClass(a.$form)}),a.$form.on("change",c,function(c){var d=a.$form.find(".gcw-guests-select select").data("gcw-guests-toggled-field-on-value").toString();f(c.target).val()===d&&f(c.target).addClass("guestsInactive");a.applyGuestsRules()}),a.applyGuestsRules());a.$form.on("change setNRoomsClass",".gcw-rooms-field",function(c){e.setRoomContainerClass(a.$form);a.setNRoomsClass();a.disableFlightAndCar()})};b.prototype.applyGuestsRules=function(){var c=a.$form.find(".gcw-guests-select select").hasClass("guestsInactive"),d=a.$form.find(".hotels.room-data"),b=d.find(".num-adults").val()[0],m=d.find(".num-children").val()[0],e=a.$form.find(".gcw-rooms-field").find("select").val(),k=!1,d=a.$form.find(".gcw-guests-select"),d=a.getGuestsRules(d.find("select").data("gcw-guests-field-visible-on"));f.each(d,function(a,c){c.adults===b&&c.children===m&&c.rooms===e&&(k=!0)});c?a.toggleGuestsField(!1):a.toggleGuestsField(k)};b.prototype.setNRoomsClass=function(){var c=a.$form.find(".gcw-rooms-container");if(c.length){var d=a.$form.find(".gcw-rooms-field").find("select").val(),b=c.attr("class").split(" "),m;f.each(b,function(a,c){-1<c.indexOf("total-rooms")&&(m=b.indexOf(c))});c.removeClass();m&&b.splice(m,1);b.push("gcw-total-rooms-"+d);c.addClass(b.toString().replace(/,/g," "))}};b.prototype.getGuestsRules=function(a){var c={};f.each(a.split(","),function(a,d){c["rule"+a]={};f.each(d.split("\x26"),function(d,b){c["rule"+a][b.split("-")[0]]=b.split("-")[1]})});return c};b.prototype.disableFlightAndCar=function(){var c=a.$form.find(".gcw-hotel-add-flight"),d=a.$form.find(".gcw-hotel-add-car"),b=a.$form.find("#disable-flight-package-wrapper"+a.idSuffix),m=a.$form.find("#disable-car-package-wrapper"+a.idSuffix),e=a.$form.find(".gcw-rooms-field").find("select").val();3<("group"===e?9:e)?(c.addClass("gcw-disabled"),d.addClass("gcw-disabled"),b.removeClass("gcw-disabled"),m.removeClass("gcw-disabled")):(c.removeClass("gcw-disabled"),d.removeClass("gcw-disabled"),b.addClass("gcw-disabled"),m.addClass("gcw-disabled"))};b.prototype.toggleGuestsField=function(c){var d=a.$form.find(".gcw-guests-select"),b=a.$form.find(".gcw-rooms-field"),m=a.$form.find(".hotels.room-data");c?(d.removeClass("gcw-disabled"),b.addClass("gcw-disabled"),m.first().addClass("gcw-disabled")):(d.addClass("gcw-disabled"),b.removeClass("gcw-disabled"),m.first().removeClass("gcw-disabled"))};return b});define("GcwPackagesControllers",["classCheck","GcwUtilsControllers"],function(g,f){function e(a,c,d,l){g(this,e);b=this;b.$form=a;b.idSuffix=c;b.storedData=d;b.fieldsCollection=l}var b;e.prototype.init=function(){b.registerEvents();f.setRoomContainerClass(b.$form)};e.prototype.registerEvents=function(){var a=b.$form.find(".gcw-rooms-field");b.$form.on("change",a,function(a){f.setRoomContainerClass(b.$form)});b.$form.on("change",".gcw-partial-hotel",function(a){b.reflectHotelPartialStayDates($(a.target))})};e.prototype.reflectHotelPartialStayDates=function(a){if(a.prop("checked")){a=b.$form.find(".gcw-start-date:visible").first();var c=b.$form.find(".gcw-partial-start-date:visible").first(),d=b.$form.find(".gcw-end-date:visible").first(),l=b.$form.find(".gcw-partial-end-date:visible").first();""===c.val()&&c.val(a.val());""===l.val()&&l.val(d.val())}};return e});require("uitk_localized_dateApi");
define("GcwRailsControllers",["classCheck","uitk","jquery","GcwUtilsProcessingFunctions"],function(g,f,e,b){function a(d,b,e,k){g(this,a);c=this;c.$form=d;c.idSuffix=b;c.storedData=e;c.fieldsCollection=k}var c;a.prototype.init=function(){c.registerEvents();c.loadRailcardData();if(c.isCrossSupply()){var a=c.$form.find(".gcw-origin:visible");(a=b.getUTAFeature(a,"point_of_supply"))&&c.loadFormFieldsBasedOnPOS(a)}a=c.$form.find(".gcw-rails-time-select");if(0<a.length){var d=c.getDepartureTime();a.each(function(a,c){e(c).val(d)})}};a.prototype.registerEvents=function(){c.$form.on("click",".gcw-add-fields",function(a){a.preventDefault();c.addFields();c.focusSelect()});c.$form.on("click",".gcw-remove-fields",function(a){var d=e(a.target);a.preventDefault();c.removeFields(d)});c.$form.on("change railcardEnabled",".gcw-railcard-select",function(a){a=e(a.target);c.railcardNumberEnabled(a);c.railcardValid(a)});var a=c.isCrossSupply();if(c.$form.hasClass("gcw-rails-cross-country-class")||a){var b=c.$form.find(".datepicker"),q,k,n,g,r,t,u;f.subscribe("typeahead.suggestion_selected",function(l,m){if(a){r=m.suggestion.data.hierarchyInfo.rails.pointOfSupply;var e=r;if(e.constructor===Array)b:{for(var e=c.$form.data("siteid"),h=c.$form.find(".gcw-supply-mapping-with-siteid").data("gcw-supply-mapping-with-siteid").split(";"),v=0,f=h.length;v<f;v++)if(+h[v].split(":")[1]===+e){e=h[v].split(":")[0];break b}e=void 0}r=e;c.loadFormFieldsBasedOnPOS(r)}n=m.suggestion.data.hierarchyInfo.country.name;-1<m.domElementId.indexOf("rail-destination")?k=d(n):q=d(n);if(g=q||k)t=c.$form.data("last-valid-date-enabled"),u=c.getLastValidTravelDate(t),c.updateLastValidDate(b,u.shortDate())})}};a.prototype.isCrossSupply=function(){return"true"===e(".gcw-rails-cross-supply-flag").val()};a.prototype.loadFormFieldsBasedOnPOS=function(a){var d=c.$form.find(".datepicker"),b,l,e,f;l=c.$form.find(".gcw-"+a.toLowerCase()+"-config").data("gcw-"+a.toLowerCase()+"-config");a=c.getLastValidTravelDate(l.lastValidTravelDate);b=l.anytimeSearchSupported;e=l.railCardOptions;f=l.railcardsVisible;c.updateLastValidDate(d,a.shortDate());c.updateAnytimeSelect(b);c.updateRailCard(f,e);c.updateValidation(l)};a.prototype.updateValidation=function(a){c.$form.data("gcw-max-travelers",a.maxTravelers);c.$form.data("rail-age-boundary",a.ageBoundary);c.$form.data("rail-accompanying-age",a.accompanyingAge)};a.prototype.updateRailCard=function(a,d){var b=c.$form.find(".railcard-data");if(a){var l=c.$form.find(".gcw-railcard-select");b.show();l.find("option").remove().end();l.val(c.$form.find(".gcw-railcard-select option:first").val());e.each(d,function(){e("\x3coption/\x3e",{value:this.value,text:this.label}).appendTo(l)});c.railcardNumberEnabled(l);c.$form.find(".gcw-remove-fields").trigger("click")}else b.hide()};a.prototype.updateAnytimeSelect=function(a){var d=c.$form.find("select[name\x3deTime], select[name\x3dsTime]"),b=d.find("option:first");a?b.show():(b.hide(),a=c.getDepartureTime(),d.val(a))};a.prototype.updateLastValidDate=function(a,c){a.uitk_datepicker("updateOptions",{lastValidDate:c});a.data("last-valid-date",c)};var d=function(a){return-1<"Österreich;Schweiz;Tschechische Republik;Dänemark;Frankreich;Kroatien;Ungarn;Italien;Luxemburg;Niederlande;Polen;Schweden;Slowenien;Slowakei;Belgien".split(";").indexOf(a)};a.prototype.getLastValidTravelDate=function(a){return f.utils.createLocalizedDate((new XDate).addDays(a-1),f.locale)};a.prototype.loadRailcardData=function(){var a=0,d={},b;if(c.storedData)for(b in c.storedData)3===b.indexOf("-railcard-")&&(d[b]=c.storedData[b],a++);a/=2;c.addFieldsFromStorage(d,a);c.enableRailCardSelectFromStorage();return[d,a]};a.prototype.addFieldsFromStorage=function(a,d){var b=1,l=[],e,m;for(b;b<=d;b++)e=a["gcw-railcard-card-"+b],m=a["gcw-railcard-amount-"+b],e&&(c.addFields(e,m),l.push([e,m]));return l};a.prototype.addFields=function(a,d){var b=c.$form.find("[data-gcw-additional-fields]"),l=b.last().attr("id"),m=b.find("select"),f=b.last(),g=c.$form.find("[data-gcw-add-fields]"),t=b.length,u,h;f.hasClass("gcw-disabled")?(f.removeClass("gcw-disabled"),1<m.length&&1<m.val().length&&m.val(""),a&&(m.first().val(a),m.last().val(d)),c.railcardNumberEnabled(m.first())):(b=f.clone(),b.attr("id",l.replace(t-1,t)),l=b.find("select"),l.each(function(){var a=e(this);u=a.attr("data-gcw-storeable-name").slice(0,-1);h=a.attr("id");var c=h.replace(t-1,t),d=u+t;a.attr("data-gcw-storeable-name",d);a.data("gcw-storeable-name",d);a.attr("id",c);a.closest("label").attr("for",c)}),g.before(b),a&&(l.first().val(a),l.last().val(d)),c.railcardNumberEnabled(l.first()))};a.prototype.railcardNumberEnabled=function(a){var c=a.parents("label").siblings("label"),d=c.siblings("a"),b=c.parents("fieldset").next(".gcw-advanced-options");""!==a.val()?(c.removeClass("gcw-disabled"),d.removeClass("gcw-disabled"),b.removeClass("gcw-disabled")):(c.addClass("gcw-disabled"),d.addClass("gcw-disabled"),b.addClass("gcw-disabled"))};a.prototype.enableRailCardSelectFromStorage=function(){var a=c.$form.find(".gcw-railcard-select");e.each(a,function(a,c){setTimeout(function(){e(c).trigger("railcardEnabled")},20)})};a.prototype.getDepartureTime=function(a){var c=a||new Date;c.setMinutes(30*Math.ceil((c.getMinutes()+30)/30));a=c.getHours();c=c.getMinutes();c=10>c?"0"+c:c.toString();a=10>a?"0"+a:a.toString();return a+c};a.prototype.focusSelect=function(){var a=c.$form.find("select.gcw-railcard-select").last();f.utils.focusElement(a)};a.prototype.removeFields=function(a){var d=c.$form.find("[data-gcw-additional-fields]"),b=d.attr("id"),e=!1,l;1<d.length?(e=d.last().find("select"),b=e.first().data("gcw-storeable-name"),l=e.eq(1).data("gcw-storeable-name"),a.closest(d).remove(),e=c.$form.find("[data-gcw-additional-fields]"),a=e.last().find("select").first(),c.readjustRailcardsNumbers(e),e=!0,c.railcardNumberEnabled(a),b&&f.publish("gcw.storedDataUpdate",{targetStoreableName:b}),l&&f.publish("gcw.storedDataUpdate",{targetStoreableName:l})):(a.closest(d).attr("id",b),b=d.find("select"),""!==b.val()&&(b.first().val(""),b.last().val("1")),c.railcardNumberEnabled(b.first()));f.utils.focusElement(c.$form.find("#add-rail-card"+c.idSuffix));return e};a.prototype.readjustRailcardsNumbers=function(a){var c,d,b,l,f,g,t;for(t=0;t<a.length;t++)c=e(a[t]),d=parseInt(c.attr("id").match(/\d+/)[0],10),d!==t&&(g=t,b=c.attr("id"),c.attr("id",b.replace(d,g)),c.find("select").each(function(){var a=e(this);l=a.attr("id");f=a.attr("data-gcw-storeable-name").slice(0,-1);var c=l.replace(d,g),b=f+g;a.attr("id",c);a.attr("data-gcw-storeable-name",b);a.data("gcw-storeable-name",b);a.parent("label").attr("for",c)}))};a.prototype.railcardValid=function(a){a.parent().removeClass("invalid")};return a});
define("GcwUtilsControllers",["classCheck"],function(g){function f(){g(this,f)}f.setHotel=function(e){var b=$("#hotel-origin"+e).val(),a=$("#hotel"+e).val();a&&!b&&$("#hotel-origin"+e).val(a);b&&!a&&$("#hotel"+e).val(b)};f.swapGtSchedule=function(e,b){var a=$("input#gt-hotel-departure-date"+e),c=$("#gt-dropoff-time"+e),d=$("input#gt-origin-hotel-departure-date"+e),l=$("#gt-hotel-departure-time"+e);"to-airport"===b?(d.val(a.val()),l.val(c.val())):(a.val(d.val()),c.val(l.val()))};f.setRoomContainerClass=function(e){var b=$(".gcw-rooms-container");e=e.find(".gcw-rooms-field").find("select").val();void 0!==e&&(1<e||"group"===e?b.addClass("clearBoth"):b.removeClass("clearBoth"),1<e?b.addClass("rooms-wrapping"):b.removeClass("rooms-wrapping"))};f.emptyEssLastSearchCacheForGTHotelFieldOnFocus=function(e,b,a){!a.val().length&&b.data("autocomplete")&&(b.data("autocomplete").opts.regionid="0",b.data("autocomplete").opts.rid="0",b.data("autocomplete").cache={})};f.changeRegionIdOnAirportSelectionFromTASuggestion=function(e,b,a){window.lx&&!window.lx.cache&&(window.lx.cache={});if(document.activeElement.id==="flight-origin"+e||document.activeElement.id==="flight"+e)if(e=b.element[0].dataset.airportCode,window.lx.cache.airportSuggestionsMap&&(e=window.lx.cache.airportSuggestionsMap[e]))a.data("regionid",e.regionId),a.data("rid",e.regionId),a.data("autocomplete")&&(a.data("autocomplete").opts.regionid=e.regionId),a.data("autocomplete")&&(a.data("autocomplete").opts.rid=e.regionId),a.data("autocomplete")&&(a.data("autocomplete").cache={})};f.addFieldHandler=function(e){e.$form.on("click",".gcw-add-fields",function(b){b.preventDefault();e.addFields();e.focusNextEl()})};f.removeFieldHandler=function(e){e.$form.on("click",".gcw-remove-fields",function(b){var a=$(b.target);b.preventDefault();e.removeFields(a)})};return f});define("gcwDataPreloadingFunctions",["GcwCruisesDataPreloadingFunctions","GcwHotelsDataPreloadingFunctions","GcwFlightsDataPreloadingFunctions","GcwThreeppDataPreloadingFunctions","GcwCarsDataPreloadingFunctions"],function(g,f,e,b,a){return{cruises:function(a,d){var c=new g(a,d);c.init();return c},hotels:function(a,d){var c=new f(a,d);c.init();return c},flights:function(a,d){var c=new e(a,d);c.init();return c},threepp:function(a,d){var c=new b(a,d);c.init();return c},cars:function(c,d){var b=new a(c,d);b.init();return b}}});
define("GcwCruisesDataPreloadingFunctions",["classCheck","jquery","uitk","xdate"],function(g,f,e,b){function a(d,b){g(this,a);c=this;c.$form=d;c.storedData=b}var c;a.prototype.init=function(){c.registerEvents();0<c.$form.find(".cruise-earliest-departure-date").length?c.setOptions(!0):c.setOptionsForDatePicker(!0)};a.prototype.registerEvents=function(){c.$form.on("change",".cruise-destination, .cruise-earliest-departure-date, .gcw-start-date, .gcw-end-date",function(a){0<c.$form.find(".cruise-earliest-departure-date").length?c.setOptions(!1):c.setOptionsForDatePicker(!1)});0===c.$form.find(".cruise-earliest-departure-date").length&&e.subscribe("datepicker.selectDate",function(a,b){var d=b.element;0<c.$form.find(d).length&&(d.hasClass("gcw-start-date")||d.hasClass("gcw-end-date"))&&c.setOptionsForDatePicker(!1)})};a.prototype.loadOptions=function(a){var b={},d="",e=c.$form.find(".cruise-destination"),k=e.val();a&&a.destinationsMap&&1<=Object.keys(a.destinationsMap).length&&(b["Most Popular"]=[],b["Other Destinations"]=[],f.each(a.destinationsMap,function(a,c){c&&c.popular?b["Most Popular"].push({value:c.deepLink,label:c.displayText,index:c.index}):b["Other Destinations"].push({value:c.deepLink,label:c.displayText,index:c.index})}),b["Most Popular"].sort(function(a,c){return a.index-c.index}),b["Other Destinations"].sort(function(a,c){return a.label>c.label}));f.each(b,function(a,c){c&&0<c.length&&(d+='\x3coptgroup label\x3d"'+a+("Most Popular"===a?' ---"\x3e':'"\x3e'),f.each(c,function(a,c){d+='\x3coption value\x3d"'+c.value+'"\x3e'+c.label+"\x3c/option\x3e"}),d+="\x3c/optgroup\x3e")});""!==d&&(e.find("option").not(":first").remove(),e.find("optgroup").remove(),e.find("option").after(d));e.val(k)};a.prototype.selectOptions=function(a,l){var d=c.$form.find(".cruise-destination"),q=c.$form.find(".cruise-earliest-departure-date"),k;d.val("");q.val("");if(l&&c.storedData&&0===f("meta[name\x3dignoreSavedFormData][value\x3dtrue]").length){k=d.data("gcw-storeable-name");if(k=c.storedData[k])d.val(k),e.publish("gcw.inputChanged",{input:d,value:k});k=q.data("gcw-storeable-name");if(k=c.storedData[k])q.val(k),e.publish("gcw.inputChanged",{input:q,value:k})}else if(a.destinations&&""!==a.destinations&&d.val(a.destinations),a.earliestDeptDate&&""!==a.earliestDeptDate){var g=a.earliestDeptDate.split("-"),d=g[0];k=("0"+g[1]).slice(-2);g=("0"+g[2]).slice(-2);d=new b(d+"-"+k+"-"+g);d=c.getFormattedDate(d,!0,!1);q.val(d)}};a.prototype.selectOptionsForDatePicker=function(a,l){var d=c.$form.find(".cruise-destination"),q=c.$form.find(".gcw-start-date"),k=c.$form.find(".gcw-end-date"),g,p;d.val("");if(l&&c.storedData&&0===f("meta[name\x3dignoreSavedFormData][value\x3dtrue]").length){g=d.data("gcw-storeable-name");if(g=c.storedData[g])d.val(g),e.publish("gcw.inputChanged",{input:d,value:g});g=q.data("gcw-storeable-name");if(g=c.storedData[g])q.val(g),e.publish("gcw.inputChanged",{input:q,value:g});g=k.data("gcw-storeable-name");if(g=c.storedData[g])k.val(g),e.publish("gcw.inputChanged",{input:k,value:g})}else a.destinations&&""!==a.destinations&&d.val(a.destinations),a.earliestDeptDate&&""!==a.earliestDeptDate&&(p=a.earliestDeptDate.split("-"),g=p[0],d=("0"+p[1]).slice(-2),p=("0"+p[2]).slice(-2),d=new b(g+"-"+d+"-"+p),d=c.getFormattedDate(d,!0,!0,!0),q.val(d)),a.latestDeptDate&&""!==a.latestDeptDate&&(q=a.latestDeptDate.split("-"),g=q[0],d=("0"+q[1]).slice(-2),p=("0"+q[2]).slice(-2),d=new b(g+"-"+d+"-"+p),d=c.getFormattedDate(d,!0,!0),k.val(d))};a.prototype.setOptions=function(a,b){var d=c.$form.find(".cruise-destination"),e=c.$form.find(".cruise-earliest-departure-date"),l=c.getSearchParameters(a),g=function(d){c.loadOptions(d);c.populateDataForMonthsFilter(d);c.selectOptions(l,a)};b=b||g;d.prop("disabled",!0);e.prop("disabled",!0);f.ajax({data:l,dataType:"json",method:"GET",type:"GET",timeout:1E4,url:"/cruise/search/api/options"}).done(b).always(function(a){d.prop("disabled",!1);e.prop("disabled",!1)})};a.prototype.setOptionsForDatePicker=function(a,b){var d=c.$form.find(".cruise-destination"),e=c.$form.find(".gcw-start-date"),l=c.$form.find(".gcw-end-date"),g=e.val(),p=l.val();if((""===g||c.isValidDateString(g))&&(""===p||c.isValidDateString(p))){var r=c.getSearchParametersForDatePicker(a),g=function(d){c.loadOptions(d);c.populateDataForDatePicker(d);c.selectOptionsForDatePicker(r,a)};b=b||g;d.prop("disabled",!0);e.prop("disabled",!0);l.prop("disabled",!0);f.ajax({data:r,dataType:"json",method:"GET",type:"GET",timeout:1E4,url:"/cruise/search/api/options"}).done(b).always(function(a){d.prop("disabled",!1);e.prop("disabled",!1);l.prop("disabled",!1)})}};a.prototype.populateDataForDatePicker=function(a){var b=c.$form.find(".gcw-start-date").closest("div"),d=c.$form.find(".gcw-end-date").closest("div");a&&(a={firstValidDate:a.searchFiltersListType.searchFilters.departureDates[0],lastValidDate:a.searchFiltersListType.searchFilters.departureDates[a.searchFiltersListType.searchFilters.departureDates.length-1],blackoutDates:{dates:a.searchFiltersListType.searchFilters.departureDates,blackoutDatesFlag:!1}},b.attr("data-first-valid-date",a.firstValidDate),b.attr("data-last-valid-date",a.lastValidDate),b.attr("data-blackout-dates",JSON.stringify(a.blackoutDates)),b.uitk_datepicker("updateOptions",a),d.attr("data-first-valid-date",a.firstValidDate),d.attr("data-last-valid-date",a.lastValidDate),d.attr("data-blackout-dates",JSON.stringify(a.blackoutDates)),d.uitk_datepicker("updateOptions",a))};a.prototype.populateDataForMonthsFilter=function(a){if(a&&a.searchFiltersListType&&a.searchFiltersListType.searchFilters&&a.searchFiltersListType.searchFilters.departureMonths){var b=c.$form.find(".cruise-earliest-departure-date"),d="";a.searchFiltersListType.searchFilters.departureMonths.forEach(function(a){var c=a.replace("-"," ");a=a.substring(0,3);a=(new Date(Date.parse(a+"  1, 2012"))).getMonth()+1;10>a&&(a="0"+a);var b=c.split(" ")[1];d+='\x3coption value\x3d"'+(b+"-"+a+"-01")+'"\x3e'+c+"\x3c/option\x3e"});""!==d&&(b.find("option").not(":first").remove(),b.find("option").after(d))}};a.prototype.getFormattedDate=function(a,b,e){var d="";c.isValidDate(a)&&(b?(b=("0"+a.getDate()).slice(-2),d=("0"+(a.getMonth()+1)).slice(-2)):(b=a.getDate(),d=a.getMonth()+1),a=a.getFullYear(),d=e?d+"/"+b+"/"+a:a+"-"+d+"-"+b);return d};a.prototype.getSearchParametersForDatePicker=function(a){var d=c.$form.find(".cruise-destination"),e=c.$form.find(".gcw-start-date"),f=c.$form.find(".gcw-end-date"),k,g,p;a&&c.storedData&&(k=c.storedData[d.data("gcw-storeable-name")],g=c.storedData[e.data("gcw-storeable-name")],p=c.storedData[f.data("gcw-storeable-name")]);a=k||d.val();e=g||e.val();f=p||f.val();p={};""!==a?p.destinations=a:""===e?p.destinations="":""===f&&(p.destinations="");""!==e&&(g=new b(e),p.earliestDeptDate=c.getFormattedDate(g,!1,!1));""!==f&&(f=c.reflectEndDateValueForDatePicker(e,f),p.latestDeptDate=c.getFormattedDate(new b(f),!1,!1));if(""!==e||""!==f)p.offset="1";p.adults="2";return p};a.prototype.getSearchParameters=function(a){var d=c.$form.find(".cruise-destination"),e=c.$form.find(".cruise-earliest-departure-date"),f,k;a&&c.storedData&&(f=c.storedData[d.data("gcw-storeable-name")],k=c.storedData[e.data("gcw-storeable-name")]);a=f||d.val();k=k||e.val();e={};""!==a?e.destinations=a:""===k&&(e.destinations="");""!==k&&(k=new b(k),a=new b(k.getFullYear(),k.getMonth()+1,0),e.earliestDeptDate=c.getFormattedDate(k,!1,!1),e.latestDeptDate=c.getFormattedDate(a,!1,!1));return e};a.prototype.isValidDateString=function(a){a=new Date(a);return null!==a&&"undefined"!==typeof a&&"invalid date"!==(new b(a))[0].toString().toLowerCase()};a.prototype.isValidDate=function(a){return null!==a&&"undefined"!==typeof a&&"invalid date"!==(new b(a))[0].toString().toLowerCase()};a.prototype.reflectEndDateValueForDatePicker=function(a,e){var d=new b(c.getFormattedDate(new b(a),!0,!0)),l=new b(c.getFormattedDate(new b(e),!0,!0)),f=new b(d),g=new b(l);return d&&"Invalid Date"!==d.toString()?l&&0>f.diffDays(g)||""===e?f.toString("MM/dd/yyyy"):
g.toString("MM/dd/yyyy"):e};return a});define("GcwHotelsDataPreloadingFunctions",["classCheck","xdate"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.storedData=c}var b;e.prototype.init=function(){b.$form.hasClass("gcw-prefillCalendar")&&b.prefillCalendar()};e.prototype.prefillCalendar=function(){var a,c=b.$form.find(".gcw-start-date"),d=b.$form.find(".gcw-end-date");a=0;void 0!==c.data("min-range-length")&&(a=c.data("min-range-length"));var e=new f,m=(new f).clone().addDays(a);c.data("gcw-date-format")&&(a=c.data("gcw-date-format").toLowerCase().replace(/m/g,"M"),c.val(e.toString(a)),d.val(m.toString(a)))};return e});define("GcwFlightsDataPreloadingFunctions",["classCheck"],function(g){function f(b,a){g(this,f);e=this;e.$form=b;e.storedData=a;e.airlinesListConfig={selectElementContainer:b.find(".gcw-airline-select").parent(),selectElement:b.find(".gcw-airline-select"),request:{url:"/travel-entities/airlines",params:{siteid:b.data("siteid"),locale:b.data("locale"),sort:"name",isMajor:!0}}}}var e;f.prototype.init=function(){e.getAirlinesList(e.airlinesListConfig.request).then(function(b){e.setAirlinesHTMLOptionsList(e.createAirlinesHTMLOptionsList(b));void 0!==e.storedData&&e.storedData[e.airlinesListConfig.selectElement.data("gcw-storeable-name")]&&e.setLastSearchAirline(e.storedData[e.airlinesListConfig.selectElement.data("gcw-storeable-name")])}).fail(function(){e.hideHTMLOptionsListContainer()});return e};f.prototype.getAirlinesList=function(b){return $.ajax({method:"GET",type:"GET",url:b.url,data:b.params,dataType:"json",timeout:1E4}).then(function(a){return e.parseAirlinesListResponse(a)})};f.prototype.parseAirlinesListResponse=function(b){return b.data};f.prototype.createAirlinesHTMLOptionsList=function(b){var a="";b.forEach(function(c){a+='\x3coption value\x3d"'+c.code+'"\x3e'+c.name+"\x3c/option\x3e"});return a};f.prototype.setAirlinesHTMLOptionsList=function(b){e.airlinesListConfig.selectElement.append(b)};f.prototype.setLastSearchAirline=function(b){e.airlinesListConfig.selectElement.val(b)};f.prototype.hideHTMLOptionsListContainer=function(){e.airlinesListConfig.selectElementContainer.hide()};return f});define("GcwThreeppDataPreloadingFunctions",["classCheck","jquery"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.storedData=c;b.locale=b.$form&&b.$form.data("locale")?b.$form.data("locale").substring(0,2):"en";b.url="https://threepp-destination-service.prod-p.expedia.com/wizard/getWizardJSON?fram\x3dExpediaRocks\x26lang\x3d"+b.locale+"\x26callback\x3d?"}var b;e.prototype.init=function(){b.getOrigins(!0);b.registerEvents()};e.prototype.registerEvents=function(){b.$form.on("change",".gcw-threepp-origin-input",function(a){b.getDestinations()});b.$form.on("change",".gcw-threepp-destination-input",function(a){b.getDurationAndHotels()})};e.prototype.getDurationAndHotels=function(a){var c=b.$form.find(".gcw-threepp-destination-input").val();2<(c&&c.length?c.split("|"):[]).length?(b.getDuration(a),b.getHotels(a)):(b.resetHotels(),b.resetDuration(a))};e.prototype.getOrigins=function(a){var c=b.$form.find(".gcw-threepp-origin-input");f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:b.url+"\x26q\x3do"}).done(function(d){var e=[];f.each(d,function(a,c){e.push('\x3coption data-sort\x3d"'+c.name+'" value\x3d"'+c.code+'"\x3e'+c.name+"\x3c/option\x3e")});c.append(e.sort().join(""));a&&(b.loadValueFromLocalStorage(c),b.getDestinations(a))})};e.prototype.getDestinations=function(a){var c=b.$form.find(".gcw-threepp-origin-input"),d=b.$form.find(".gcw-threepp-destination-input");c.length&&c.val()?(c=b.url+"\x26q\x3dd\x26p\x3d"+c.val(),f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:c}).done(function(c){var e=[];f.each(c,function(a,c){if(c&&c.name){var b=c.name,d='" data-label\x3d"'+c.name;void 0!==c.destinations?1<c.destinations.length?(e.push('\x3coption value\x3d"'+c.name.replace(/\s/g,"kkk")+"xxx"+c.code.split(",").sort().join("_")+'|3,7,14" country\x3d"'+b+d+'" class\x3d"region"\x3e'+c.name+"\x3c/option\x3e"),f.each(c.destinations,function(a,c){e.push('\x3coption country\x3d"'+b+('" data-label\x3d"'+c.name)+'" value\x3d"'+c.code+"|"+c.durations+"|"+c.hotels+'"\x3e - '+c.name+"\x3c/option\x3e")})):e.push('\x3coption value\x3d"'+c.code+"|"+c.destinations[0].durations+"|"+c.destinations[0].hotels+'" country\x3d"'+b+d+'" class\x3d"region"\x3e'+c.name+" ("+c.destinations[0].name+")\x3c/option\x3e"):e.push('\x3coption value\x3d"'+c.name.replace(/\s/g,"kkk")+"xxx"+c.code.split(",").sort().join("_")+'|3,7,14" country\x3d"'+b+d+'" class\x3d"region"\x3e'+c.name+"\x3c/option\x3e")}});0<e.length&&(d.html(e.join("")),a&&(b.loadValueFromLocalStorage(d),b.getDurationAndHotels(a)))})):d.children().first().prop("selected",!0)};e.prototype.getHotels=function(a){var c=b.$form.find(".gcw-threepp-destination-input");c.length&&c.val()&&(c=c.val().split("|"),2<c.length&&f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:b.url+"\x26q\x3dh\x26p\x3d"+c[2]}).done(function(c){var d=[];f.each(c,function(a,c){c&&c.code&&c.name&&d.push('\x3coption value\x3d"'+c.code+'"\x3e'+b.toTitleCase(c.name)+"\x3c/option\x3e")});0<d.length&&(c=b.$form.find(".gcw-threepp-hotels-select"),c.html(c.children().first()),c.append(d.join("")),a&&b.loadValueFromLocalStorage(c))}))};e.prototype.getDuration=function(a){var c=b.$form.find(".gcw-threepp-destination-input");if(c.length&&c.val()&&(c=c.val().split("|"),1<c.length)){var c=c[1],d=c.split(",");if(f.isArray(d)&&"3,7,14"!==c){var e=b.$form.find(".gcw-threepp-duration-select");e.children().addClass("gcw-disabled");f.each(d,function(a,c){e.find("option[value\x3d"+c+"DAYS]").removeClass("gcw-disabled")});e.find("option[value\x3d7DAYS]").hasClass("gcw-disabled")?e.find("option:not(.gcw-disabled)").first().prop("selected","selected"):e.val("7DAYS");a&&b.loadValueFromLocalStorage(e)}else b.resetDuration(a)}};e.prototype.resetHotels=function(){var a=b.$form.find(".gcw-threepp-hotels-select");a.html(a.children().first());a.children().first().prop("selected",!0)};e.prototype.resetDuration=function(a){var c=b.$form.find(".gcw-threepp-duration-select");c.children().removeClass("gcw-disabled");c.find("option[value\x3d1DAYS]").addClass("gcw-disabled");c.find("option[value\x3d2DAYS]").addClass("gcw-disabled");a?b.loadValueFromLocalStorage(c):c.val("7DAYS")};e.prototype.toTitleCase=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})};e.prototype.loadValueFromLocalStorage=function(a){if(b.storedData&&0===f("meta[name\x3dignoreSavedFormData][value\x3dtrue]").length){var c=a.data("gcw-storeable-name");(c=b.storedData[c])&&a.val(c)}};return e});
define("GcwCarsDataPreloadingFunctions",["classCheck","jquery","uitk","xdate"],function(g,f,e,b){function a(b,e){g(this,a);c=this;c.$form=b;c.storedData=e}var c;a.prototype.init=function(){c.carRentalHintText(c.$form.data("siteid"))};a.prototype.carRentalHintText=function(a){var b=c.$form.find(".car-rental-hint-text"),d=b.data("hint-order");0<b.length&&d&&(a=c.getValuesByPOS(a),c.phValue=b.attr("placeholder"),c.pickingUpInput=b,c.values=a,c.order=d,c.cycleDelayMillis=2E3,c.placeholderNext=0,c.intervalId=setInterval(c.cyclePlaceholderHelper.bind(null,b,a,d),c.cycleDelayMillis),c.$form.on("focus",".car-rental-hint-text",function(a){c.stopPlaceholderCycle();c.updateInputPlaceholder(c.pickingUpInput,c.phValue)}),c.$form.on("blur",".car-rental-hint-text",function(a){c.stopPlaceholderCycle();c.placeholderNext=0;c.intervalId=setInterval(c.cyclePlaceholderHelper.bind(null,c.pickingUpInput,c.values,c.order),c.cycleDelayMillis)}))};a.prototype.getValuesByPOS=function(a){a=c.$form.find(".pos"+a).val().split(";");var b;for(b=0;b<a.length;b++)a[b]="Try “"+a[b]+"”";return a};a.prototype.cyclePlaceholderHelper=function(a,b,e){c.updateInputPlaceholder(a,c.getPlaceholderText(b));c.placeholderNext=c.getNextPlaceholderIndex(b.length,e)};a.prototype.updateInputPlaceholder=function(a,c){a.attr("placeholder",c)};a.prototype.getPlaceholderText=function(a){return c.placeholderNext===a.length?c.phValue:a[c.placeholderNext]};a.prototype.getNextPlaceholderIndex=function(a,b){if("fixed"===b)return(c.placeholderNext+1)%(a+1);for(var d=Math.floor(Math.random()*(a+1));d===c.placeholderNext;)d=Math.floor(Math.random()*(a+1));return d};a.prototype.stopPlaceholderCycle=function(){clearInterval(c.intervalId)};return a});define("gcwDateFieldParser",function(){return{parseDateField:function(g){var f=g.closest('[data-control \x3d "datepicker"]');g=g.closest("label");var e=uitk.datePickerCalendarObj.getDateFromString(f.find("input").val(),!0),b=f.attr("data-first-valid-date")||uitk.datePickerCalendarObj.toStringFromDate(new Date),a=uitk.datePickerCalendarObj.getDateFromString(b,!0),c=f.attr("data-last-valid-date"),d=uitk.datePickerCalendarObj.getDateFromString(c,!0),f={$div:f,$label:g,errorMessages:[],date:e,options:{pairedStartFieldId:f.data("start-date"),pairedEndFieldId:f.data("end-date"),datePickerType:"singleDate",firstValidDate:a,lastValidDate:d,firstValidString:b,lastValidString:c,minRangeLength:f.find("input").data("min-range-length"),maxRangeLength:f.data("max-range-length")}};f.options.pairedStartFieldId&&(f.options.datePickerType="endDate",f.options.pairedStartField=$(f.options.pairedStartFieldId),f.options.minRangeLength=f.options.pairedStartField.find("input").data("min-range-length"),f.options.maxRangeLength=f.options.pairedStartField.closest('[data-control \x3d "datepicker"]').data("max-range-length"));f.options.pairedEndFieldId&&(f.options.datePickerType="startDate",f.options.pairedEndField=$(f.options.pairedEndFieldId));return f}}});define("gcwDateFieldValidations",["xdate"],function(g){function f(e,b,a,c,d){return{fieldId:e,msgId:b,strParams:c,valid:a,hideMessage:d}}return{gcw_is_valid_date:function(e,b,a){b=e.date;e=a.attr("id");a=a.attr("placeholder");b=null!==b&&"undefined"!==typeof b&&"invalid date"!==(new g(b))[0].toString().toLowerCase();return f(e,"gcw_is_valid_date",b,a)},gcw_date_range:function(e,b,a){b=!0;var c=[];a=a.attr("id");if(e.options.firstValidDate&&e.options.lastValidDate){var d=e.options.lastValidDate;e.options.firstValidDate<=e.date&&e.date<=d||(b=!1,c=[uitk.datePickerCalendarObj.toStringFromDate(e.options.firstValidDate),uitk.datePickerCalendarObj.toStringFromDate(e.options.lastValidDate)])}return f(a,"gcw_date_range",b,c)},gcw_max_date:function(e,b,a){b=!0;a=a.attr("id");e.options.lastValidDate&&e.date>e.options.lastValidDate&&(b=!1);return f(a,"gcw_max_date",b,[e.options.lastValidString])},gcw_min_date:function(e,b,a){b=!0;a=a.attr("id");e.options.firstValidDate&&e.date<e.options.firstValidDate&&(b=!1);return f(a,"gcw_min_date",b,[e.options.firstValidString])},gcw_min_range:function(e,b,a){var c=!0,d=!1;a=a.attr("id");if("startDate"===e.options.datePickerType||"endDate"===e.options.datePickerType)if(e.options.pairedEndFieldId||e.options.pairedStartFieldId)c=b.$form.find(e.options.pairedEndFieldId||e.options.pairedStartFieldId).find("input"),b=b.gcwForm.getDateFromString(c.val()),c=b-e.date,"startDate"===e.options.datePickerType&&(d=!0),"endDate"===e.options.datePickerType&&(c=e.date-b),c=c/1E3/60/60/23>=e.options.minRangeLength?!0:!1;return f(a,"gcw_min_range",c,[e.options.minRangeLength],d)},gcw_max_range:function(e,b,a){var c=a.data("gcw-max-range-error")?a.data("gcw-max-range-error"):"gcw_max_range",d=!0,l=!1;a=a.attr("id");e.options.maxRangeLength&&(e.options.pairedEndFieldId||e.options.pairedStartFieldId)&&(d=b.$form.find(e.options.pairedEndFieldId||e.options.pairedStartFieldId).find("input"),b=b.gcwForm.getDateFromString(d.val()),d=b-e.date,"startDate"===e.options.datePickerType&&(l=!0),"endDate"===e.options.datePickerType&&(d=e.date-b),d=d/1E3/60/60/24<=e.options.maxRangeLength?!0:!1);return f(a,c,d,[e.options.maxRangeLength],l)}}});require("uitk",function(g){function f(){for(var c=a,b=c.length,e,m;0!==b;)m=Math.floor(Math.random()*b),--b,e=c[b],c[b]=c[m],c[m]=e;return c.slice(0,5)}function e(){a=f();var c="";a.forEach(function(a,b){c=c+"\x3cli\x3e \x3cspan class\x3d'icon icon-search' aria-hidden\x3dtrue' style\x3d' padding-right: 10px'\x3e\x3c/span\x3e"+a});var d=$(".opensearch-education-examples");d.empty();d.append(c);b()}function b(){var a=$(".opensearch-education-examples \x3e li");$(a).each(function(a){var c=$(this);setTimeout(function(){c.addClass("opensearch-education-slideIn")},200*a)})}var a="check my itinerary;all inclusive vacations to mexico;airport shuttles at lax;things to do in chicago;pet friendly hotels in san francisco;summer break deals in the bahamas;shows in vegas this weekend;walking tours in paris;top beach destinations;travel insurance;car service in new york;disney vacations;cancel reservation;member deals in orlando;confirm flight;last minute deals to vancouver;hawaiian vacation packages;customer service phone number;attractions in london;price alerts on flights;family cruises;adventures in seattle;multiple destination flights;hotels with pools in phoenix".split(";");g.subscribe("tab.selected",function(a,b){"openSearch"===b.find("button").data("lob")&&e()});e()});
define("gcwFieldValidations",["gcwDateFieldValidations","gcwDateFieldParser"],function(g,f){function e(a,b,e,m,f){return{fieldId:a,msgId:b,valid:e,strParams:m,hideMessage:f}}function b(a,b,e){var c=[],d=a.closest('[data-control \x3d "datepicker"]').find("input").val();if(!0!==e||""!==d){e=f.parseDateField(a);for(var l in g)d=g[l](e,b,a),!1===d.valid&&c.push(d)}return c}function a(a){return/^(-|\+)?([0-9]+|Infinity)$/.test(a)?Number(a):NaN}return{utils:{returnValue:e,isValidDate:b,filterInt:a},gcw_required:function(a,b){var c="flight"===b.gcwForm.$lobTab.data("lob"),d=b.$form.find(".gcw-multidest-flights-container").is(":visible"),f=a.data("gcw-field-type"),k=a.attr("id"),g=a.data("gcw-required-field-custom-error-message")?a.data("gcw-required-field-custom-error-message"):"gcw_requiredFieldErrorMessage",p;if(c){if(d?a.hasClass("gcw-origin")?(g="gcw_multiDestOriginErrorMessage",p="1"):a.hasClass("gcw-destination")?(g="gcw_multiDestErrorDestinationMessage",p="1"):a.hasClass("gcw-start-date")&&(g="gcw_multiDestDateErrorMessage",p=["1",a.attr("placeholder")]):a.hasClass("gcw-origin")?(g="gcw_originErrorMessage",p=""):a.hasClass("gcw-destination")?(g="gcw_destinationErrorMessage",p=""):a.hasClass("gcw-start-date")?(g="gcw_departureDateErrorMessage",p=a.attr("placeholder")):a.hasClass("gcw-end-date")&&(g="gcw_returnDateErrorMessage",p=a.attr("placeholder")),0===a.val().length)return e(k,g,!1,p)}else if(0===a.val().length)return f?e(k,g,!1,f):e(k,g,!1);return e(k,g,!0)},gcw_driverAgeRequired:function(a){var c=a.attr("id");return 0===a.val().length?e(c,"gcw_driver_age_blank",!1):e(c,"gcw_driver_age_blank",!0)},gcw_isValidDriverAge:function(c){var b=c.attr("id");c=c.val();return(c=a(c))&&17<c&&100>c?e(b,"gcw_driver_age_invalid",!0):e(b,"gcw_driver_age_invalid",!1)},gcw_distinct_locations:function(a,b){var c=a.data("gcw-distinct-locations-custom-error-message")?a.data("gcw-distinct-locations-custom-error-message"):"gcw_distinct_locations",d=b.$form.find(".gcw-origin:visible, .gcw-destination:visible"),f,k=0,g=d.length,p=a.attr("id"),r=!0,t=!1,u;for(k;k<g;k++)if(u=$(d[k]),u.attr("id")===p){f=k;break}0<(f+1)%2?(d=$(d[f+1]),p=d.attr("id")):(d=$(d[f-1]),t=!0);""===a.val()?r=!0:a.val()===d.val()&&(r=!1);return e(p,c,r,void 0,t)},gcw_valid_date:function(a,d,e){return b(a,d,e)},gcw_valid_date_or_empty:function(a,d){return b(a,d,!0)},gcw_multidest_date:function(a,b){var c,d,f;d=b.$form.find(".datepicker-trigger-input:visible");var g=a.attr("id"),n=a.closest('[data-control \x3d "datepicker"]'),n=b.gcwForm.getDateFromString(n.find("input").val());for(f=0;f<d.length;f++){var p=$(d[f]);g===p.attr("id")&&(c=f)}c=$(d[c-1]);if(""===n||null===n)return e(g,"gcw_multidest_date",!0);d=c.val();f=b.gcwForm.getDateFromString(d);return 0<c.length&&null!==f&&!c.closest("label").hasClass("invalid")&&n<f?e(g,"gcw_min_date",!1,[d]):e(g,"gcw_multidest_date",!0,[d])},gcw_flight_hotel_date:function(a,b){var c=a.attr("id"),d=b.gcwForm.getKeyParameter(),f=b.$form.find("#flight-departing"+d),d=b.$form.find("#flight-returning"+d),f=b.gcwForm.getDateFromString(f.val()),d=b.gcwForm.getDateFromString(d.val()),f={date:b.gcwForm.getDateFromString(a.val()),options:{firstValidDate:f,lastValidDate:d}},d=g.gcw_date_range;return""===a.val()?e(c,"gcw_date_range",!0):d(f,b,a)},gcw_option_selected_from_TA:function(a,b){var c=a.attr("id"),d=a.closest("div").parent().find("input[type\x3dhidden]"),f=a.data("gcw-observed-uta-feature"),d=0<d.length?d.filter('input[id*\x3d"'+f+'"]'):"",f=a.data("gcw-option-selected-from-ta-custom-error-message")?a.data("gcw-option-selected-from-ta-custom-error-message"):a.hasClass("gcw-destination")?"gcw_rails_destination_from_TA":"gcw_rails_origin_from_TA",g=!0;0<d.length&&""===d.val()&&(g=!1);return e(c,f,g)}}});define("gcwField",["uitk","jquery","gcwFieldValidations"],function(g,f,e){return function(b,a){var c=this;c.gcwForm=b;c.$form=c.gcwForm.form;c.$field=a;c.$label=a.closest("label");c.$input=a.find("input");c.validations=e;c.errors=[];c.isActive=function(){return 0<c.$field.parents(".toggle-pane").length?0===c.$field.parents(".gcw-disabled").length&&!c.$field.hasClass("gcw-disabled")&&0<c.$field.parents(".open").length:"hidden"===c.$field.attr("type")?0<c.$field.val().length&&0===c.$field.parents(".gcw-disabled").length:0===c.$field.parents(".gcw-disabled").length&&!c.$field.hasClass("gcw-disabled")};c.validate=function(){var b=!1;c.clearErrors();for(var e in c.validations){var m=c.validations[e],g=e.replace(/_/g,"-");if(c.$field.hasClass(g)&&(m=m(a,c),f.isArray(m)||(m=[m]),f.each(m,function(){if(!this.valid)return c.errors.push(this),b=!0,!1}),b))break}c.mark();return c.errors};c.clearErrors=function(){c.errors=[]};c.mark=function(){0<c.errors.length?(c.$label.addClass("invalid"),c.$input.attr("aria-invalid","true")):(c.$label.removeClass("invalid"),c.$input.attr("aria-invalid","false"))};return c}});define("gcwFieldsCollection",["jquery","gcwField"],function(g,f){return function(e){var b=this;b.$form=e;b.fields=[];b.add=function(a){b.fields.push(new f(b.$form,a))};b.remove=function(a){for(var c=0;c<b.fields.length;c++)b.fields[c].$field[0].id===a[0].id&&b.fields.splice(c,1)};b.getActiveFields=function(){var a=[],c;for(c in b.fields){var d=b.fields[c];d.isActive()&&!d.$field.hasClass("gcw-show-disabled")?(a.push(d),d.$field.attr("disabled",!1)):d.$field.attr("disabled",!0)}return a};b.enableInactiveFields=function(){for(var a in b.fields){var c=b.fields[a];c.isActive()||c.$field.hasClass("gcw-show-disabled")||c.$field.attr("disabled",!1)}};b.getErrorState=function(){var a=0,c=[],d=b.getActiveFields(),e;for(e in d){var m=d[e].validate();0<m.length&&(a++,c.push(m))}return{numFieldErrors:a,badFields:c}}}});require(["uitk_domReady","jquery","uitk","uitk_toggle","gcwForm"],function(g,f,e,b,a){function c(){window.GcwForm=a;f(".gcw-form").each(function(){var c=new a(f(this),f(this).data("gcw-datapreloading-function"),f(this).data("gcw-processing-function"),f(this).data("gcw-controller")),b=f(this).data("lob-form");b||(b="unidentified");b in l||(l[b]=[]);l[b].push(c)});f.isEmptyObject(l)||(window.forms=l,define("gcwFormsInstances",function(){return l}))}function d(c){var b=a.getCurrentActiveForm(l);f.each(b,function(a,c){c.setCurrentState()});if(c&&0<c.length){var b={},d={};c in l&&(b[c]=l[c],a.setFormsStatus(b),d=a.getCurrentActiveForm(b));0<d.length&&d[0].initForm()}}window.format.extend(String.prototype);var l={};setTimeout(function(){c()},0);g=f("html");(g.hasClass("safari")||g.hasClass("firefox"))&&f(window).bind("pageshow",function(a){a.originalEvent&&a.originalEvent.persisted&&window.location.reload()});e.subscribe("launch-config-executed",function(a,c){setTimeout(function(){var a=f(".tabs li button.on:visible").data("lob");if("undefined"===typeof a||0===a.length)a=f("div.wizard-tabs:visible").data("lob");d(a)},0)});e.subscribe("tab.selected",function(a,c){var b=c.find("button").data("lob");d(b);e.publish("gcw.updatePackageType",{packageType:c.find(".gcw-package-type").data("gcw-package-type")});e.prepFields()})});
define("GcwFormSubmission",function(){var g={submit:function(f,e,b,a,c){g.storeFormData(f,e,b);g.checkTAAPPackageRate(f);a&&a.redirect&&(c.preventDefault(),g.changeWindowLocation(a.url))},storeFormData:function(f,e,b,a){"undefined"===typeof a&&(a=window.localStorage);if("undefined"!==typeof a){var c=f.data("locale"),d={},l={};e=e||{};f.find(".gcw-storeable").each(function(){var a=$(this),d=a.data("gcw-storeable-name");d in l||""===a.val()||(l[d]=a.val(),"checkbox"===a.attr("type")&&(l[d]=a.prop("checked")?"1":"0"),"radio"===a.attr("type")&&(l[d]=a.is(":checked")));b?e[c]&&e[c].hasOwnProperty(d)&&""!==e[c][d]&&""===a.val()&&delete e[c][d]:e.hasOwnProperty(d)&&""!==e[d]&&""===a.val()&&delete e[d]});b?(d[c]=l,e=$.isEmptyObject(e)?d:$.extend(!0,e,d)):e=$.isEmptyObject(e)?l:$.extend({},e,l);a.setItem("gcw_form_history",JSON.stringify(e))}},checkTAAPPackageRate:function(f){var e=f.find(".gcw-start-date:visible"),b=f.find(".gcw-end-date:visible");f=f.find(".package-rates-checkbox-variant");f.length&&(e.length&&b.length&&f.is(":visible")&&""!==e.val()&&""!==b.val()&&f.prop("checked")?$.ajax({url:"/set3ptcookie",data:{startDate:e.val(),endDate:b.val()},async:!1}):$.ajax({url:"/clear3ptcookie",async:!1}))},changeWindowLocation:function(f){window.location=f}};return g});
define("gcwFormValidations",["xdate","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c,b,e,f,g){return{fieldId:a,msgId:c,strParams:e,valid:b,hideMessage:f,multiErrors:g}}function b(a){var c;if(4<a.length){var b=-1<a.indexOf("PM");c=parseInt(a.slice(-4,-2));a=parseInt(a.slice(0,-4));b||12!==a?b&&12!==a&&(a+=12):a=0}else c=parseInt(a.slice(2,4)),a=parseInt(a.slice(0,2));return 60*a+c}function a(a,c,b){return""===a&&""===c&&""===b||""!==a&&""!==c&&""!==b?!1:!0}function c(a,c,b){var d=a.closest("label"),e=a.data("gcw-invalid-validation-names");if(!c)d.addClass("invalid"),a.attr("aria-invalid","true"),a.data("gcw-invalid-validation-names",e&&b?e+","+b:b);else if(e&&b)for(e=e.split(","),c=0;c<e.length;c++)if(e[c]===b){b=e;b.splice(c,1);e=b.join();a.data("gcw-invalid-validation-names",e);""===e&&(d.removeClass("invalid"),a.attr("aria-invalid","false"));break}}return{utils:{returnValue:e,convertStrTimeToMins:b,areSomeFieldsEmpty:a,markField:c},gcw_lessThanNTravelers:function(a){var b=a.form.data("gcw-less-than-n-travelers-custom-error-message")?a.form.data("gcw-less-than-n-travelers-custom-error-message"):"gcw_less_than_n_travelers",d=!0,f=a.form;a=f.data("gcw-max-travelers");var f=f.find(".num-adults:visible, .num-children:visible, .num-youth:visible, .num-seniors:visible, .gcw-guests-field:visible"),g=0,n;f.each(function(){g+=parseInt($(this).val())});if(1>g||g>a)d=!1;f.each(function(a,b){n||(n=$(b).attr("id"));c($(b),d,"gcw_lessThanNTravelers")});return e(n,b,d,a)},gcw_railcardsAmount:function(a){var b=a.form.find(".num-adults:visible, .num-children:visible, .num-youth:visible, .num-seniors:visible");a=a.form.find(".gcw-railcard-count-select:visible");var d=0,f=0,g=$(a[0]).attr("id");b.each(function(a,c){d+=parseInt($(c).val())});a.each(function(a,c){f+=parseInt($(c).val())});b=f<=d;c(a,b,"gcw_railcardsAmount");return e(g,"gcw_railscardNumber",b)},gcw_isChildAloneAboveNAge:function(a){var b=a.form;a=parseInt(b.data("rail-age-boundary"));var d=parseInt(b.data("rail-accompanying-age")),f=parseInt(b.find(".num-adults").val()),g=parseInt(b.find(".num-youth").val()),n=parseInt(b.find(".num-seniors").val()),p=b.find(".children-data select:visible"),b=b.find(".gcw-child-rails-field.select:visible"),r=!0,t=[],u=[],h;if(0===f&&0===g&&0===n)for(n=0;n<p.length;n++)f=$(p[n]).val(),g=$(b[n]),u.push(parseInt(f)),h||(h=g.find("select").attr("id")),f<=a&&(r=!1,t.push(g)),-1<u.indexOf(d)&&(r=!0);!1===r&&$.each(t,function(a,b){c(b,r,"gcw_isChildAloneAboveNAge")});return e(h,"gcw_isChildAloneAboveNAge",r,[a,d])},gcw_isChildAloneAbove13:function(a){var b=parseInt(a.form.find(".num-adults").val()),d=parseInt(a.form.find(".num-youth").val()),f=parseInt(a.form.find(".num-seniors").val()),g=a.form.find(".children-data select:visible");a=a.form.find(".gcw-child-rails-field.select:visible");for(var n=!0,p,r,t,u=0;u<g.length;u++)p=$(g[u]).val(),r=$(a[u]),t||(t=r.find("select").attr("id")),0===b&&0===d&&0===f&&13>p&&(n=!1,c(r,n,"gcw_isChildAloneAbove13"));return e(t,"gcw_isChildAloneAbove13",n)},gcw_isChildAlone:function(a){var c=parseInt(a.form.find(".num-adults").val()),b=parseInt(a.form.find(".num-children").val());a=parseInt(a.form.find(".num-seniors").val());var d=!0;0<b&&0===c&&0===a&&(d=!1);return e(void 0,"gcw_isChildAlone",d)},gcw_isChildAccompaniedByAdult:function(a){a=this.gcw_isChildAlone(a);return e(void 0,"gcw_isChildAlone",!a.valid)},gcw_timeValidLongEnough:function(a){var d=!0,f=a.form,q=f.find(".gcw-start-date:visible"),k=new g(a.getDateFromString(q.val())),n=f.find(".gcw-end-date:visible"),p=new g(a.getDateFromString(n.val())),r=f.find(".gcw-start-time:visible");a=r.val();var t=f.find(".gcw-end-time:visible"),u=t.val(),h=f.data("gcw-min-hours"),f=f.data("gcw-error-msg-id"),v=[],x;v.push(n);v.push(t);v.push(q);v.push(r);void 0!==k&&void 0!==p&&k[0]&&p[0]&&void 0!==a&&void 0!==u&&(q=k.diffDays(p),0===q||1===q)&&(a=b(a),u=b(u),1===q&&(u+=1440),u-a<60*h&&(d=!1,$.each(v,function(a,b){x||(x=b.attr("id"));c(b,d,"gcw_timeValidLongEnough")})));return e(x,f,d)},gcw_isPartialDateWithinRange:function(a){var b=!0,d=a.form,f=new g(a.getDateFromString(d.find(".gcw-start-date:visible").val())),k=new g(a.getDateFromString(d.find(".gcw-end-date:visible").val())),n=d.find(".gcw-partial-start-date").attr("id"),p=d.find(".gcw-partial-start-date:visible"),d=d.find(".gcw-partial-end-date:visible");0<p.length&&0<d.length&&""!==p.val()&&""!==d.val()&&(b=new g(a.getDateFromString(p.val())),a=new g(a.getDateFromString(d.val())),b=0<=f.diffDays(b)&&0>k.diffDays(b)&&0>=k.diffDays(a),b||(c(p,b,"gcw_isPartialDateWithinRange"),c(d,b,"gcw_isPartialDateWithinRange")));return e(n,"gcw_packagesPartialDateMessage",b)},gcw_childAgesAllProvided:function(a){var b=a.form.data("gcw-child-ages-all-provided-custom-error-message")?a.form.data("gcw-child-ages-all-provided-custom-error-message"):"gcw_child_ages_all_provided",d=!0;a=a.form;var f=0,g=a.find(".gcw-child-field:visible, .gcw-flights-child-field:visible"),n;a.find(".num-children:visible").each(function(a,c){f+=parseInt($(c).val())});0<f&&0<g.length&&g.each(function(a,b){""===$(b).find("select").val()&&(n||(n=$(b).find("select").attr("id")),d=!1,c($(b),d,"gcw_childAgesAllProvided"))});return e(n,b,d)},gcw_allFlightsComplete:function(b){var d=b.form,f=$(".gcw-start-date").attr("placeholder"),g=!0,k,n,p=[],r=[];b=b.getKeyParameter();for(var t=d.find("[data-gcw-additional-fields]").length,u=0;u<t;u++){var h=d.find("#flight-"+(u+2)+"-origin"+b+":visible");n=d.find("#flight-"+(u+2)+"-destination"+b+":visible");var v=d.find("#flight-"+(u+2)+"-departing"+b+":visible");if(0===h.length&&0===n.length&&0===v.length)return g=!0,r=[],e(void 0,void 0,g,void 0,void 0,r);a(h.val(),n.val(),v.val())&&(g=!1,h.val()||(k=h.attr("id"),p.push(h),r.push({msgId:"gcw_multiDestOriginErrorMessage",fieldId:k,legNumber:u+2})),n.val()||(k=n.attr("id"),p.push(n),r.push({msgId:"gcw_multiDestErrorDestinationMessage",fieldId:k,legNumber:u+2})),v.val()||(n=v.attr("id"),p.push(v),r.push({msgId:"gcw_multiDestDateErrorMessage",fieldId:n,legNumber:u+2,dateFormat:f})))}$.each(p,function(a,b){c(b,g,"gcw_allFlightsComplete")});return e(void 0,void 0,g,void 0,void 0,r)},gcw_railscardTypeSelected:function(a){var b=!0;a=a.form.find(".gcw-railcard-select:visible");for(var d=0,f,g=[],n,p=0;p<a.length;p++)f=$(a[p]),""===f.val()&&(d+=1,g.push(f),n||(n=f.attr("id")));1<=d&&(b=!1,$.each(g,function(a,d){c(d,b,"gcw_railscardTypeSelected")}));return e(n,"gcw_railscardTypeSelected",b)},gcw_timeValidPickUp:function(a){var d=!0,f=a.form,q=f.find(".gcw-start-date:visible");a=new g(a.getDateFromString(q.val()));var q=f.find(".gcw-start-time:visible"),k=q.val(),n=q.attr("id"),f=f.data("gcw-min-hours");void 0!==a&&a[0]&&(a.addMinutes(b(k)),g(new Date).diffHours(a)<f&&(d=!1));c(q,d,"gcw_timeValidPickUp");return e(n,"gcw_carsPickUpTooSoonMessage",d,f)},gcw_allOriginsAreDifferentFromDestinations:function(a){var b=!0,d=[],f=a.form,g;a=a.getKeyParameter();for(var n=0;4>n;n++){var p=f.find("#flight-"+(n+2)+"-origin"+a+":visible"),r=f.find("#flight-"+(n+2)+"-destination"+a+":visible");0<p.length&&0<r.length&&p.val()===r.val()&&""!==p.val()&&(b=!1,g||(g=r.attr("id")),d.push(r),d.push(p))}$.each(d,function(a,d){c(d,b,"gcw_allOriginsAreDifferentFromDestinations")});return e(g,"gcw_distinct_locations",b)},gcw_youthAgesAllProvided:function(a){var b=a.form.data("gcw-youth-ages-all-provided-custom-error-message")?a.form.data("gcw-youth-ages-all-provided-custom-error-message"):"gcw_youth_ages_all_provided",d=!0;a=a.form;var f=0,g=a.find(".gcw-youth-field:visible"),n;a.find(".num-youth:visible").each(function(a,c){f+=parseInt($(c).val())});0<f&&0<g.length&&g.each(function(a,b){""===$(b).find("select").val()&&(n||(n=$(b).find("select").attr("id")),d=!1,c($(b),d,"gcw_youthAgesAllProvided"))});return e(n,b,d)},gcw_seniorAgesAllProvided:function(a){var b=a.form.data("gcw-senior-ages-all-provided-custom-error-message")?a.form.data("gcw-senior-ages-all-provided-custom-error-message"):"gcw_senior_ages_all_provided",d=!0;a=a.form;
var f=0,g=a.find(".gcw-seniors-field:visible"),n;a.find(".num-seniors:visible").each(function(a,c){f+=parseInt($(c).val())});0<f&&0<g.length&&g.each(function(a,b){""===$(b).find("select").val()&&(n||(n=$(b).find("select").attr("id")),d=!1,c($(b),d,"gcw_youthAgesAllProvided"))});return e(n,b,d)},gcw_railcardsCombinationValidation:function(a){var b=!0;a=a.form.find(".gcw-railcard-select:visible");for(var d=a.first().find("option:selected").attr("class"),f=[],g=[],n,p=0;p<a.length;p++)n=$(a[p]),g.push(n),n.find("option:selected").attr("class")!==d&&f.push(n);0<f.length?(b=!1,$.each(f,function(a,d){c(d,b,"gcw_railcardsCombinationValidation")})):$.each(g,function(a,d){c(d,b,"gcw_railcardsCombinationValidation")});return e(void 0,"gcw_railcardsCombinationValidation",b)},gcw_railsRouteNotSupported:function(a){a=a.form;var b=a.find(".gcw-origin:visible"),b=f.getUTAFeature(b,"point_of_supply"),d=a.find(".gcw-destination:visible"),d=f.getUTAFeature(d,"point_of_supply"),g=a.find(".gcw-rails-from input.gcw-origin , .gcw-rails-to input.gcw-destination"),k=!0;a=a.find(".gcw-rails-from input.gcw-origin").attr("id");b!==d&&(k=!1);c(g,k,"gcw_railsRouteNotSupported");return e(a,"gcw_railsRouteNotSupported",k)}}});
define("gcwForm","jquery uitk uitk_datepicker xdate gcwControllers gcwDataPreloadingFunctions gcwFieldsCollection GcwFormSubmission gcwFormValidations gcwProcessingFunctions gcwStorableLegacyKeys".split(" "),function(g,f,e,b,a,c,d,l,m,q,k){e=function(e,p,r,t,u){var h=this;h.form=e;h.valid=!0;h.isActive=!1;h.formInitialized=!1;h.dataLoadedFromLocalStorage=!1;h.gcwFormHistory=void 0;h.storedData=void 0;h.locale=h.form.data("locale");h.storedDataPerLocale=0<g("meta[name\x3dgcw_stored_data_per_locale][value\x3dtrue]").length;h.ignoreSavedFormData=0<g("meta[name\x3dignoreSavedFormData][value\x3dtrue]").length;if(u||localStorage)if(h.gcwFormHistory=JSON.parse(localStorage.getItem("gcw_form_history")),h.storedDataPerLocale){if(h.storedData=u||h.gcwFormHistory?h.gcwFormHistory[h.locale]:void 0,u=k.replace(h.storedData))h.storedData=u,h.gcwFormHistory[h.locale]=u,localStorage.setItem("gcw_form_history",JSON.stringify(h.gcwFormHistory))}else if(h.storedData=u||h.gcwFormHistory||void 0,u=k.replace(h.storedData))h.storedData=u,h.gcwFormHistory=u,localStorage.setItem("gcw_form_history",JSON.stringify(h.gcwFormHistory));h.fieldsCollection=new d(h);h.form.find("input, select, textarea").each(function(){h.fieldsCollection.add(g(this))});h.$lobTab=g('.tabs li button[data-section-id\x3d"#'+h.form.parent("section").attr("id")+'"]');h.alertList=e.find(".validation-alert-list");h.alertBox=e.find(".validation-alert");h.formValidations=m;h.specialProcessingLogic=q[r];h.controller=a[t];h.specialDataPreloadingLogic=c[p];h.$roomContainer=h.form.find(".roomlabel").parent().parent();h.$roomFieldSet=h.form.find(".gcw-rooms-container .room-data").clone();h.numberOfRooms=1;h.loadFormData=function(){var a=h.form.find(".gcw-sub-nav-option");h.specialDataPreloadingLogic&&h.specialDataPreloadingLogic(h.form,h.storedData);h.storedData&&!h.ignoreSavedFormData&&(h.updateRoomsHtml(),h.loadStoredData(),h.loadToggleElementsState());a&&a.length?(h.loadSubNavOptions(),h.setCurrentPackageType(h.form.find(".gcw-package-type:checked").attr("data-gcw-package-type"))):h.setCurrentPackageType(h.form.attr("data-gcw-current-package-type"));h.showDisabled();f.publish("mercury-form-history-loaded",{storedData:h.storedData})};h.loadFormController=function(){h.controller&&h.controller(h.form,h.getKeyParameter(),h.storedData,h.fieldsCollection)};h.getKeyParameter=function(){return h.form.data("gcw-key")?"-"+h.form.data("gcw-key"):""};h.loadStoredData=function(){h.form.find(".gcw-storeable").each(function(){var a=g(this),b=a.data("gcw-storeable-name"),b=h.storedData[b];if(a.is("select")){var c=a.data("gcw-default-option-value");h.optionExistInSelect(a,b)?a.val(b):b&&c&&a.val(c)}else"checkbox"!==a.attr("type")&&"radio"!==a.attr("type")||!0!==b&&"1"!==b?"checkbox"!==a.attr("type")&&"radio"!==a.attr("type")||!1!==b&&"0"!==b?(a.hasClass("gcw-start-date")||a.hasClass("gcw-end-date"))&&b?a.val(h.verifyDates(a,b)):b&&a.val(b):a.attr("checked",!1):a.attr("checked",!0);b&&(a.hasClass("gcw-toggle-checkbox")&&h.checkboxToggle(a),a.hasClass("gcw-toggle-search-type")&&a.prop("checked")&&h.toggleFormLOBs(a),a.data("gcw-toggled-field-class")&&h.selectToggle(a),a.data("gcw-toggled-element-by-value")&&h.selectToggleByValue(a),-1<g(h.form).attr("id").indexOf("activities")||-1<g(h.form).attr("id").indexOf("cars")||-1<g(h.form).attr("id").indexOf("rail")?h.form.addClass("gcw-timeValidLongEnough"):h.form.removeClass("gcw-timeValidLongEnough"),a.data("gcw-sub-nav-option-name")&&a.prop("checked")&&("multi"===a.data("gcw-sub-nav-option-name")?h.changeMultidestValidation("addClass"):h.changeMultidestValidation("removeClass"),-1<a.attr("id").indexOf("rail")&&-1<a.attr("id").indexOf("roundtrip")?h.changeRailsTimeValidEnoughValidation("addClass"):h.changeRailsTimeValidEnoughValidation("removeClass")),a.data("gcw-change-submit-text")&&h.changeSubmitButtonText(a),a.data("gcw-change-title-text")&&h.changeTitleText(a),a.hasClass("gcw-disable-enable-sub-nav")&&h.disableEnableSubNavs(a),a.hasClass("gcw-hide-advanced-section")&&h.hideAdvancedSection(a),a.hasClass("gcw-rooms-restriction")&&(b=h.form.find(".gcw-rooms-restriction").is(":checked"),c=a.is(":checked")?a.data("gcw-rooms-restriction-n-rooms"):h.form.find(".gcw-rooms-restriction:checked").data("gcw-rooms-restriction-n-rooms"),h.applyRoomsRestriction(b,c)),a.hasClass("gcw-hide-adults-children")&&h.hideSelectsOnCheckboxChange(a),a.hasClass("gcw-toggle-form-validation")&&h.toggleFormValdation(a),a.hasClass("gcw-start-date")&&a.parents("div[data-end-date]")&&(b=g(a.parents("div[data-end-date]").data("end-date")).children("label").children("input"),h.reflectEndDateValue(a,b)),a.hasClass("gcw-end-date")&&a.parents("div[data-start-date]")&&(b=g(a.parents("div[data-start-date]").data("start-date")).children("label").children("input"),h.reflectEndDateValue(b,a)),a.hasClass("gcw-partial-hotel")&&(h.adjustRoomDataPosition(a),h.storedData["gcw-hotel-car-package-type"]&&h.adjustRoomDataPosition(a,"hotel-car")),a.hasClass("gcw-update-datepicker-range")&&(h.updateDatepickerRanges(a),h.updateDateMaxRangeError(a)))});h.dataLoadedFromLocalStorage=!0};h.updateRoomsHtml=function(){var a=h.storedData["gcw-num-rooms"],b=h.form.find(".gcw-clone-rooms-fields"),c=b.data("gcw-default-option-value");h.optionExistInSelect(b,a)?(b.val(a),h.addRoomsFields(a),h.numberOfRooms=a):a&&c&&(b.val(c),h.addRoomsFields(c),h.numberOfRooms=c)};h.loadSubNavOptions=function(){h.form.find(".gcw-sub-nav-option").each(function(){g(this).data("gcw-sub-nav-option-name")&&g(this).prop("checked")&&h.toggleOptionFields(g(this))})};h.loadToggleElementsState=function(){h.form.find("[data-control\x3dtoggle]").each(function(){var a=!1,b=h.getKeyParameter();h.form.find("#"+g(this).attr("aria-controls")).find("input.gcw-show-with-value, select.gcw-show-with-value").each(function(){g(this).is('input[type\x3d"checkbox"]')?g(this).prop("checked")&&(a=!0):g(this).attr("id")==="car-options-type"+b?"1"!==g(this).val()&&(a=!0):g(this).attr("id")==="car-options-discount"+b?"0"!==g(this).val()&&(a=!0):""!==g(this).val()&&(a=!0)});a&&!g(this).hasClass("open")||g(this).hasClass("gcw-toggle-default-open")?g(this).uitk_toggle("open"):g(this).hasClass("open")&&g(this).uitk_toggle("close");var c=h.form.find(".gcw-flights-add-car input");0<c.length&&h.hideAdvancedSection(c)})};h.optionExistInSelect=function(a,b){var c=!1;a.find("option").each(function(a,d){g(d).val()===b&&(c=!0)});return c};h.reflectFieldValue=function(a){if(a.data("template"))a.one("focus",function(){h.reflectFieldValue(a)});var b=a.data("gcw-storeable-name");h.storedData&&b in h.storedData&&f.publish("gcw.storedDataUpdate",{targetStoreableName:b});var b=g(".gcw-form [data-gcw-storeable-name\x3d"+b+"]"),c=a.val();b.each(function(b,d){if(!g(d)[0].isEqualNode(a[0])){if(g(d).is("select")){var e=g(d).data("gcw-default-option-value");h.optionExistInSelect(g(d),c)?g(d).val(c):e&&g(d).val(e)}else g(d).val(c);void 0!==g(d).data("gcw-toggled-field-class")&&h.selectToggle(g(d));g(d).hasClass("gcw-guests-field")&&g(d).trigger("guestsChange");g(d).hasClass("gcw-young-child")&&g(d).prop("checked",!0);g(d).data("gcw-toggled-element-by-value")&&h.selectToggleByValue(g(d));g(d).parent("label").hasClass("gcw-rooms-field")&&g(d).trigger("setNRoomsClass");g(d).hasClass("gcw-change-submit-text")&&g(d).trigger("changeSubmitButtonText");g(d).hasClass("gcw-start-date")&&g(d).parents("div[data-end-date]")&&(e=g(g(d).parents("div[data-end-date]").data("end-date")).children("label").children("input"),h.reflectEndDateValue(g(d),e));g(d).hasClass("gcw-end-date")&&g(d).parents("div[data-start-date]")&&(e=g(g(d).parents("div[data-start-date]").data("start-date")).children("label").children("input"),h.reflectEndDateValue(e,g(d)))}})};h.processForm=function(a){var b;h.clearHiddenInputs();h.specialProcessingLogic&&(b=h.specialProcessingLogic(h.form,h.getKeyParameter()));h.validateForm()?l.submit(h.form,h.gcwFormHistory,h.storedDataPerLocale,b,a):a.preventDefault()};h.getErrorFormState=function(){var a=0,b=[],c;for(c in h.formValidations){var d=
h.formValidations[c],e=c.replace(/_/g,"-");h.form.hasClass(e)&&(d=d(h),d.valid||(a++,b.push(d)))}return{numFormErrors:a,badForm:b}};h.validateForm=function(){var a=h.fieldsCollection.getErrorState(),b=h.getErrorFormState();h.errorState=g.extend({},b,a);h.updateAlerts(h.errorState);if(0===h.errorState.numFormErrors&&0===h.errorState.numFieldErrors)return!0;h.fieldsCollection.enableInactiveFields();f.utils.focusElement(e.find(".alert-title"));return!1};h.updateAlerts=function(a){var b=a.badFields;a=a.badForm;h.alertList.empty();h.alertBox.addClass("hidden").attr("aria-hidden",!0);g.each(b,function(a,b){h.toggleAlerts(b)});g.each(a,function(a,b){h.toggleAlerts([b])})};h.toggleAlerts=function(a){g.each(a,function(a,b){if(b.multiErrors)g.each(b.multiErrors,function(a,b){var c=g("#"+b.msgId).html(),c=[c];this.legNumber&&(c=c.concat(this.legNumber));this.dateFormat&&(c=c.concat(this.dateFormat));c=window.format.apply(b,c);h.alertList.append('\x3cli\x3e\x3ca class\x3d"error-link" href\x3d"#'+b.fieldId+'"\x3e'+c+"\x3c/a\x3e\x3c/li\x3e");h.alertBox.removeClass("hidden").attr("aria-hidden",!1)});else{var c=g("#"+this.msgId).html(),c=[c];this.strParams&&(c=c.concat(this.strParams));c=window.format.apply(b,c);this.hideMessage||(h.alertList.append('\x3cli\x3e\x3ca class\x3d"error-link" href\x3d"#'+this.fieldId+'"\x3e'+c+"\x3c/a\x3e\x3c/li\x3e"),h.alertBox.removeClass("hidden").attr("aria-hidden",!1))}})};h.focusInputError=function(a){a=a.attr("href");h.form.find(a).focus()};h.showDisabled=function(){h.form.find(".gcw-show-disabled").prop("disabled","disabled")};h.selectToggle=function(a){var b="group"===a.val()?1:parseInt(a.val(),10),c=a.data("gcw-toggled-field-parent-class");if(c&&(c=a.closest("."+c))&&0<c.length)for(a=a.data("gcw-toggled-field-class"),a=c.find("."+a),a.each(function(){g(this).addClass("gcw-disabled")}),c=0;c<b;c++)g(a[c]).toggleClass("gcw-disabled");h.checkChildrenAges()};h.selectToggleByValue=function(a){var b=[],c=parseInt(a.data("gcw-toggled-element-by-value").split(",")[1]),d=a.data("gcw-toggled-element-by-value").split(",")[0],e=a.val(),f=0,l=g(".gcw-rooms-container");h.fieldsCollection.fields.forEach(function(a,c){a.$field.hasClass("num-children")&&a.isActive()&&a.$field.is(":visible")&&b.push(a.$field)});b.forEach(function(a,b){f+=parseInt(g(a).val())});0<f?l.addClass("guests-wrapping"):l.removeClass("guests-wrapping");"gcw-young-child-note"!==d?f===c?g("#"+d).parent().addClass("gcw-disabled"):g("#"+d).parent().removeClass("gcw-disabled"):(d=h.form.find("."+d),e&&(e<=c||0===e)?d.hasClass("gcw-disabled")&&"0"!==a.closest("fieldset").find(".seat-children").val()&&h.showYoungChildNote(!0):h.checkChildrenAges(f,c,d))};h.checkChildrenAges=function(a,b,c){var d=h.form.find(".gcw-child-age-select:visible"),e=!1,f=[];a=a||!1;b=b||1;c=c||h.form.find(".gcw-young-child-note");a||(h.fieldsCollection.fields.forEach(function(a,b){a.$field.hasClass("num-children")&&a.isActive()&&f.push(a.$field)}),f.forEach(function(b,c){a+=parseInt(g(b).val())}));for(var l=0;l<a;l++)if((c=g(d[l]).val())&&c<=b){e=!0;break}h.showYoungChildNote(e)};h.showYoungChildNote=function(a){var b=g(".gcw-young-child-note");a?b.removeClass("gcw-disabled"):b.addClass("gcw-disabled")};h.checkboxToggle=function(a){if(a.data("gcw-toggled-element")){var b=a;a=a.data("gcw-toggled-element").split(";");var c=h.form.find(".gcw-default-visible-msg");g.each(a,function(a,d){var e=g(d);b.hasClass("gcw-gt-roundtrip")&&e.removeClass("gcw-disabled");b.hasClass("gcw-driver-age")?b.prop("checked")?e.addClass("gcw-disabled"):e.removeClass("gcw-disabled"):b.prop("checked")?(c.addClass("gcw-disabled"),e.removeClass("gcw-disabled")):(c.removeClass("gcw-disabled"),e.addClass("gcw-disabled"))});1<h.form.find(".gcw-trigger-tooltip:checked").length?(c.addClass("gcw-disabled"),a=h.form.find(".gcw-msg-tooltip.gcw-tooltip-persit"),h.form.find(".gcw-msg-tooltip").addClass("gcw-disabled"),a.removeClass("gcw-disabled")):1===h.form.find(".gcw-trigger-tooltip:checked").length&&(c.addClass("gcw-disabled"),b=h.form.find(".gcw-trigger-tooltip:checked"),a=h.form.find(".gcw-trigger-tooltip:checked").data("gcw-toggled-element").split(";"),g.each(a,function(a,b){g(b).removeClass("gcw-disabled")}))}};h.isFieldNeeded=function(a,b){var c=b.data("gcw-field-available-for-sub-nav-option").split(",");return b.hasClass("gcw-disabled-by-loadStoredData")?!1:-1<g.inArray(a,c)};h.toggleOptionFields=function(a){if(a.is(":visible")){var b=a.data("gcw-sub-nav-option-name");h.form.find("[data-gcw-field-available-for-sub-nav-option]").each(function(a,c){var d=g(c);h.isFieldNeeded(b,d)?g(c).removeClass("gcw-disabled"):g(c).addClass("gcw-disabled")})}};h.changeMultidestValidation=function(a){var b=h.form.find("input.gcw-valid-date:visible");g(b[0])[a]("gcw-multidest-date")};h.changeRailsTimeValidEnoughValidation=function(a){h.form[a]("gcw-timeValidLongEnough")};h.changeTitleText=function(a){var b=h.form.find(".mobile-hero-banner-title"),c=a.data("gcw-change-title-text"),d=a.parent().siblings("label").children("input"),e="",f,l;d&&d.data("gcw-change-title-text")&&(e=d.data("gcw-change-title-text"));c&&(f=c.split(";")[0],l=c.split(";")[1],c=c.split(";")[2],e=e.split(";")[1],a.prop("checked")&&d&&d.prop("checked")?c&&b.text(c):a.prop("checked")?l&&b.text(l):d&&d.prop("checked")?e&&b.text(e):b.text(f))};h.changeSubmitButtonText=function(a){var b=a.data("gcw-change-submit-text"),c=b.split(";")[2],d=b.split(";")[0],b=b.split(";")[1],e=h.form.find('button[type\x3d"submit"]'),f="group"===h.form.find(".gcw-rooms-field select").val(),l=e.data("gcw-change-submit-text"),g=h.form.find('.gcw-change-submit-text[type\x3d"checkbox"]:checked'),m="",k;""===b?a.val()===c?e.children().text(d):(g&&0<g.length&&(m=1===g.length?g.data("gcw-change-submit-text").split(";")[0]:g.data("gcw-change-submit-text").split(";")[1]),e.children().text(0<m.length?m:l)):(c=a.prop("checked"),a=a.parent().siblings().children("input"),0<a.length&&(k=a.data("gcw-change-submit-text").split(";")[0]),c?0<a.length&&a.prop("checked")?e.children().text(b):e.children().text(d):f||(0<a.length&&a.prop("checked")?e.children().text(k):e.children().text(l)))};h.disableEnableSubNavs=function(a){var b=a.prop("checked"),c=e.find(".sub-nav-select"),d=c.find(".flight-helper"),f="car",l=h.getKeyParameter();-1!==a.attr("id").indexOf("car")&&(f="hotel");a=e.find("#flight-add-"+f+"-checkbox"+l);b?(c.addClass("disable"),c.children("label").addClass("disable"),d.removeClass("gcw-disabled")):a.prop("checked")||(c.removeClass("disable"),c.children("label").removeClass("disable"),d.addClass("gcw-disabled"))};h.hideSelectsOnCheckboxChange=function(a){a=a.prop("checked");var b=h.form.find(".available-for-flights"),c=h.form.find(".not-room-in-package");a?(b.addClass("gcw-disabled gcw-disabled-by-loadStoredData"),c.removeClass("room-data")):(b.removeClass("gcw-disabled gcw-disabled-by-loadStoredData"),c.addClass("room-data"))};h.updateDatepickerRanges=function(a){var b=e.find("[data-soft-package]").not('[data-soft-package\x3d"car"]').attr("data-soft-package"),c=a.prop("checked"),d=e.find(".gcw-start-date.gcw-update-date-range").first(),f=d.closest("div"),l,m,k,n,q=e.find(".gcw-end-date.gcw-update-date-range").first();"hotel"===b&&c?(l=e.find(".gcw-start-date.gcw-update-date-range").last(),m=l.closest("div"),k=e.find(".gcw-end-date.gcw-update-date-range").last(),b=m.data("default-range-length")):(n=g(".package-max-range:hidden"),n=n.closest("div"),b=f.data("default-range-length"));c?(f.attr("data-default-range-length",1),d.attr("data-min-range-length",1),m&&void 0!==m.data("max-range-length")&&"function"===typeof f.uitk_datepicker?f.uitk_datepicker("updateOptions",{maxRangeLength:m.data("max-range-length")}):f.uitk_datepicker("updateOptions",{maxRangeLength:n.data("max-range-length")}),m?(""===l.val()&&l.val(d.val()),""===k.val()&&k.val(q.val()),h.reflectEndDateValue(l,q),h.reflectEndDateValue(l,k)):h.reflectEndDateValue(d,q)):(f.attr("data-default-range-length",b),d.attr("data-min-range-length",b),void 0!==a.data("max-range-length")&&
"function"===typeof f.uitk_datepicker&&f.uitk_datepicker("updateOptions",{maxRangeLength:a.data("max-range-length")}))};h.updateDateMaxRangeError=function(a){a=a.prop("checked");h.form.find(".gcw-end-date").data("gcw-max-range-error",a?"gcw_max_range_nights":"")};h.reflectEndDateValue=function(a,c){if(0<a.length&&0<c.length&&c.data("gcw-date-format")){var d=a.parent("label").parent("[data-end-date]"),e=a.val(),f=c.val(),l=h.getDateFromString(e),g=h.getDateFromString(f),e=new b(l),m=new b(g),k=c.data("gcw-date-format").toLowerCase().replace(/m/g,"M"),n=0,q=0;void 0!==d.data("default-range-length")&&(n=d.data("default-range-length"));void 0!==a.data("min-range-length")&&(q=a.data("min-range-length"));l&&(d=g&&e.diffDays(m)<q,""===f||d)&&(d&&e.addDays(n),c.val(e.toString(k)))}};h.applyRoomsRestriction=function(a,b){h.form.find(".gcw-rooms-field select").find("option").each(function(c,d){0<g(d).parent("span").length&&g(d).unwrap();a&&c+1>b&&0===g(d).parent("span").length&&g(d).wrap('\x3cspan style\x3d"display: none;" /\x3e')})};h.removeRoomsFields=function(a){for(var b=h.numberOfRooms;b>a;b--)h.removeFieldsFromCollection(g(h.$roomContainer.children().eq(b-1))),h.$roomContainer.children().eq(b-1).remove()};h.addRoomsFields=function(a){var b,c;c=h.form.data("lob-form");"flight"===c&&(c+="-hotel");b=parseInt(h.numberOfRooms,10);isNaN(b)&&(b=1);for(var d=b;d<a;d++){b=h.$roomFieldSet.clone();var e=b.find(".roomlabel").html(),f=d+1,l=b.attr("id");l&&b.attr("id",l.replace("room1","room"+f));b.find(".roomlabel").html(e.replace(1,f));g.each(b.find("label"),function(a,b){var d=g(b).attr("for");void 0!==d&&g(b).attr("for",d.replace(c+"-1",c+"-"+f))});g.each(b.find("select"),function(a,b){var d=g(b).attr("id");void 0!==d&&(d=d.replace(c+"-1",c+"-"+f),g(b).attr("id",d));var e=g(b).attr("data-gcw-storeable-name"),e=e.replace(1,f),d=h.storedData&&h.storedData[e];g(b).attr("data-gcw-storeable-name",e);d&&g(b).val(d);g(b).data("gcw-toggled-field-class")&&h.selectToggle(g(b))});h.$roomContainer.append(b);h.addFieldsInCollection(b)}};h.addFieldsInCollection=function(a){a.find("select").each(function(){h.fieldsCollection.add(g(this))})};h.removeFieldsFromCollection=function(a){a.find("select").each(function(){for(var a=0;a<h.fieldsCollection.fields.length;a++)h.fieldsCollection.fields[a].$field[0].id===g(this)[0].id&&h.fieldsCollection.fields.splice(a,1)})};h.hideAdvancedSection=function(a){var b=h.form.find(".gcw-advanced-options");a.prop("checked")?b.hide():b.show()};h.toggleFormLOBs=function(a){h.form.toggleClass(a.data("gcw-search-type"))};h.verifyDates=function(a,c){var d,e,f;a&&a.length&&(d=a.data("gcw-date-format"),e=h.getDateFromString(c),d&&e&&(e=new b(e),f=new b,0>Math.ceil(f.diffDays(e))&&(d=d.toLowerCase().replace(/m/g,"M"),c=(-1<a.attr("id").indexOf("hotel")||-1<a.attr("id").indexOf("package"))&&a.hasClass("gcw-end-date")?f.addDays(1).toString(d):f.toString(d))));return c};h.getDateFromString=function(a){return f.datePickerCalendarObj.getDateFromString(a,!0)};h.extendTypeaheadLogic=function(){var a=h.form.find(".autocomplete-arrow").children("input"),b;f.prepFields();a.each(function(a,c){var d=g(c);d.parent().siblings("button").first().click(function(a){d.hasClass("gcw-clear-input-on-typing")&&(b=d.data("clear-on-change"))&&h.clearInput(b);d.trigger("change",["clearInput"])})})};h.clearHiddenInputs=function(){h.form.find(".gcw-clear-before-submit").each(function(){g(this).val("")})};h.clearInput=function(a){h.form.find("[name\x3d"+a+"]").val("")};h.toggleFormValdation=function(a){var b=a.data("gcw-toggle-form-validation-class"),c=a.data("gcw-toggle-form-validation-data-attr");b&&a.is(":checked")?(h.form.addClass(b),c&&(a=c.split(",")[0],2===c.split(",").length&&(c=c.split(",")[1],h.form.data(a,c)))):b&&(h.form.removeClass(b),c&&(a=c.split(",")[0],h.form.removeData(a)))};h.adjustRoomDataPosition=function(a,b){var c=e.find('[id*\x3d"packages-partial-dates"]');if(0<c.length){var d=e.find(".gcw-rooms-container"),f=a.prop("checked");d.remove();if("hotel-car"===b)return c.parent().parent().before(d),!1;f?c.append(d):c.parent().parent().before(d)}};h.setCurrentState=function(){h.isActive=h.form.is(":visible")};h.setCurrentPackageType=function(a){-1<"flight hotel flight-hotel flight-hotel-car flight-car hotel-car".split(" ").indexOf(a)&&(h.form.attr("data-gcw-current-package-type",a),f.publish("gcw.updatePackageType",{packageType:a}))};h.initForm=function(){h.formInitialized||(h.loadFormData(),h.extendTypeaheadLogic(),h.loadFormController(),h.formInitialized=!0)};h.form.on("submit",h.processForm);h.form.on("change",".gcw-storeable",function(a){a=g(a.target);h.reflectFieldValue(a)});h.form.on("change",".gcw-toggles-fields",function(a){a=g(a.target);h.selectToggle(a)});h.form.on("change",".gcw-toggles-field-by-value",function(a){a=g(a.target);h.selectToggleByValue(a)});h.form.on("change",".gcw-toggle-checkbox",function(a){a=g(a.target);h.checkboxToggle(a)});h.form.on("change",".gcw-sub-nav-option",function(a){var b=g(a.target);a=b.data("gcw-sub-nav-option-name");var c=h.form.find(".gcw-partial-hotel");h.toggleOptionFields(b);"multi"===a?h.changeMultidestValidation("addClass"):(h.changeMultidestValidation("removeClass"),"hotel-car"===a?h.adjustRoomDataPosition(c,"hotel-car"):h.adjustRoomDataPosition(c));-1<b.attr("id").indexOf("rail")&&-1<b.attr("id").indexOf("roundtrip")?h.form.addClass("gcw-timeValidLongEnough"):-1<g(h.form).attr("id").indexOf("activities")||g(h.form).attr("id").indexOf("cars")||h.form.removeClass("gcw-timeValidLongEnough");b=g(h.form[0]).data("gcw-key");-1<g(h.form).attr("id").indexOf("activities")&&"gt"===a&&g("#activity-gt-fromairport-"+b).attr("checked","true");-1<g(h.form).attr("id").indexOf("cars")&&"gt"===a&&g("#car-gt-fromairport-"+b).attr("checked","true")});h.form.on("change",".gcw-change-title-text",function(a){a=g(a.target);h.changeTitleText(a)});h.form.on("change changeSubmitButtonText",".gcw-change-submit-text",function(a){a=g(a.target);h.changeSubmitButtonText(a)});h.form.on("change",".gcw-disable-enable-sub-nav",function(a){a=g(a.target);h.disableEnableSubNavs(a)});h.form.on("change",".gcw-rooms-restriction",function(a){var b=g(a.target);a=h.form.find(".gcw-rooms-restriction").is(":checked");b=b.is(":checked")?b.data("gcw-rooms-restriction-n-rooms"):h.form.find(".gcw-rooms-restriction:checked").data("gcw-rooms-restriction-n-rooms");h.applyRoomsRestriction(a,b)});h.form.on("change",".gcw-hide-adults-children",function(a){a=g(a.target);h.hideSelectsOnCheckboxChange(a)});h.form.on("change",".gcw-toggle-form-validation",function(a){a=g(a.target);h.toggleFormValdation(a)});h.form.on("click",".error-link",function(a){a.preventDefault();var b=g(a.target);h.focusInputError(b);a.stopPropagation()});h.form.on("change",".gcw-toggle-search-type",function(a){h.toggleFormLOBs(g(a.target))});h.form.on("input",".gcw-clear-input-on-typing",function(a){(a=g(a.target).data("clear-on-change"))&&h.clearInput(a)});h.form.on("change",".gcw-hide-advanced-section",function(a){a=g(a.target);h.hideAdvancedSection(a)});h.form.on("change",".gcw-partial-hotel",function(a){a=g(a.target);h.adjustRoomDataPosition(a)});h.form.on("change",".gcw-update-datepicker-range",function(a){a=g(a.target);h.updateDatepickerRanges(a);h.updateDateMaxRangeError(a)});h.form.on("click",".gcw-package-type",function(a){a=g(a.target);if(a.attr("data-soft-package")){var b={flight:!1,hotel:!1,car:!1};a=[];b.hasOwnProperty(h.form.data("lob-form"))&&(b[h.form.data("lob-form")]=!0);g.each(h.form.find(".gcw-package-type:checked"),function(a,c){b.hasOwnProperty(g(c).data("soft-package"))&&(b[g(c).data("soft-package")]=!0)});b.flight&&a.push("flight");b.hotel&&a.push("hotel");b.car&&a.push("car");h.setCurrentPackageType(a.join("-"))}else h.setCurrentPackageType(a.data("gcw-package-type"));f.prepFields()});h.form.on("change",".gcw-clone-rooms-fields",function(){f.publish("gcw.roomsChanged",{})});f.subscribe("datepicker.selectDate",function(a,b){var c=b.element;h.reflectFieldValue(c);if(c.hasClass("gcw-start-date")&&
!c.hasClass("multidest-field")&&"gcw-flights-start-date"!==c.data("gcw-storeable-name")){var d=g(c.parents("div[data-end-date]").data("end-date")).children("label").children("input");h.reflectEndDateValue(c,d)}});f.subscribe("gcw.storedDataUpdate",function(a,b){h.storedData&&b.targetStoreableName in h.storedData&&delete h.storedData[b.targetStoreableName]});f.subscribe("gcw.updatePackageType",function(a,b){});f.subscribe("gcw.roomsChanged",function(a,b){var c;if(0!==h.$roomContainer.length&&(void 0!==h.form.find(".gcw-clone-rooms-fields")[0]&&(c=parseInt(h.form.find(".gcw-clone-rooms-fields")[0].value,10)),void 0!==c)){isNaN(c)&&(c=1);var d=parseInt(h.numberOfRooms,10);isNaN(d)&&(d=1);d<c?h.addRoomsFields(c):d>c&&h.removeRoomsFields(c);h.numberOfRooms=c}});h.setCurrentState();h.isActive&&h.initForm();return h};e.getCurrentActiveForm=function(a){var b=[],c;for(c in a)if(b=g.grep(a[c],function(a){return!0===a.isActive}),0<b.length)break;return b};e.setFormsStatus=function(a){for(var b in a)g.each(a[b],function(a,b){b.setCurrentState()})};return e});define("gcwProcessingFunctions","GcwActivitiesProcessingFunctions GcwActivitiesIndiaProcessingFunctions GcwCarsProcessingFunctions GcwCarsAsiaProcessingFunctions GcwCarsIndiaProcessingFunctions GcwCruisesProcessingFunctions GcwFlightsProcessingFunctions GcwFlightsIndiaProcessingFunctions GcwHotelsProcessingFunctions GcwPackagesProcessingFunctions GcwPackagesFlexibleShoppingProcessingFunctions GcwRailsProcessingFunctions GcwThreeppProcessingFunctions GcwPackagesEssPassthroughProcessingFunctions".split(" "),function(g,f,e,b,a,c,d,l,m,q,k,n,p,r){return{hotels:function(a,b){return(new m(a,b)).dispatch()},flights:function(a,b){return(new d(a,b)).dispatch()},flights_india:function(a,b){return(new l(a,b)).dispatch()},rails:function(a,b){return(new n(a,b)).dispatch()},packages:function(a,b){return a.hasClass("ess-passthrough-form")&&a.hasClass("flexible-shopping-form")?(new r(a,b)).dispatch():a.hasClass("flexible-shopping-form")?(new k(a,b)).dispatch():(new q(a,b)).dispatch()},cruises:function(a,b){return(new c(a,b)).dispatch()},threePP:function(a,b){return(new p(a,b)).dispatch()},cars_asia:function(a,c){return(new b(a,c)).dispatch()},cars_india:function(b,c){return(new a(b,c)).dispatch()},activities_india:function(a,b){return(new f(a,b)).dispatch()},activities:function(a,b){return(new g(a,b)).dispatch()},cars:function(a,b){return(new e(a,b)).dispatch()}}});define("GcwActivitiesProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.idSuffix=c}var b;e.prototype.dispatch=function(){var a;if("checked"===$("#activity-ttd"+b.idSuffix).attr("checked")){a=b.$form.find("[name\x3dlocation]").val();var c=b.$form.find("[name\x3dstartDate]").val(),d=b.$form.find("[name\x3dendDate]").val();a="/things-to-do/search?\x26location\x3d"+a+("\x26startDate\x3d"+c)+("\x26endDate\x3d"+d)}else a="checked"===$("#activity-gt-fromairport"+b.idSuffix).attr("checked"),a=f.getGroundTransfersSearchURL(b.$form,b.idSuffix,a);return f.returnValue(!0,a)};return e});define("GcwActivitiesIndiaProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.idSuffix=c}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-destination:visible"),a=f.getUTAFeature(a,"country_code");f.replaceFormAction(b.$form,a,"IN");var c=b.$form.attr("action");if("/things-to-do/search"===c){var d=f.getWindowLocation(),d=d.replace("wwwexpediacoin","wwwexpediacomsg").replace("www.expedia.co.in","www.expedia.com.sg");b.$form.attr("action",d+c)}c="";a&&"IN"!==a&&(c="INLX");f.setInput(b.$form,"rfrr",c);f.setUSDateInHiddenInput(b.$form,"gcw-start-date","startDate");f.setUSDateInHiddenInput(b.$form,"gcw-end-date","endDate");return f.returnValue(!1)};return e});define("GcwCarsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.idSuffix=c}var b;e.prototype.dispatch=function(){var a;"checked"===$("#car-car"+b.idSuffix).attr("checked")?a=b.getCarsSearchURL():(a="checked"===$("#car-gt-fromairport"+b.idSuffix).attr("checked"),a=f.getGroundTransfersSearchURL(b.$form,b.idSuffix,a));return f.returnValue(!0,a)};e.prototype.getCarsSearchURL=function(){var a="carsearch?",c=b.$form.find("[name\x3dlocn]").val();c&&(a+="\x26locn\x3d"+c,(c=b.$form.find("[name\x3dpickupIATACode]").val())&&(a+="\x26pickupIATACode\x3d"+c),(c=b.$form.find("[name\x3ddpln]").val())&&(a+="\x26dpln\x3d"+c),(c=b.$form.find("[name\x3dpickupCountryCode]").val())&&(a+="\x26pickupCountryCode\x3d"+c));if(c=b.$form.find("[name\x3dloc2]").val())a+="\x26loc2\x3d"+c,(c=b.$form.find("[name\x3dreturnIATACode]").val())&&(a+="\x26returnIATACode\x3d"+c),(c=b.$form.find("[name\x3ddrid1]").val())&&(a+="\x26drid1\x3d"+c),(c=b.$form.find("[name\x3dreturnCountryCode]").val())&&(a+="\x26returnCountryCode\x3d"+c);(c=b.$form.find("[name\x3ddate1]").val())&&(a+="\x26date1\x3d"+c);(c=b.$form.find("[name\x3dtime1]").val())&&(a+="\x26time1\x3d"+c);(c=b.$form.find("[name\x3ddate2]").val())&&(a+="\x26date2\x3d"+c);(c=b.$form.find("[name\x3dtime2]").val())&&(a+="\x26time2\x3d"+c);b.$form.find("[id\x3dcar-driver-age-container"+b.idSuffix+"]").hasClass("gcw-disabled")||(c=b.$form.find("[name\x3dage]").val())&&(a+="\x26age\x3d"+c);"true"===b.$form.find("a[href\x3d#cars-adv-options"+b.idSuffix+"]").attr("aria-expanded")&&(c=b.$form.find("[name\x3dkind]").val())&&(a+="\x26kind\x3d"+c);return a+"\x26dagv\x3d1\x26subm\x3d1\x26fdrp\x3d0\x26ttyp\x3d2\x26acop\x3d2\x26rdus\x3d10\x26rdct\x3d1\x26styp\x3d4"};return e});define("GcwCarsAsiaProcessingFunctions",["classCheck","uitk","GcwUtilsProcessingFunctions"],function(g,f,e){function b(c,d){g(this,b);a=this;a.$form=c;a.idSuffix=d}var a;b.prototype.dispatch=function(){var b=a.$form.find(".gcw-carPickUp"),d=a.$form.find(".gcw-carDropOff"),l=a.$form.find(".gcw-start-date"),g=a.$form.find(".gcw-start-time"),q=a.$form.find(".gcw-end-date"),k=a.$form.find(".gcw-end-time"),n=a.$form.find("[name\x3dlocationName]"),p=a.$form.find("[name\x3dpickupDate]"),r=a.$form.find("[name\x3dpickupMonth]"),t=a.$form.find("[name\x3dpickupYear]"),u=a.$form.find("[name\x3dreturnDate]"),h=a.$form.find("[name\x3dreturnMonth]"),v=a.$form.find("[name\x3dreturnYear]"),x=a.$form.find("[name\x3dpickupHour]"),y=a.$form.find("[name\x3dpickupMinute]"),D=a.$form.find("[name\x3dreturnHour]"),G=a.$form.find("[name\x3dreturnMinute]"),B=a.$form.find("[name\x3dpickupIATACode]"),E=a.$form.find("[name\x3dreturnIATACode]"),z=a.$form.find("[name\x3dpickupHotelId]"),C=a.$form.find("[name\x3dpickupCity]"),g=g.val(),k=k.val();l&&l.length&&l.val()&&(l=f.datePickerCalendarObj.getDateFromString(l.val(),!0),p&&p.length&&p.val(l.getDate()),r&&r.length&&r.val(l.getMonth()),t&&t.length&&t.val(l.getFullYear()));q&&q.length&&q.val()&&(q=f.datePickerCalendarObj.getDateFromString(q.val(),!0),u&&u.length&&u.val(q.getDate()),h&&h.length&&h.val(q.getMonth()),v&&v.length&&v.val(q.getFullYear()));d&&B&&E&&d.length&&B.length&&E.length&&""===d.val()&&""!==B.val()&&E.val(B.val());B&&B.length&&""===B.val()?(E.val(""),b=z&&C&&z.length&&C.length&&""!==z.val()&&""!==C.val()?C.val():b.val()):b="";n&&n.length&&e.setInput(a.$form,"locationName",b);x&&x.length&&e.setInput(a.$form,"pickupHour",a.convertHourCarsAsia(g));y&&y.length&&e.setInput(a.$form,"pickupMinute",parseInt(g.substring(2,4)));D&&D.length&&e.setInput(a.$form,"returnHour",a.convertHourCarsAsia(k));G&&G.length&&e.setInput(a.$form,"returnMinute",parseInt(k.substring(2,4)));return e.returnValue(!1)};b.prototype.convertHourCarsAsia=function(a){var b=-1<a.indexOf("PM"),c=parseInt(a.substring(0,2));b?12>parseInt(a.substring(0,2))&&(c=parseInt(a.substring(0,2))+12):12===parseInt(a.substring(0,2))&&(c=parseInt(a.substring(0,2))-12);return c};return b});
define("GcwCarsIndiaProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.idSuffix=c}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-carPickUp:visible"),a=f.getUTAFeature(a,"country_code");f.replaceFormAction(b.$form,a,"IN");a=b.$form.attr("action");if("/carsearch"===a){var c=f.getWindowLocation(),c=c.replace("wwwexpediacoin","wwwexpediacom").replace("www.expedia.co.in","www.expedia.com");$("html").hasClass("lt-ie9")?b.$form.attr("action",c+a):b.$form.attr("action",c+a+"/app")}f.setUSDateInHiddenInput(b.$form,"gcw-start-date","date1");f.setUSDateInHiddenInput(b.$form,"gcw-end-date","date2");return f.returnValue(!1)};return e});define("GcwCruisesProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.idSuffix=c}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-show-adv-options");0<a.length&&(a.hasClass("open")?(b.$form.find(".gcw-cruises-bs").val(""),b.$form.find(".gcw-cruises-as").val("1")):(b.$form.find(".gcw-cruises-bs").val("1"),b.$form.find(".gcw-cruises-as").val("")));a=b.$form.find(".gcw-start-date");0<a.length&&""!==a.val()&&(a=a.val(),f.setInput(b.$form,"earliest-departure-date",b.getFormattedDate(a)));a=b.$form.find(".gcw-end-date");0<a.length&&""!==a.val()&&(a=a.val(),f.setInput(b.$form,"latest-departure-date",b.getFormattedDate(a)));a=b.$form.find(".num-adults:visible");0<a.length&&""!==a.val()&&(a=a.val(),f.setInput(b.$form,"adultCount",a));a=b.buildChildren();f.setInput(b.$form,"childCount",a);return f.returnValue(!1)};e.prototype.getFormattedDate=function(a){var b="";a=uitk.datePickerCalendarObj.getDateFromString(a);var d;a&&(b=a.getDate(),d=a.getMonth()+1,a=a.getFullYear(),b=a+"-"+d+"-"+b);return b};e.prototype.buildChildren=function(){var a=b.$form.find(".num-children:visible"),c="";if(a&&0<a.length&&0<a.val()){var c=c+a.val(),c=c+"\x26childAges\x3d",d=b.$form.find(".children-data select:visible");d.each(function(a,b){c+=$(b).val();a!==d.length-1&&(c+=",")})}return c};return e});define("GcwFlightsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions","GcwPackagesProcessingFunctions","GcwPackagesFlexibleShoppingProcessingFunctions","GcwPackagesEssPassthroughProcessingFunctions"],function(g,f,e,b,a){function c(a,b){g(this,c);d=this;d.$form=a;d.idSuffix=b}var d;c.prototype.dispatch=function(){var c=d.getFlightType();f.setInput(d.$form,"trip",c);var g=f.getLocationField(d.$form,"origin").val(),q=f.getLocationField(d.$form,"destination").val(),k=d.$form.find(".gcw-flights-start-date:visible input").val(),k=d.buildLeg(g,q,k);f.setInput(d.$form,"leg1",k);"oneway"===c&&f.setInput(d.$form,"leg2","");"roundtrip"===c&&(k=d.$form.find(".gcw-flights-end-date:visible input").val(),g=d.buildLeg(q,g,k),f.setInput(d.$form,"leg2",g));if("multi"===c)for(c=$(d.$form.find(".gcw-multi-flight-data")),g=0;4>g&&c.find("input.gcw-destination").eq(g).val();g++){var q=c.find("input.gcw-origin").eq(g).val(),k=c.find("input.gcw-destination").eq(g).val(),n=c.find("input.gcw-start-date").eq(g).val(),q=d.buildLeg(q,k,n);f.setInput(d.$form,"leg"+(g+2),q)}c=d.buildPassengers();f.setInput(d.$form,"passengers",c);c=d.buildOptions();f.setInput(d.$form,"options",c);return d.isPackage()?(c=d.$form.hasClass("ess-passthrough-form")&&d.$form.hasClass("flexible-shopping-form")?a.getFlightsPackageUrl(d.$form):d.$form.hasClass("flexible-shopping-form")?b.getFlightsPackageUrl(d.$form):e.getFlightsPackageUrl(d.$form),f.returnValue(!0,c)):f.returnValue(!1)};c.prototype.buildLeg=function(a,b,c){return"from:"+a+",to:"+b+",departure:"+c+"TANYT"};c.prototype.getFlightType=function(){return d.$form.find(".gcw-sub-nav-option:checked").data("gcw-sub-nav-option-name")||"roundtrip"};c.prototype.buildPassengers=function(){var a="",b=d.buildChildren(),c=d.$form.find(".num-adults:visible").val(),e=d.$form.find('input[name\x3d"lap-or-seat"]:checked'),e=0<e.length&&"seat"===e.val().toLowerCase()?"N":"Y",a=a+("children:"+b)+(",adults:"+c)+",seniors:0";return a+=",infantinlap:"+e};c.prototype.buildChildren=function(){var a=d.$form.find(".children-data select:visible"),b=a.length+"[";a&&0<a.length?(a.each(function(c,d){b+=$(d).val();c!==a.length-1&&(b+=";")}),b+="]"):b="0";return b};c.prototype.buildOptions=function(){var a=d.$form.find(".gcw-cabin-class-select").val(),b=0<d.$form.find(".gcw-nonstop-checkbox:checked").length?"0":"",c=0<d.$form.find(".gcw-refundable-checkbox:checked").length?"Y":"",e=d.$form.find(".gcw-airline-select").val(),f="";a&&(f+="cabinclass:"+a+",");b&&(f+="maxhops:"+b+",");c&&(f+="nopenalty:"+c+",");e&&(f+="carrier:"+e);return f};c.prototype.isPackage=function(){var a=d.$form.find(".gcw-flights-add-hotel input"),b=d.$form.find(".gcw-flights-add-car input"),a=a.is(":visible")&&a.prop("checked"),b=b.is(":visible")&&b.prop("checked");return a||b};return c});define("GcwFlightsIndiaProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.idSuffix=c}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-sub-nav-option:checked").data("gcw-sub-nav-option-name")||"roundtrip",c=b.$form.find(".children-data select:visible"),d=b.splitChildren(c),c=d[0],d=d[1],e=b.$form.find(".num-adults:visible").val();f.setInput(b.$form,"rnd_one","O");f.setInput(b.$form,"dep_time","");"roundtrip"===a&&f.setInput(b.$form,"ret_time","");f.setInput(b.$form,"adults",e);f.setInput(b.$form,"childs",0===c?"":c);f.setInput(b.$form,"infants",0===d?"":d);f.setInput(b.$form,"affiliatePartnerId","0");return f.returnValue(!1)};e.prototype.splitChildren=function(a){var b=0,d=0;a&&0<a.length&&a.each(function(a,c){$(c).val()&&1>$(c).val()?d++:$(c).val()&&b++});return[b,d]};return e});
define("GcwHotelsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions","GcwPackagesProcessingFunctions","GcwPackagesFlexibleShoppingProcessingFunctions","GcwPackagesEssPassthroughProcessingFunctions"],function(g,f,e,b,a){function c(a,b){g(this,c);d=this;d.$form=a;d.idSuffix=b}var d;c.prototype.dispatch=function(){if(0<d.$form.find(".gcw-guests-select select:visible").length){var c=d.$form.find(".gcw-guests-select select option:selected").data("gcw-guests-values").split(",");$.each(c,function(a,b){if("adults"===b.split("-")[0]){var c=b.split("-")[1];d.$form.find("[name\x3dadults]").first().val(c)}"children"===b.split("-")[0]&&(c=b.split("-")[1],d.$form.find("[name\x3dchildren]").first().val(c))})}else{var c=d.calculateAdultOccupancyString(),g=f.calculateChildOccupancyString(d.$form);d.$form.find("[name\x3dadults]").first().val(c);d.$form.find("[name\x3dchildren]").first().val(g)}d.isTAAPPackageRate()&&d.$form.find("[name\x3dpackageRates]").first().val(!0);return d.isNinePlusRooms()?(c=d.getNinePlusRoomsUrl(),f.returnValue(!0,c)):d.isPackage()?(c=d.$form.hasClass("ess-passthrough-form")&&d.$form.hasClass("flexible-shopping-form")?a.getHotelsPackageUrl(d.$form,d.idSuffix):d.$form.hasClass("flexible-shopping-form")?b.getHotelsPackageUrl(d.$form,d.idSuffix):e.getHotelsPackageUrl(d.$form,d.idSuffix),f.returnValue(!0,c)):f.returnValue(!1)};c.prototype.calculateAdultOccupancyString=function(){var a=[];d.$form.find(".room-data:visible").each(function(){a.push($(this).find(".num-adults").val())});return a.toString()};c.prototype.isNinePlusRooms=function(){return"group"===d.$form.find(".gcw-rooms-field").children("select").val()};c.prototype.getNinePlusRoomsUrl=function(){var a=d.$form.data("gcw-group-booking-url"),b=d.$form.data("locale"),c=d.$form.data("siteid"),e=d.$form.find("#hotel-destination"+d.idSuffix).val(),f=d.$form.find("#hotel-checkin"+d.idSuffix).val(),f=d.convertFormat(f),g=d.$form.find("#hotel-checkout"+d.idSuffix).val(),g=d.convertFormat(g),r=d.isExtendedStay(f,g)?"\x26ES\x3d1":"";return a+"?ESite\x3d"+c+"\x26Loc\x3d"+b+"\x26City\x3d"+encodeURIComponent(e)+"\x26InDate\x3d"+f+"\x26OutDate\x3d"+g+r};c.prototype.convertFormat=function(a){if(!a||!a.length)return"";a=uitk.datePickerCalendarObj.getDateFromString(a,!0);if(!a)return"";var b=d.numberToTwoDigitString(a.getMonth()+1),c=d.numberToTwoDigitString(a.getDate());a=a.getFullYear();return b+"/"+c+"/"+a};c.prototype.numberToTwoDigitString=function(a){a=a.toString();return 1===a.length?"0"+a:a};c.prototype.isExtendedStay=function(a,b){if(!(a&&a.length&&b&&b.length))return!1;a=uitk.datePickerCalendarObj.getDateFromString(a,!0);b=uitk.datePickerCalendarObj.getDateFromString(b,!0);return 30<=(b-a)/1E3/60/60/24};c.prototype.isPackage=function(){var a=0<d.$form.find("#hotel-add-flight-checkbox"+d.idSuffix+":checked").length,b=0<d.$form.find("#hotel-add-car-checkbox"+d.idSuffix+":checked").length;return a||b?!0:!1};c.prototype.isTAAPPackageRate=function(){return 0<d.$form.find("#package-rates-checkbox-variant"+d.idSuffix+":checked").length};return c});
define("GcwPackagesProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.idSuffix=c}var b;e.prototype.dispatch=function(){var a=f.getLocationField(b.$form,"origin"),c=f.getLocationField(b.$form,"destination"),d=b.$form.find("#packages-type"+b.idSuffix),g=b.$form.find("#packages-fr-airport"+b.idSuffix),m=b.$form.find("#packages-dest-name"+b.idSuffix),q=b.$form.find("#packages-from-date"+b.idSuffix),k=b.$form.find("#packages-to-date"+b.idSuffix),n="\x26"+e.calculateAdultsForPackages(b.$form),p="\x26"+e.calculateChildrenForPackages(b.$form),n=n+p,r=b.$form.find("#packages-flex-from"+b.idSuffix),t=b.$form.find("#packages-flex-to"+b.idSuffix),u=b.$form.find("#package-checkin"+b.idSuffix+":visible"),h=b.$form.find("#package-checkout"+b.idSuffix+":visible"),v=b.$form.find("#packages-cabin-class"+b.idSuffix),x=b.$form.find("#package-advanced-preferred-class"+b.idSuffix),p=b.$form.find(".gcw-destination:visible"),y=f.getUTAFeature(p,"region_id"),D=f.getUTAFeature(p,"airport_code"),p=0;y&&D&&f.setInput(b.$form,"DestID",y+":"+D);n=n.split("\x26");y=""===d.val()?b.packageSelectedForUrl():d.val();""!==y&&d.val(y);g.val(a.val());m.val(c.val());q.val(b.$form.find(".gcw-start-date:visible").val());k.val(b.$form.find(".gcw-end-date:visible").val());0<u.length&&r.val(u.val());0<h.length&&t.val(h.val());""!==x.val()&&x.is(":visible")?v.val(x.val()):v.val("");for(p;p<n.length;p++)a=n[p].split("\x3d")[0],c=n[p].split("\x3d")[1],1<n[p].length&&f.setInput(b.$form,a,c);return f.returnValue(!1)};e.prototype.packageSelectedForUrl=function(){var a="";switch(b.$form.find(".sub-nav-select").find('input[type\x3d"radio"]:checked').data("gcw-sub-nav-option-name")){case "flight-hotel":a="2";break;case "flight-hotel-car":a="1";break;case "flight-car":a="5";break;case "hotel-car":a="3"}return a};e.getFlightsPackageUrl=function(a){var b=f.getLocationField(a,"origin"),d=f.getLocationField(a,"destination"),g,m,q,k,n,p,r;g="\x26"+e.getFlightsPackageType(a);d="\x26destName\x3d"+d.val();m="\x26FromDate\x3d"+a.find(".gcw-start-date:visible").val();q="\x26ToDate\x3d"+a.find(".gcw-end-date:visible").val();b="\x26frAirport\x3d"+b.val();k=(k=e.getFlightsAirlineOptionsUrl(a))?"\x26"+k:"";n="\x26FlexFromDate\x3d"+a.find(".gcw-start-date:visible").last().val();p="\x26FlexToDate\x3d"+a.find(".gcw-end-date:visible").last().val();r="\x26"+e.calculateAdultsForPackages(a);a=e.calculateChildrenForPackages(a);return"/pubspec/scripts/eap.asp?GOTO\x3dPACKAGEWIZ"+g+d+m+q+b+k+n+p+r+(a?"\x26"+a:"")};e.getHotelsPackageUrl=function(a,b){var c,f,g,q,k,n,p,r;c="\x26"+e.getHotelsPackageType(a,b);f="\x26destName\x3d"+a.find(".gcw-destination").val();g="\x26FromDate\x3d"+a.find(".gcw-start-date").val();q="\x26ToDate\x3d"+a.find(".gcw-end-date").val();k="\x26frAirport\x3d"+a.find(".gcw-flight-origin").val();n="\x26"+e.calculateAdultsForPackages(a);p=(p=e.calculateChildrenForPackages(a))?"\x26"+p:"";r=e.sortByPropertyType(a);return"/pubspec/scripts/eap.asp?GOTO\x3dPACKAGEWIZ"+c+f+g+q+k+n+p+r};e.getFlightsPackageType=function(a){var b=a.find(".gcw-flights-add-hotel input").is(":visible")&&a.find(".gcw-flights-add-hotel input").prop("checked");a=a.find(".gcw-flights-add-car input").is(":visible")&&a.find(".gcw-flights-add-car input").prop("checked");var d="PackageType\x3d";b&&a?d+=1:b&&!a?d+=2:!b&&a&&(d+=5);return d};e.getHotelsPackageType=function(a,b){var c=0<a.find("#hotel-add-flight-checkbox"+b+":checked").length,e=0<a.find("#hotel-add-car-checkbox"+b+":checked").length,f="PackageType\x3d";c&&e?f+=1:c?f+=2:e&&(f+=3);return f};e.getFlightsAirlineOptionsUrl=function(a){var b,d;d=[];if(a.find("#flight-advanced-options-fields-hp-flight").is(":visible")){(b=a.find("#flight-advanced-preferred-airline-hp-flight").val())&&d.push("Carrier\x3d"+b);b=a.find("#flight-advanced-preferred-class-hp-flight").val();switch(b){case "first":b="1";break;case "business":b="2";break;default:b=""}b&&d.push("Class\x3d"+b);(a=a.find("#advanced-flight-nonstop-hp-flight").is(":checked"))&&d.push("Direct\x3d1");return d.join("\x26")}};e.calculateAdultsForPackages=function(a){var b=a.find(".room-data:visible"),d=[];0<b.length?(d.push("NumRoom\x3d"+b.length),b.each(function(a,b){d.push("NumAdult"+(a+1)+"\x3d"+$(b).find(".num-adults").val())})):(d.push("NumRoom\x3d1"),d.push("NumAdult1\x3d"+a.find(".num-adults").val()));return d.join("\x26")};e.calculateChildrenForPackages=function(a){var b=[],d=[],e=[],f=a.find(".room-data:visible");0<f.length?f.each(function(a,c){b.push("NumChild"+(a+1)+"\x3d"+$(c).find(".num-children").val());(0!==$(c).find(".gcw-child-field select:visible").length?$(c).find(".gcw-child-field select:visible"):$(c).find(".gcw-flights-child-field select:visible")).each(function(b,c){var e=$(c).val()?$(c).val():"0";d.push("Rm"+(a+1)+"Child"+(b+1)+"Age\x3d"+e)})}):(b.push("NumChild1\x3d"+a.find(".num-children").val()),a.find(".gcw-child-field select:visible").each(function(a,b){var c=$(b).val()?$(b).val():"0";d.push("Rm1Child"+(a+1)+"Age\x3d"+c)}));e=e.concat(b,d);if(b.length&&d.length)return a=a.find(".gcw-young-child:checked"),a=0<a.length&&"seat"===a.val().toLowerCase()?"1":"0",e.push("InfantInSeat\x3d"+a),e.join("\x26")};e.sortByPropertyType=function(a){a=a.find("input[name\x3dsort]:checked");if(1!==a.length)return"";a=a.val();return"\x26sortBy\x3d"+("hotel"===a?37:"vacationRental"===a?34:0)};return e});
define("GcwPackagesFlexibleShoppingProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.idSuffix=c}var b;e.prototype.dispatch=function(){var a=b.$form.find("#packages-type"+b.idSuffix),c=b.$form.find("#packages-fr-airport"+b.idSuffix),d=b.$form.find("#packages-dest-name"+b.idSuffix),g=b.$form.find("#packages-from-date"+b.idSuffix),m=b.$form.find("#packages-to-date"+b.idSuffix),q="\x26"+e.calculateAdultsForPackages(b.$form),k="\x26"+e.calculateChildrenForPackages(b.$form),q=q+k,n=b.$form.find("#packages-flex-from"+b.idSuffix),p=b.$form.find("#packages-flex-to"+b.idSuffix),r=b.$form.find("#package-checkin"+b.idSuffix+":visible"),t=b.$form.find("#package-checkout"+b.idSuffix+":visible"),u=b.$form.find("#packages-cabin-class"+b.idSuffix),h=b.$form.find("#package-advanced-preferred-class"+b.idSuffix),k=0,q=q.split("\x26"),v=""===a.val()?b.packageSelectedForUrl():a.val();""!==v&&a.val(v);c.val(b.$form.find(".gcw-origin:visible").val());d.val(b.$form.find(".gcw-destination:visible").val());g.val(b.$form.find(".gcw-start-date:visible").val());m.val(b.$form.find(".gcw-end-date:visible").val());0<r.length&&n.val(r.val());0<t.length&&p.val(t.val());""!==h.val()&&h.is(":visible")?u.val(h.val()):u.val("");for(k;k<q.length;k++)a=q[k].split("\x3d")[0],c=q[k].split("\x3d")[1],1<q[k].length&&f.setInput(b.$form,a,c);return f.returnValue(!0,this.getPackageUrl(b.$form,b.idSuffix))};e.prototype.packageSelectedForUrl=function(){var a="";switch(b.$form.find(".sub-nav-select").find('input[type\x3d"radio"]:checked').data("gcw-sub-nav-option-name")){case "flight-hotel":a="2";break;case "flight-hotel-car":a="1";break;case "flight-car":a="5";break;case "hotel-car":a="3"}return a};e.prototype.getPackageUrl=function(a,b){var c,g,m,q,k,n,p,r,t,u,h,v,x;g=a.find(".gcw-origin:visible");k=a.find(".gcw-destination:visible");c=e.getPackageType(a);m=g.val()?"\x26origin\x3d"+g.val():"";q=f.getUTAFeature(g,"region_id");g=f.getUTAFeature(g,"airport_code");q=q?"\x26originId\x3d"+q:"";g=g?"\x26ftla\x3d"+g:"";u=(u=e.getPackagesAirlineOptionsUrl(a,b))?"\x26"+u:"";n="\x26destination\x3d"+k.val();p=f.getUTAFeature(k,"region_id");k=f.getUTAFeature(k,"airport_code");p=p?"\x26destinationId\x3d"+p:"";k=k?"\x26ttla\x3d"+k:"";r="\x26fromDate\x3d"+a.find(".gcw-start-date:visible").val();t="\x26toDate\x3d"+a.find(".gcw-end-date:visible").val();h=(h=-1<c.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+h:"";v="\x26"+e.calculateAdultsForPackages(a);x=e.calculateChildrenForPackages(a);return"/flexibleshopping?"+c+m+q+g+u+n+p+k+r+t+h+v+(x?"\x26"+x:"")};e.getFlightsPackageUrl=function(a){var b,d,g,m,q,k,n,p,r,t,u,h;m=a.find(".gcw-origin:visible");d=a.find(".gcw-destination:visible");b=e.getFlightsPackageType(a);n="\x26destination\x3d"+a.find(".gcw-destination:visible").val();p=f.getUTAFeature(d,"region_id");r=f.getUTAFeature(d,"airport_code");p=p?"\x26destinationId\x3d"+p:"";r=r?"\x26ttla\x3d"+r:"";d="\x26fromDate\x3d"+a.find(".gcw-start-date:visible").val();g="\x26toDate\x3d"+a.find(".gcw-end-date:visible").val();q="\x26origin\x3d"+a.find(".gcw-origin:visible").val();k=f.getUTAFeature(m,"region_id");m=f.getUTAFeature(m,"airport_code");k=k?"\x26originId\x3d"+k:"";m=m?"\x26ftla\x3d"+m:"";t=(t=e.getFlightsAirlineOptionsUrl(a))?"\x26"+t:"";u=(u=-1<b.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+u:"";h="\x26"+e.calculateAdultsForPackages(a);a=e.calculateChildrenForPackages(a);return"/flexibleshopping?"+b+n+p+r+d+g+q+k+m+t+u+h+(a?"\x26"+a:"")};e.getHotelsPackageUrl=function(a,b){var c,g,m,q,k,n,p,r,t,u,h,v;p=a.find(".gcw-flight-origin:visible");g=a.find(".gcw-destination:visible");c="?"+e.getHotelsPackageType(a,b);m="\x26destination\x3d"+a.find(".gcw-destination").val();q=f.getUTAFeature(g,"region_id");g=f.getUTAFeature(g,"airport_code");q=q?"\x26destinationId\x3d"+q:"";g=g?"\x26ttla\x3d"+g:"";k="\x26fromDate\x3d"+a.find(".gcw-start-date").val();n="\x26toDate\x3d"+a.find(".gcw-end-date").val();r=p.val()?"\x26origin\x3d"+p.val():"";t=f.getUTAFeature(p,"region_id");p=f.getUTAFeature(p,"airport_code");t=t?"\x26originId\x3d"+t:"";p=p?"\x26ftla\x3d"+p:"";u="\x26"+e.calculateAdultsForPackages(a);h=(h=e.calculateChildrenForPackages(a))?"\x26"+h:"";v=e.sortByPropertyType(a);return"/flexibleshopping"+c+m+q+g+k+n+r+t+p+u+h+v};e.getPartialStayUrl=function(a){var b=[];a.find(".gcw-partial-start-date").is(":visible")&&(b.push("isPartialStay\x3d1"),b.push("checkInDate\x3d"+a.find(".gcw-partial-start-date:visible").val()),b.push("checkOutDate\x3d"+a.find(".gcw-partial-end-date:visible").val()));return b.join("\x26")};e.getPackageType=function(a,c){var d="packageType\x3d";switch(a.find("#packages-type"+b.idSuffix).val()){case "1":d+="fhc";break;case "2":d+="fh";break;case "3":d+="hc";break;case "5":d+="fc";break;default:d+=""}return d};e.getFlightsPackageType=function(a){var b=a.find(".gcw-flights-add-hotel input").is(":visible")&&a.find(".gcw-flights-add-hotel input").prop("checked");a=a.find(".gcw-flights-add-car input").is(":visible")&&a.find(".gcw-flights-add-car input").prop("checked");var d="packageType\x3d";b&&a?d+="fhc":b&&!a?d+="fh":!b&&a&&(d+="fc");return d};e.getHotelsPackageType=function(a,b){var c=0<a.find("#hotel-add-flight-checkbox"+b+":checked").length,e=0<a.find("#hotel-add-car-checkbox"+b+":checked").length,f="packageType\x3d";c&&e?f+="fhc":c?f+="fh":e&&(f+="hc");return f};e.getPackagesAirlineOptionsUrl=function(a,b){var c,e;e=[];if(a.find("#package-advanced-options-fields"+b).is(":visible"))return(c=a.find("#package-advanced-preferred-class"+b).val())&&e.push("cabinClass\x3d"+c),e.join("\x26")};e.getFlightsAirlineOptionsUrl=function(a){var b,d;d=[];if(a.find("#flight-advanced-options-fields-hp-flight").is(":visible")){(b=a.find("#flight-advanced-preferred-airline-hp-flight").val())&&d.push("flightCarrier\x3d"+b);b=a.find("#flight-advanced-preferred-class-hp-flight").val();switch(b){case "first":b="f";break;case "business":b="b";break;case "premium":b="p";break;default:b=""}b&&d.push("cabinClass\x3d"+b);(a=a.find("#advanced-flight-nonstop-hp-flight").is(":checked"))&&d.push("isDirectFlight\x3d1");return d.join("\x26")}};e.calculateAdultsForPackages=function(a){var b=a.find(".room-data:visible"),d=[];0<b.length?(d.push("numberOfRooms\x3d"+b.length),b.each(function(a,b){d.push("adultsPerRoom["+(a+1)+"]\x3d"+$(b).find(".num-adults").val())})):(d.push("numberOfRooms\x3d1"),d.push("adultsPerRoom[1]\x3d"+a.find(".num-adults").val()));return d.join("\x26")};e.calculateChildrenForPackages=function(a){var b=[],d=[],e=[],f=a.find(".room-data:visible");0<f.length?f.each(function(a,c){b.push("childrenPerRoom["+(a+1)+"]\x3d"+$(c).find(".num-children").val());(0!==$(c).find(".gcw-child-field select:visible").length?$(c).find(".gcw-child-field select:visible"):$(c).find(".gcw-flights-child-field select:visible")).each(function(b,c){var e=$(c).val()?$(c).val():"0";d.push("childAges["+(a+1)+"]["+(b+1)+"]\x3d"+e)})}):(b.push("childrenPerRoom[1]\x3d"+a.find(".num-children").val()),a.find(".gcw-child-field select:visible").each(function(a,b){var c=$(b).val()?$(b).val():"0";d.push("childAges[1]["+(a+1)+"]\x3d"+c)}));e=e.concat(b,d);if(b.length&&d.length)return a=a.find(".gcw-young-child:checked"),a=0<a.length&&"seat"===a.val().toLowerCase()?"1":"0",e.push("infantsInSeats\x3d"+a),e.join("\x26")};e.sortByPropertyType=function(a){a=a.find("input[name\x3dsort]:checked");if(1!==a.length)return"";a=a.val();return"\x26sortOrder\x3d"+("hotel"===a?37:"vacationRental"===a?34:0)};return e});
define("GcwRailsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.idSuffix=c}var b;e.prototype.dispatch=function(){var a=b.$form.find(".num-adults:visible").val(),a=b.buildValues(a,"adults"),c=b.buildAges(".children-data select:visible"),d=b.buildAges(".youth-data select:visible"),e=b.buildAges(".seniors-data select:visible"),a=b.buildRailsPassengers(a,c,d,e),c=b.buildRailcard();f.setInput(b.$form,"age_pax",a);f.setInput(b.$form,"rail_card",c);return f.returnValue(!1)};e.prototype.buildAges=function(a){a=b.$form.find(a);var c=[];a&&0<a.length&&a.each(function(a,b){c.push($(b).val().toString())});return c};e.prototype.buildValues=function(a,b){var c=0,e=[];switch(b){case "adults":for(c;c<a;c++)e.push("40");break;case "seniors":for(c;c<a;c++)e.push("60")}return e};e.prototype.buildRailsPassengers=function(a,b,d,e){a=a.concat(b).concat(d).concat(e);return a=a.toString()};e.prototype.buildRailcard=function(){var a=b.$form.find(".railcards-list-fieldset:visible"),c,d,e=[];a&&0<a.length&&a.each(function(a,b){var f=0;c=$(b).find(".gcw-railcard-select").val();d=$(b).find(".gcw-railcard-count-select").val();if(""!==c)for(d=parseInt(d),f;f<d;f++)e.push(c)});return e.toString()};return e});define("GcwThreeppProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.idSuffix=c}var b;e.prototype.dispatch=function(){var a=b.$form.find("[name\x3dorigin]"),c=b.$form.find("[name\x3doriginCityName]"),d=b.$form.find("[name\x3ddestination]"),e=b.$form.find("[name\x3ddestinationCityName]"),g=b.$form.find("[name\x3dcountry]"),q=b.$form.find("[name\x3dcountryCode]"),k=b.$form.find("[name\x3dexpGroupCode]"),n=b.$form.find(".gcw-hidden-input-children-age"),p=b.$form.find(".gcw-threepp-hotels-select"),r=b.getThreeppOriginValues(),t=b.getThreeppDestinationValues(),u=f.calculateChildOccupancyString(b.$form),h=[],v=[];a&&a.length&&c&&c.length&&(f.setInput(b.$form,"origin",r.origin),f.setInput(b.$form,"originCityName",r.originCityName));d&&d.length&&e&&e.length&&g&&g.length&&q&&q.length&&(f.setInput(b.$form,"destination",t.destination),f.setInput(b.$form,"destinationCityName",t.destinationCityName),f.setInput(b.$form,"country",t.country),f.setInput(b.$form,"countryCode",t.countryCode));k&&k.length&&f.setInput(b.$form,"expGroupCode",t.expGroupCode);u&&(h=u.split(","),$.each(h,function(a,b){""!==b.split("_")[1]?v.push(b.split("_")[1]):v.push("-1")}));n&&n.length&&n.each(function(a,b){a<v.length?$(b).val(v[a]):$(b).val("-1")});p&&p.length&&f.setInput(b.$form,"hotelSelected",p.val());return f.returnValue(!1)};e.prototype.getThreeppOriginValues=function(){var a=b.$form.find(".gcw-threepp-origin-input"),c,d,e="",f="";a&&a.length&&(c=a.val(),d=c.split(":"),c&&(e=d[0],f=d[1]||a.find("option:selected").data("sort")));return{origin:e,originCityName:f}};e.prototype.getThreeppDestinationValues=function(){var a=b.$form.find(".gcw-threepp-destination-input"),c,d,e="",f="",g="",k="",n="";a&&a.length&&(c=a.val(),d=c.split(":"),c&&(e=d[0],f=d[1]||a.find("option:selected").data("label"),g=d[2]||a.find("option:selected").attr("country"),void 0!==d[3]&&(k=d[3]),void 0!==d[4]&&(n=d[4])));return{destination:e,destinationCityName:f,country:g,countryCode:k,expGroupCode:n}};return e});define("GcwUtilsProcessingFunctions",["classCheck"],function(g){function f(){g(this,f)}f.returnValue=function(e,b){return{redirect:e,url:(b||"")+"\x26_xpid\x3d11905|1"}};f.calculateChildOccupancyString=function(e){var b=[];e.find(".room-data:visible").each(function(a){$(this).find(".gcw-child-field select:visible").each(function(c){b.push(a+1+"_"+$(this).val())})});return b.toString()};f.getGroundTransfersSearchURL=function(e,b,a){var c,d,f,g,q,k,n,p,r,t;r=p=n=0;k="/ground-transfers/search?";a||(k+="direction\x3dH2A");a?(c=e.find("[name\x3dgtOriginAirport]").val(),window.lx&&window.lx.cache&&window.lx.cache.airportSuggestionsMap&&$.each(window.lx.cache.airportSuggestionsMap,function(a){this.airportFullName===c&&(d=a)}),n=e.find("[name\x3dgtDestinationHotel]"),a=n.val(),window.lx&&window.lx.cache&&window.lx.cache.hotelSuggestionsMap&&(f=window.lx.cache.hotelSuggestionsMap[a]&&window.lx.cache.hotelSuggestionsMap[a].hotelId),t=n.data("rid"),g=e.find("[name\x3dgtOriginFlightArrivalDate]").val(),q=e.find("[name\x3dgtOriginFlightPickUpTime]  option:selected").text(),n=e.find("[name\x3dgtOriginFlightAdultsCount]").val(),p=e.find("[name\x3dgtOriginFlightChildrenCount]").val(),r=e.find("[name\x3dgtOriginFlightInfantsCount]").val(),$("#gt-roundtrip-flight-departure-module"+b).hasClass("gcw-disabled")||(b=e.find("[id\x3dgt-hotel-departure-date"+b+"]").val(),e=e.find("[name\x3dgtAirportDropOffTime]  option:selected").text(),k+="\x26roundTrip\x3dtrue",b&&(k+="\x26dropOffDate\x3d"+b),e&&(k+="\x26dropOffTime\x3d"+e))):(n=e.find("[name\x3dgtOriginHotel]"),a=n.val(),window.lx&&window.lx.cache&&window.lx.cache.hotelSuggestionsMap&&(f=window.lx.cache.hotelSuggestionsMap[a]&&window.lx.cache.hotelSuggestionsMap[a].hotelId),t=n.data("rid"),c=e.find("[name\x3dgtDestinationAirport]").val(),window.lx&&window.lx.cache&&window.lx.cache.airportSuggestionsMap&&$.each(window.lx.cache.airportSuggestionsMap,function(a){this.airportFullName===c&&(d=a)}),g=e.find("[name\x3dgtOriginHotelPickUpDate]").val(),q=e.find("[name\x3dgtOriginHotelPickUpTime]  option:selected").text(),n=e.find("[name\x3dgtOriginHotelAdultsCount]").val(),p=e.find("[name\x3dgtOriginHotelChildrenCount]").val(),r=e.find("[name\x3dgtOriginHotelInfantsCount]").val());d&&(k+="\x26airportCode\x3d"+d);k=k+("\x26location\x3d"+c)+("\x26hotelName\x3d"+a);f&&(k+="\x26hotelId\x3d"+f);g&&(k+="\x26pickUpDate\x3d"+g);q&&(k+="\x26pickUpTime\x3d"+q);n&&(k+="\x26adults\x3d"+n);p&&(k+="\x26children\x3d"+p);r&&(k+="\x26infants\x3d"+r);t&&(k+="\x26regionId\x3d"+t);return k};f.setInput=function(e,b,a){e.find("[name\x3d'"+b+"']").val(a)};f.replaceFormAction=function(e,b,a){var c=e.attr("action"),d=e.data("gcw-original-action"),f=e.data("gcw-new-action");b&&b!==a?f&&f!==c&&e.attr("action",f):d&&d!==c&&e.attr("action",d)};f.setUSDateInHiddenInput=function(e,b,a){b=e.find("."+b);var c=e.find("[name\x3d"+a+"]");b&&c&&b.length&&c.length&&""!==b.val()&&(b=f.convertDateToUSFormat(b.val()),f.setInput(e,a,b))};f.convertDateToUSFormat=function(e){return e.match(/^(\d{2})\/(\d{2})\/(\d{4})$/)?(e=e.split("/"),e[1]+"/"+e[0]+"/"+e[2]):e};f.getUTAFeature=function(e,b){var a=e.closest("div").parent().find("input[type\x3dhidden]");return 0<a.length?a.filter('input[id*\x3d"'+b+'"]').val():void 0};f.getUTAFeatures=function(e){var b={};e.closest("div").parent().find("input[type\x3dhidden]").each(function(){""!==$(this).val()&&(b[$(this).data("gcw-storeable-name").slice(4)]=$(this).val())});return 0<Object.keys(b).length?b:void 0};f.getWindowLocation=function(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")};f.getLocationField=function(e,b){var a={origin:{uta:"gcw-origin",dropdown:"origin"},destination:{uta:"gcw-destination",dropdown:"destination"}},c=$(),d=f.getLocationSearchType(e);a.hasOwnProperty(b)&&d&&(c=e.find("."+a[b][d]+":visible"));return c};f.getLocationSearchType=function(e){return e.data("location-search-type")||"uta"};return f});
define("GcwPackagesEssPassthroughProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a,c){g(this,e);b=this;b.$form=a;b.idSuffix=c}var b;e.prototype.dispatch=function(){var a=b.$form.find("#packages-type"+b.idSuffix),c=b.$form.find("#packages-fr-airport"+b.idSuffix),d=b.$form.find("#packages-dest-name"+b.idSuffix),g=b.$form.find("#packages-from-date"+b.idSuffix),m=b.$form.find("#packages-to-date"+b.idSuffix),q="\x26"+e.calculateAdultsForPackages(b.$form),k="\x26"+e.calculateChildrenForPackages(b.$form),q=q+k,n=b.$form.find("#packages-flex-from"+b.idSuffix),p=b.$form.find("#packages-flex-to"+b.idSuffix),r=b.$form.find("#package-checkin"+b.idSuffix+":visible"),t=b.$form.find("#package-checkout"+b.idSuffix+":visible"),u=b.$form.find("#packages-cabin-class"+b.idSuffix),h=b.$form.find("#package-advanced-preferred-class"+b.idSuffix),k=0,q=q.split("\x26"),v=""===a.val()?b.packageSelectedForUrl():a.val();""!==v&&a.val(v);c.val(b.$form.find(".gcw-origin:visible").val());d.val(b.$form.find(".gcw-destination:visible").val());g.val(b.$form.find(".gcw-start-date:visible").val());m.val(b.$form.find(".gcw-end-date:visible").val());0<r.length&&n.val(r.val());0<t.length&&p.val(t.val());""!==h.val()&&h.is(":visible")?u.val(h.val()):u.val("");for(k;k<q.length;k++)a=q[k].split("\x3d")[0],c=q[k].split("\x3d")[1],1<q[k].length&&f.setInput(b.$form,a,c);return f.returnValue(!0,this.getPackageUrl(b.$form,b.idSuffix))};e.prototype.packageSelectedForUrl=function(){var a="";switch(b.$form.find(".sub-nav-select").find('input[type\x3d"radio"]:checked').data("gcw-sub-nav-option-name")){case "flight-hotel":a="2";break;case "flight-hotel-car":a="1";break;case "flight-car":a="5";break;case "hotel-car":a="3"}return a};e.prototype.getPackageUrl=function(a,b){var c,g,m,q,k,n,p,r,t,u,h,v;g=a.find(".gcw-origin:visible");q=a.find(".gcw-destination:visible");c=e.getPackageType(a);m=g.val()?"\x26origin\x3d"+g.val():"";r=(r=e.getPackagesAirlineOptionsUrl(a,b))?"\x26"+r:"";k="\x26destination\x3d"+q.val();n="\x26fromDate\x3d"+a.find(".gcw-start-date:visible").val();p="\x26toDate\x3d"+a.find(".gcw-end-date:visible").val();t=(t=-1<c.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+t:"";u="\x26"+e.calculateAdultsForPackages(a);h=(h=e.calculateChildrenForPackages(a))?"\x26"+h:"";g=f.getUTAFeatures(g);q=f.getUTAFeatures(q);v="\x26essJson\x3d";g&&q?v+=JSON.stringify($.extend(g,q)):g||q?(g=g?JSON.stringify(g):"",q=q?JSON.stringify(q):"",v=v+g+q):v="";return"/flexibleshopping?"+c+m+r+k+n+p+t+u+h+v};e.getFlightsPackageUrl=function(a){var b,d,g,m,q,k,n,p,r,t,u;m=a.find(".gcw-origin:visible");k=a.find(".gcw-destination:visible");b=e.getFlightsPackageType(a);n="\x26destination\x3d"+a.find(".gcw-destination:visible").val();d="\x26fromDate\x3d"+a.find(".gcw-start-date:visible").val();g="\x26toDate\x3d"+a.find(".gcw-end-date:visible").val();q="\x26origin\x3d"+a.find(".gcw-origin:visible").val();p=(p=e.getFlightsAirlineOptionsUrl(a))?"\x26"+p:"";r=(r=-1<b.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+r:"";t="\x26"+e.calculateAdultsForPackages(a);a=(a=e.calculateChildrenForPackages(a))?"\x26"+a:"";m=f.getUTAFeatures(m);k=f.getUTAFeatures(k);u="\x26essJson\x3d";m&&k?u+=JSON.stringify($.extend(m,k)):m||k?(m=m?JSON.stringify(m):"",k=k?JSON.stringify(k):"",u=u+m+k):u="";return"/flexibleshopping?"+b+n+d+g+q+p+r+t+a+u};e.getHotelsPackageUrl=function(a,b){var c,g,m,q,k,n,p,r,t,u,h;n=a.find(".gcw-flight-origin:visible");g=a.find(".gcw-destination:visible");c="?"+e.getHotelsPackageType(a,b);m="\x26destination\x3d"+a.find(".gcw-destination").val();q="\x26fromDate\x3d"+a.find(".gcw-start-date").val();k="\x26toDate\x3d"+a.find(".gcw-end-date").val();p=n.val()?"\x26origin\x3d"+n.val():"";r="\x26"+e.calculateAdultsForPackages(a);t=(t=e.calculateChildrenForPackages(a))?"\x26"+t:"";u=e.sortByPropertyType(a);n=f.getUTAFeatures(n);g=f.getUTAFeatures(g);h="\x26essJson\x3d";n&&g?h+=JSON.stringify($.extend(n,g)):n||g?(n=n?JSON.stringify(n):"",g=g?JSON.stringify(g):"",h=h+n+g):h="";return"/flexibleshopping"+c+m+q+k+p+r+t+u+h};e.getPartialStayUrl=function(a){var b=[];a.find(".gcw-partial-start-date").is(":visible")&&(b.push("isPartialStay\x3d1"),b.push("checkInDate\x3d"+a.find(".gcw-partial-start-date:visible").val()),b.push("checkOutDate\x3d"+a.find(".gcw-partial-end-date:visible").val()));return b.join("\x26")};e.getPackageType=function(a,c){var d="packageType\x3d";switch(a.find("#packages-type"+b.idSuffix).val()){case "1":d+="fhc";break;case "2":d+="fh";break;case "3":d+="hc";break;case "5":d+="fc";break;default:d+=""}return d};e.getFlightsPackageType=function(a){var b=a.find(".gcw-flights-add-hotel input").is(":visible")&&a.find(".gcw-flights-add-hotel input").prop("checked");a=a.find(".gcw-flights-add-car input").is(":visible")&&a.find(".gcw-flights-add-car input").prop("checked");var d="packageType\x3d";b&&a?d+="fhc":b&&!a?d+="fh":!b&&a&&(d+="fc");return d};e.getHotelsPackageType=function(a,b){var c=0<a.find("#hotel-add-flight-checkbox"+b+":checked").length,e=0<a.find("#hotel-add-car-checkbox"+b+":checked").length,f="packageType\x3d";c&&e?f+="fhc":c?f+="fh":e&&(f+="hc");return f};e.getPackagesAirlineOptionsUrl=function(a,b){var c,e;e=[];if(a.find("#package-advanced-options-fields"+b).is(":visible"))return(c=a.find("#package-advanced-preferred-class"+b).val())&&e.push("cabinClass\x3d"+c),e.join("\x26")};e.getFlightsAirlineOptionsUrl=function(a){var b,d;d=[];if(a.find("#flight-advanced-options-fields-hp-flight").is(":visible")){(b=a.find("#flight-advanced-preferred-airline-hp-flight").val())&&d.push("flightCarrier\x3d"+b);b=a.find("#flight-advanced-preferred-class-hp-flight").val();switch(b){case "first":b="f";break;case "business":b="b";break;case "premium":b="p";break;default:b=""}b&&d.push("cabinClass\x3d"+b);(a=a.find("#advanced-flight-nonstop-hp-flight").is(":checked"))&&d.push("isDirectFlight\x3d1");return d.join("\x26")}};e.calculateAdultsForPackages=function(a){var b=a.find(".room-data:visible"),d=[];0<b.length?(d.push("numberOfRooms\x3d"+b.length),b.each(function(a,b){d.push("adultsPerRoom["+(a+1)+"]\x3d"+$(b).find(".num-adults").val())})):(d.push("numberOfRooms\x3d1"),d.push("adultsPerRoom[1]\x3d"+a.find(".num-adults").val()));return d.join("\x26")};e.calculateChildrenForPackages=function(a){var b=[],d=[],e=[],f=a.find(".room-data:visible");0<f.length?f.each(function(a,c){b.push("childrenPerRoom["+(a+1)+"]\x3d"+$(c).find(".num-children").val());(0!==$(c).find(".gcw-child-field select:visible").length?$(c).find(".gcw-child-field select:visible"):$(c).find(".gcw-flights-child-field select:visible")).each(function(b,c){var e=$(c).val()?$(c).val():"0";d.push("childAges["+(a+1)+"]["+(b+1)+"]\x3d"+e)})}):(b.push("childrenPerRoom[1]\x3d"+a.find(".num-children").val()),a.find(".gcw-child-field select:visible").each(function(a,b){var c=$(b).val()?$(b).val():"0";d.push("childAges[1]["+(a+1)+"]\x3d"+c)}));e=e.concat(b,d);if(b.length&&d.length)return a=a.find(".gcw-young-child:checked"),a=0<a.length&&"seat"===a.val().toLowerCase()?"1":"0",e.push("infantsInSeats\x3d"+a),e.join("\x26")};e.sortByPropertyType=function(a){a=a.find("input[name\x3dsort]:checked");if(1!==a.length)return"";a=a.val();return"\x26sortOrder\x3d"+("hotel"===a?37:"vacationRental"===a?34:0)};return e});define("gcwStorableLegacyKeys",[],function(){return{legacyCurrentKeysMap:{"gcw-rails-typeahead-orig":"gcw-rails-origin-station_code","gcw-rails-typeahead-dest":"gcw-rails-destination-station_code"},getLegacyCurrentKeysMap:function(){return this.legacyCurrentKeysMap},replace:function(g){var f=!1;if(null!==g&&"object"===typeof g){var e=this.getLegacyCurrentKeysMap(),b;for(b in e)g.hasOwnProperty(b)&&(f=!0,g[e[b]]=g[b],delete g[b])}return f?g:!1}}});
require("uitk",function(g){$(".tab").on("click",function(f){var e=$(f.target).closest("button"),b=e.data("gcw-tab-link");b&&(f.stopPropagation(),e.data("gcw-tab-link-new-window")?window.open(b,b):window.location=b)});$("button[data-gcw-add-disabled-mobile-classes]").each(function(){var f=$(this),e=f.data("gcw-add-disabled-mobile-classes");if(e)for(var e=e.split(","),b=0;b<e.length;b++)""!==e[b]&&f.parent().addClass(e[b])});$(".wizard-tabs .tab").css("display","list-item")});(function(){var g,f,e,b,a,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);d.prototype=b.prototype;a.prototype=new d;a.__super__=b.prototype;return a},l=[].slice;g=function(a){function b(a){this.message=a}d(b,a);b.prototype.name="ValueError";return b}(Error);f=function(a){null==a&&(a={});return function(){var c,d,e,f,m;m=arguments[0];c=2<=arguments.length?l.call(arguments,1):[];e=0;d=f=!1;return m.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,function(m,l,h,k){var n,q;if(l)return l;if(h.length){if(f)throw new g("cannot switch from implicit to explicit numbering");d=!0;m=null!=(n=b(c,h))?n:""}else{if(d)throw new g("cannot switch from explicit to implicit numbering");f=!0;m=null!=(q=c[e++])?q:""}return Object.prototype.hasOwnProperty.call(a,k)?a[k](m):m})}};b=function(b,c){var d;for(/^(\d+)([.]|$)/.test(c)||(c="0."+c);d=/(.+?)[.](.+)/.exec(c);)b=a(b,d[1]),c=d[2];return a(b,c)};a=function(a,b){var c;c=a[b];return"function"===typeof c?c.call(a):c};e=f({});e.create=f;e.extend=function(a,b){var c;c=f(b);a.format=function(){return c.apply(null,[this].concat(l.call(arguments)))}};window.format=e}).call(this);define("classCheck",function(){return function(g,f){if(!(g instanceof f))throw new TypeError("Cannot call a class as a function");}});
var XDate=function(g,f,e,b){function a(){var b=this instanceof a?this:new a,e=arguments,f=e.length,h;"boolean"==typeof e[f-1]&&(h=e[--f],e=C(e,0,f));if(f)if(1==f)if(f=e[0],f instanceof g||"number"==typeof f)b[0]=new g(+f);else if(f instanceof a){var e=b,m=new g(+f[0]);c(f)&&(m.toString=J);e[0]=m}else{if("string"==typeof f){b[0]=new g(0);a:{for(var e=f,f=h||!1,m=a.parsers,l=0,k;l<m.length;l++)if(k=m[l](e,f,b)){b=k;break a}b[0]=new g(e)}}}else b[0]=new g(F.apply(g,e)),h||(b[0]=G(b[0]));else b[0]=new g;"boolean"==typeof h&&d(b,h);return b}function c(a){return a[0].toString===J}function d(a,b,d){b?c(a)||(d&&(a[0]=new g(F(a[0].getFullYear(),a[0].getMonth(),a[0].getDate(),a[0].getHours(),a[0].getMinutes(),a[0].getSeconds(),a[0].getMilliseconds()))),a[0].toString=J):c(a)&&(a[0]=d?G(a[0]):new g(+a[0]));return a}function l(a,b,c,d,e){var f=z(y,a[0],e);a=z(D,a[0],e);e=!1;2==d.length&&"boolean"==typeof d[1]&&(e=d[1],d=[c]);c=1==b?(c%12+12)%12:f(1);a(b,d);e&&f(1)!=c&&(a(1,[f(1)-1]),a(2,[B(f(0),f(1))]))}function m(a,b,c,d){c=Number(c);var e=f.floor(c);a["set"+H[b]](a["get"+H[b]]()+e,d||!1);e!=c&&6>b&&m(a,b+1,(c-e)*L[b],d)}function q(b,c,d){b=b.clone().setUTCMode(!0,!0);c=a(c).setUTCMode(!0,!0);var e=0;if(0==d||1==d){for(var g=6;g>=d;g--)e/=L[g],e+=y(c,!1,g)-y(b,!1,g);1==d&&(e+=12*(c.getFullYear()-b.getFullYear()))}else 2==d?(d=b.toDate().setUTCHours(0,0,0,0),e=c.toDate().setUTCHours(0,0,0,0),e=f.round((e-d)/864E5)+(c-e-(b-d))/864E5):e=(c-b)/[36E5,6E4,1E3,1][d-3];return e}function k(a){var b=a(0),c=a(1),d=a(2);a=new g(F(b,c,d));b=p(n(b,c,d));return f.floor(f.round((a-b)/864E5)/7)+1}function n(a,b,c){b=new g(F(a,b,c));return b<p(a)?a-1:b>=p(a+1)?a+1:a}function p(a){a=new g(F(a,0,4));a.setUTCDate(a.getUTCDate()-(a.getUTCDay()+6)%7);return a}function r(a,c,d,e){var f=z(y,a,e),g=z(D,a,e);d===b&&(d=n(f(0),f(1),f(2)));d=p(d);e||(d=G(d));a.setTime(+d);g(2,[f(2)+7*(c-1)])}function t(b,c,d,e,f){var g=a.locales,h=g[a.defaultLocale]||{},m=z(y,b,f);d=("string"==typeof d?g[d]:d)||{};return u(b,c,function(a){if(e)for(var b=(7==a?2:a)-1;0<=b;b--)e.push(m(b));return m(a)},function(a){return d[a]||h[a]},f)}function u(a,c,d,e,f){for(var g,m,l="";g=c.match(N);){l+=c.substr(0,g.index);if(g[1]){m=l;for(var l=a,k=g[1],n=d,p=e,q=f,r=k.length,I,t="";0<r;)I=h(l,k.substr(0,r),n,p,q),I!==b?(t+=I,k=k.substr(r),r=k.length):r--;l=m+(t+k)}else g[3]?(m=u(a,g[4],d,e,f),parseInt(m.replace(/\D/g,""),10)&&(l+=m)):l+=g[7]||"'";c=c.substr(g.index+g[0].length)}return l+c}function h(b,c,d,e,g){var h=a.formatters[c];if("string"==typeof h)return u(b,h,d,e,g);if("function"==typeof h)return h(b,g||!1,e);switch(c){case "fff":return A(d(6),3);case "s":return d(5);case "ss":return A(d(5));case "m":return d(4);case "mm":return A(d(4));case "h":return d(3)%12||12;case "hh":return A(d(3)%12||12);case "H":return d(3);case "HH":return A(d(3));case "d":return d(2);case "dd":return A(d(2));case "ddd":return e("dayNamesShort")[d(7)]||"";case "dddd":return e("dayNames")[d(7)]||"";case "M":return d(1)+1;case "MM":return A(d(1)+1);case "MMM":return e("monthNamesShort")[d(1)]||"";case "MMMM":return e("monthNames")[d(1)]||"";case "yy":return(d(0)+"").substring(2);case "yyyy":return d(0);case "t":return v(d,e).substr(0,1).toLowerCase();case "tt":return v(d,e).toLowerCase();case "T":return v(d,e).substr(0,1);case "TT":return v(d,e);case "z":case "zz":case "zzz":return g?c="Z":(e=b.getTimezoneOffset(),b=0>e?"+":"-",d=f.floor(f.abs(e)/60),e=f.abs(e)%60,g=d,"zz"==c?g=A(d):"zzz"==c&&(g=A(d)+":"+A(e)),c=b+g),c;case "w":return k(d);case "ww":return A(k(d));case "S":return c=d(2),10<c&&20>c?"th":["st","nd","rd"][c%10-1]||"th"}}function v(a,b){return 12>a(3)?b("amDesignator"):b("pmDesignator")}function x(a){return!isNaN(+a[0])}function y(a,b,c){return a["get"+(b?"UTC":"")+H[c]]()}function D(a,b,c,d){a["set"+(b?"UTC":"")+H[c]].apply(a,d)}function G(a){return new g(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())}function B(a,b){return 32-(new g(F(a,b,32))).getUTCDate()}function E(a){return function(){return a.apply(b,[this].concat(C(arguments)))}}function z(a){var c=C(arguments,1);return function(){return a.apply(b,c.concat(C(arguments)))}}function C(a,c,d){return e.prototype.slice.call(a,c||0,d===b?a.length:d)}function K(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function A(a,b){b=b||2;for(a+="";a.length<b;)a="0"+a;return a}var H="FullYear Month Date Hours Minutes Seconds Milliseconds Day Year".split(" "),M=["Years","Months","Days"],L=[12,31,24,60,60,1E3,1],N=/(([a-zA-Z])\2*)|(\((('.*?'|\(.*?\)|.)*?)\))|('(.*?)')/,F=g.UTC,J=g.prototype.toUTCString,w=a.prototype;w.length=1;w.splice=e.prototype.splice;w.getUTCMode=E(c);w.setUTCMode=E(d);w.getTimezoneOffset=function(){return c(this)?0:this[0].getTimezoneOffset()};K(H,function(a,b){w["get"+a]=function(){return y(this[0],c(this),b)};8!=b&&(w["getUTC"+a]=function(){return y(this[0],!0,b)});7!=b&&(w["set"+a]=function(a){l(this,b,a,arguments,c(this));return this},8!=b&&(w["setUTC"+a]=function(a){l(this,b,a,arguments,!0);return this},w["add"+(M[b]||a)]=function(a,c){m(this,b,a,c);return this},w["diff"+(M[b]||a)]=function(a){return q(this,a,b)}))});w.getWeek=function(){return k(z(y,this,!1))};w.getUTCWeek=function(){return k(z(y,this,!0))};w.setWeek=function(a,b){r(this,a,b,!1);return this};w.setUTCWeek=function(a,b){r(this,a,b,!0);return this};w.addWeeks=function(a){return this.addDays(7*Number(a))};w.diffWeeks=function(a){return q(this,a,2)/7};a.parsers=[function(a,b,c){if(a=a.match(/^(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/)){var d=new g(F(a[1],a[3]?a[3]-1:0,a[5]||1,a[7]||0,a[8]||0,a[10]||0,a[12]?1E3*Number("0."+a[12]):0));a[13]?a[14]&&d.setUTCMinutes(d.getUTCMinutes()+("-"==a[15]?1:-1)*(60*Number(a[16])+(a[18]?Number(a[18]):0))):b||(d=G(d));return c.setTime(+d)}}];a.parse=function(b){return+a(""+b)};w.toString=function(a,d,e){return a!==b&&x(this)?t(this,a,d,e,c(this)):this[0].toString()};w.toUTCString=w.toGMTString=function(a,c,d){return a!==b&&x(this)?t(this,a,c,d,!0):this[0].toUTCString()};w.toISOString=function(){return this.toUTCString("yyyy-MM-dd'T'HH:mm:ss(.fff)zzz")};a.defaultLocale="";a.locales={"":{monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),amDesignator:"AM",pmDesignator:"PM"}};a.formatters={i:"yyyy-MM-dd'T'HH:mm:ss(.fff)",u:"yyyy-MM-dd'T'HH:mm:ss(.fff)zzz"};K("getTime valueOf toDateString toTimeString toLocaleString toLocaleDateString toLocaleTimeString toJSON".split(" "),function(a){w[a]=function(){return this[0][a]()}});w.setTime=function(a){this[0].setTime(a);return this};w.valid=E(x);w.clone=function(){return new a(this)};w.clearTime=function(){return this.setHours(0,0,0,0)};w.toDate=function(){return new g(+this[0])};a.now=function(){return+new g};a.today=function(){return(new a).clearTime()};a.UTC=F;a.getDaysInMonth=B;"undefined"!==typeof module&&module.exports&&(module.exports=a);"function"===typeof define&&define.amd&&define([],function(){return a});return a}(Date,Math,Array);define("xdate",function(){return XDate});
define("gcw-custom-typeahead.hbs",["handlebars"],function(g){var f=g.template({1:function(e,b,a,c,d,f,g){var m;return'  \x3cli class\x3d"results-item-ally" role\x3d"presentation"\x3e\n'+(null!=(m=a["if"].call(null!=b?b:{},null!=g[1]?g[1].isV4:g[1],{name:"if",hash:{},fn:e.program(2,d,0,f,g),inverse:e.program(4,d,0,f,g),data:d}))?m:"")+"    \x3c/a\x3e\n  \x3c/li\x3e\n"},2:function(e,b,a,c,d){var f,g;return'    \x3ca href\x3d"#" class\x3d"details uitk-ta" data-value\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=b?b.regionNames:b)?f.lastSearchName:f,b))+'" id\x3d"aria-option-'+e.escapeExpression((g=null!=(g=a.index||d&&d.index)?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"index",hash:{},data:d}):g))+'" role\x3d"option" tabindex\x3d"-1" data-id\x3d"'+e.escapeExpression((g=null!=(g=a.gaiaId||(null!=b?b.gaiaId:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"gaiaId",hash:{},data:d}):g))+'" data-type\x3d"'+e.escapeExpression((g=null!=(g=a.type||(null!=b?b.type:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"type",hash:{},data:d}):g))+'" data-rails-station-code\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=(f=null!=b?b.hierarchyInfo:b)?f.rails:f)?f.stationCode:f,b))+'" data-airport-code\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=(f=null!=b?b.hierarchyInfo:b)?f.airport:f)?f.airportCode:f,b))+'" data-lat\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=b?b.coordinates:b)?f.lat:f,b))+'" data-long\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=b?b.coordinates:b)?f["long"]:f,b))+'"\x3e\n      \x3cspan class\x3d"icon icon-'+e.escapeExpression((g=null!=(g=a.icon||(null!=b?b.icon:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"icon",hash:{},data:d}):g))+"\" aria-hidden\x3d'true'\x3e\x3c/span\x3e"+(null!=(f=e.lambda(null!=(f=null!=b?b.regionNames:b)?f.displayName:f,b))?f:"")+"\n"},4:function(e,b,a,c,d){var f,g;return'    \x3ca href\x3d"#" class\x3d"details" data-value\x3d"'+e.escapeExpression((g=null!=(g=a.l||(null!=b?b.l:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"l",hash:{},data:d}):g))+'" id\x3d"aria-option-'+e.escapeExpression((g=null!=(g=a.index||d&&d.index)?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"index",hash:{},data:d}):g))+'" role\x3d"option" tabindex\x3d"-1" data-id\x3d"'+e.escapeExpression((g=null!=(g=a.id||(null!=b?b.id:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"id",hash:{},data:d}):g))+'" data-type\x3d"'+e.escapeExpression((g=null!=(g=a.t||(null!=b?b.t:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"t",hash:{},data:d}):g))+'" data-rails-station-code\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=(f=null!=b?b.hierarchyInfo:b)?f.rails:f)?f.stationCode:f,b))+'"\x3e\n      \x3cspan class\x3d"icon icon-'+e.escapeExpression((g=null!=(g=a.icon||(null!=b?b.icon:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"icon",hash:{},data:d}):g))+"\" aria-hidden\x3d'true'\x3e\x3c/span\x3e"+(null!=(f=(g=null!=(g=a.d||(null!=b?b.d:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"d",hash:{},data:d}):g))?f:"")+"\n"},6:function(e,b,a,c,d){var f,g;return null!=(f=(g=null!=(g=a.closeText||(null!=b?b.closeText:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"closeText",hash:{},data:d}):g))?f:""},8:function(e,b,a,c,d){var f;return null!=(f=(a.i18n||b&&b.i18n||a.helperMissing).call(null!=b?b:{},"close",{name:"i18n",hash:{bundle:"uitk_messages",locale:null!=b?b.locale:b},data:d}))?f:""},compiler:[7,"\x3e\x3d 4.0.0"],main:function(e,b,a,c,d,f,g){var l,k;return'\x3cul id\x3d"'+e.escapeExpression((k=null!=(k=a.ariaOwns||(null!=b?b.ariaOwns:b))?k:a.helperMissing,"function"===typeof k?k.call(null!=b?b:{},{name:"ariaOwns",hash:{},data:d}):k))+'" role\x3d"listbox" class\x3d"results"\x3e\n'+(null!=(l=a.each.call(null!=b?b:{},null!=b?b.results:b,{name:"each",hash:{},fn:e.program(1,d,0,f,g),inverse:e.noop,data:d}))?l:"")+'\x3c/ul\x3e\n\x3cfooter class\x3d"footer" role\x3d"application"\x3e\n  \x3ca class\x3d"close" href\x3d"#" aria-label\x3d\''+(null!=(l=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{},fn:e.program(6,d,0,f,g),inverse:e.noop,data:d}))?l:"")+"\n    "+(null!=(l=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{operator:"!\x3d"},fn:e.program(8,d,0,f,g),inverse:e.noop,data:d}))?l:"")+"'\x3e\n    "+(null!=(l=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{},fn:e.program(6,d,0,f,g),inverse:e.noop,data:d}))?l:"")+"\n    "+(null!=(l=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{operator:"!\x3d"},fn:e.program(8,d,0,f,g),inverse:e.noop,data:d}))?l:"")+'\n    \x3cspan class\x3d"icon icon-close"\x3e\x3c/span\x3e\n  \x3c/a\x3e\n\x3c/footer\x3e'},useData:!0,useDepths:!0});g.templates=g.templates||{};g.templates["gcw-custom-typeahead"]=f;g.partials=g.partials||{};return g.partials["gcw-custom-typeahead"]=f});
//# sourceMappingURL=script.js.map